{"name":"Executive Support - Comcast","desc":"Comcast User Profile with many many facts","template":{"_id":{"$oid":"566dbed41a30ff9f1993177d"},"id":"566dbed41a30ff9f1993177d","owner":{},"recType":"app","name":"Executive Support - Comcast","desc":"Comcast User Profile with many many facts","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450037146686,"createDate":{"$date":1450032852726},"updateDate":{"$date":1450037146686},"origin":{"id":"566dbb172e0000b90556efb1","name":"Executive Support - Comcast","desc":"Comcast User Profile with many many facts","creatorId":"tpanagos@point.io","createDate":1450032852713,"checksum":"73C59CEE97FAAB6994B186E3732AB802970108280CBAB801040F61C92A12672FL26245"},"data":{"style":"<!--Enter Style Here-->","facts":{"ADListMap":{"apidata_method":"GETRECS","objTypeId":"Default","display":"once"},"ADReadMap":{"apidata_method":"GET","objId":"$$objId","objTypeId":"Profile","display":"always"},"DossierMap":{"apidata_method":"GET","display":"always","objId":"$$objId","objTypeId":"com.comcast.dossier_data","template":"com.comcast.dossier_template","title":"Dossier Data"},"AddressMap":{"apidata_method":"GET","display":"always","objId":"$$objId","objTypeId":"com.comcast.address_data","template":"com.comcast.address_template","title":"Dossier Addresses"},"PasswordMap":{"apidata_method":"GET","display":"always","objId":"$$objId","objTypeId":"com.comcast.password_data","template":"com.comcast.password_template","title":"Dossier Passwords"},"FilesFolderMap":{"apidata_method":"GET","display":"always","objTypeId":"Content","containerid":"/Demo","path":"/Demo","objId":"824BCE62-FBB1-464D-AF58556AF35003BB"},"PhotosFolderMap":{"apidata_method":"GET","display":"always","containerid":"/Demo","path":"/Demo","objTypeId":"Content","objId":"824BCE62-FBB1-464D-AF58556AF35003BB"},"admins":["anthony@comcast.com","tpanagos@point.io","msalomone@point.io"]},"forms":[{"taskname":"Select User","taskkey":"poi_select_form","formid":"566dbeca1a30ff811993174b","formname":"poi_select_form"},{"taskname":"Help Desk UI","taskkey":"poi_HelpDeskUI_form","formid":"566dbeca1a30ff811993174b","formname":"poi_HelpDeskUI_form"}],"providers":[{"taskname":"List AD Entries","taskkey":"poi_ListADProfile_fact","providerid":"566dbed11a30ff071893176f"},{"taskname":"Get AD data from GUID","taskkey":"poi_GetADProfile_fact","providerid":"566dbed11a30ff071893176f"},{"taskname":"Get Dossier Data","taskkey":"poi_GetDossierData_fact","providerid":"566dbed21a30ff0b18931775"},{"taskname":"Get Address Data","taskkey":"poi_GetAddressData_fact","providerid":"566dbed21a30ff0b18931775"},{"taskname":"Get Password Data","taskkey":"poi_GetPwdData_fact","providerid":"566dbed21a30ff0b18931775"},{"taskname":"Get Files","taskkey":"poi_GetFilesData_fact","providerid":"566dbed21a30ff8119931773"},{"taskname":"Get Photos","taskkey":"poi_GetPhotos_fact","providerid":"566dbed21a30ff8119931773"}],"processtype":{"name":"com.comcast.ExecutiveSupport","version":"com.comcast.ExecutiveSupport:2:574"},"icon":"data:image/png;base64,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","diagram_xml":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"newApp\" id=\"279\" inline=\"false\" deletable=\"false\" x=\"0\" y=\"0\">\n    <mutation formcount=\"2\" factcount=\"7\" forms=\",Select User,poi_select_form,Help Desk UI,poi_HelpDeskUI_form\" facts=\",List AD Entries,poi_ListADProfile_fact ,Get AD data from GUID,poi_GetADProfile_fact ,Get Dossier Data,poi_GetDossierData_fact ,Get Address Data,poi_GetAddressData_fact ,Get Password Data,poi_GetPwdData_fact ,Get Files,poi_GetFilesData_fact ,Get Photos,poi_GetPhotos_fact \" factmap=\",ADListMap,ADReadMap,DossierMap,AddressMap,PasswordMap,FilesFolderMap,PhotosFolderMap\"></mutation>\n    <field name=\"PROCESSTYPES\">[\"Comcast Executive Support\",\"com.comcast.ExecutiveSupport:2:574\"]</field>\n    <value name=\"FORM_1\">\n      <block type=\"Form\" id=\"280\">\n        <field name=\"FORMS\">566dbeca1a30ff811993174b</field>\n      </block>\n    </value>\n    <value name=\"FORM_2\">\n      <block type=\"Form\" id=\"281\">\n        <field name=\"FORMS\">566dbeca1a30ff811993174b</field>\n      </block>\n    </value>\n    <value name=\"FACT_1\">\n      <block type=\"newFact\" id=\"282\" inline=\"false\">\n        <mutation inputcount=\"1\" type=\"LIST Recs\"></mutation>\n        <field name=\"FACTS\">566dbed11a30ff071893176f</field>\n        <field name=\"factTypes\">LIST Recs</field>\n        <field name=\"display\">once</field>\n        <value name=\"INPUT_0\">\n          <block type=\"text\" id=\"283\">\n            <field name=\"TEXT\">Default</field>\n          </block>\n        </value>\n      </block>\n    </value>\n    <value name=\"FACT_2\">\n      <block type=\"newFact\" id=\"284\" inline=\"false\">\n        <mutation inputcount=\"2\" type=\"READ\"></mutation>\n        <field name=\"FACTS\">566dbed11a30ff071893176f</field>\n        <field name=\"factTypes\">READ</field>\n        <field name=\"display\">always</field>\n        <value name=\"INPUT_0\">\n          <block type=\"variable\" id=\"285\">\n            <field name=\"SELECT\">objId</field>\n          </block>\n        </value>\n        <value name=\"INPUT_1\">\n          <block type=\"text\" id=\"286\">\n            <field name=\"TEXT\">Profile</field>\n          </block>\n        </value>\n      </block>\n    </value>\n    <value name=\"FACT_3\">\n      <block type=\"newFact\" id=\"287\" inline=\"false\">\n        <mutation inputcount=\"2\" type=\"READ\"></mutation>\n        <field name=\"FACTS\">566dbed21a30ff0b18931775</field>\n        <field name=\"factTypes\">READ</field>\n        <field name=\"display\">always</field>\n        <value name=\"INPUT_0\">\n          <block type=\"variable\" id=\"288\">\n            <field name=\"SELECT\">objId</field>\n          </block>\n        </value>\n        <value name=\"INPUT_1\">\n          <block type=\"text\" id=\"289\">\n            <field name=\"TEXT\">com.comcast.dossier_data</field>\n          </block>\n        </value>\n      </block>\n    </value>\n    <value name=\"FACT_4\">\n      <block type=\"newFact\" id=\"290\" inline=\"false\">\n        <mutation inputcount=\"2\" type=\"READ\"></mutation>\n        <field name=\"FACTS\">566dbed21a30ff0b18931775</field>\n        <field name=\"factTypes\">READ</field>\n        <field name=\"display\">always</field>\n        <value name=\"INPUT_0\">\n          <block type=\"variable\" id=\"291\">\n            <field name=\"SELECT\">objId</field>\n          </block>\n        </value>\n        <value name=\"INPUT_1\">\n          <block type=\"text\" id=\"292\">\n            <field name=\"TEXT\">com.comcast.address_data</field>\n          </block>\n        </value>\n      </block>\n    </value>\n    <value name=\"FACT_5\">\n      <block type=\"newFact\" id=\"293\" inline=\"false\">\n        <mutation inputcount=\"2\" type=\"READ\"></mutation>\n        <field name=\"FACTS\">566dbed21a30ff0b18931775</field>\n        <field name=\"factTypes\">READ</field>\n        <field name=\"display\">always</field>\n        <value name=\"INPUT_0\">\n          <block type=\"variable\" id=\"294\">\n            <field name=\"SELECT\">objId</field>\n          </block>\n        </value>\n        <value name=\"INPUT_1\">\n          <block type=\"text\" id=\"295\">\n            <field name=\"TEXT\">com.comcast.password_data</field>\n          </block>\n        </value>\n      </block>\n    </value>\n    <value name=\"FACT_6\">\n      <block type=\"newFact\" id=\"296\" inline=\"false\">\n        <mutation inputcount=\"2\" type=\"READ\"></mutation>\n        <field name=\"FACTS\">566dbed21a30ff8119931773</field>\n        <field name=\"factTypes\">READ</field>\n        <field name=\"display\">always</field>\n        <value name=\"INPUT_0\">\n          <block type=\"text\" id=\"297\">\n            <field name=\"TEXT\">824BCE62-FBB1-464D-AF58556AF35003BB</field>\n          </block>\n        </value>\n        <value name=\"INPUT_1\">\n          <block type=\"text\" id=\"298\">\n            <field name=\"TEXT\">Content</field>\n          </block>\n        </value>\n      </block>\n    </value>\n    <value name=\"FACT_7\">\n      <block type=\"newFact\" id=\"299\" inline=\"false\">\n        <mutation inputcount=\"2\" type=\"READ\"></mutation>\n        <field name=\"FACTS\">566dbed21a30ff8119931773</field>\n        <field name=\"factTypes\">READ</field>\n        <field name=\"display\">always</field>\n        <value name=\"INPUT_0\">\n          <block type=\"text\" id=\"300\">\n            <field name=\"TEXT\">824BCE62-FBB1-464D-AF58556AF35003BB</field>\n          </block>\n        </value>\n        <value name=\"INPUT_1\">\n          <block type=\"text\" id=\"301\">\n            <field name=\"TEXT\">Content</field>\n          </block>\n        </value>\n      </block>\n    </value>\n  </block>\n</xml>","styleChoice":"Default"},"checksum":"F1C349CB11CA017B23A795BC97A68EBDE5733810EAA8DB65EB93682847EA02FFL29376"},"facts":[{"_id":{"$oid":"566dbed21a30ff8119931773"},"id":"566dbed21a30ff8119931773","owner":{},"recType":"app","name":"APIDoc Shares & Content Provider","desc":"New version of APIDoc Fact that allows for both Share & Content directives for Comcast User Profile","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032850361,"createDate":{"$date":1450032850361},"origin":{"id":"5665fab5380000e701c7b7a4","name":"APIDoc Shares & Content Provider","desc":"New version of APIDoc Fact that allows for both Share & Content directives for Comcast User Profile","creatorId":"tpanagos@point.io","createDate":1450032850361,"checksum":"16878368E0CBD4FBF8F89AAAAF6E3D9DC0443CF948E651FC5463CD30495EBDEFL455"},"data":{"facts":{},"query":"","component":{"forms":[{"taskname":"Default","taskkey":"poi_default_view","formid":"566dbecb1a30fffa19931751","formname":"poi_default_view"},{"taskname":"Shares","taskkey":"poi_shareslist_view","formid":"566dbecb1a30fffa19931751","formname":"poi_shareslist_view"}],"providers":[],"processid":"io.point.APIdocShare_provider","processtype":{"name":"io.point.APIdocShare_provider","version":"io.point.APIdocShare_provider:89:2012504"}}},"checksum":"16878368E0CBD4FBF8F89AAAAF6E3D9DC0443CF948E651FC5463CD30495EBDEFL455"},{"_id":{"$oid":"566dbed21a30ff8119931773"},"id":"566dbed21a30ff8119931773","owner":{},"recType":"app","name":"APIDoc Shares & Content Provider","desc":"New version of APIDoc Fact that allows for both Share & Content directives for Comcast User Profile","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032850361,"createDate":{"$date":1450032850361},"origin":{"id":"5665fab5380000e701c7b7a4","name":"APIDoc Shares & Content Provider","desc":"New version of APIDoc Fact that allows for both Share & Content directives for Comcast User Profile","creatorId":"tpanagos@point.io","createDate":1450032850361,"checksum":"16878368E0CBD4FBF8F89AAAAF6E3D9DC0443CF948E651FC5463CD30495EBDEFL455"},"data":{"facts":{},"query":"","component":{"forms":[{"taskname":"Default","taskkey":"poi_default_view","formid":"566dbecb1a30fffa19931751","formname":"poi_default_view"},{"taskname":"Shares","taskkey":"poi_shareslist_view","formid":"566dbecb1a30fffa19931751","formname":"poi_shareslist_view"}],"providers":[],"processid":"io.point.APIdocShare_provider","processtype":{"name":"io.point.APIdocShare_provider","version":"io.point.APIdocShare_provider:89:2012504"}}},"checksum":"16878368E0CBD4FBF8F89AAAAF6E3D9DC0443CF948E651FC5463CD30495EBDEFL455"},{"_id":{"$oid":"566dbed21a30ff0b18931775"},"id":"566dbed21a30ff0b18931775","owner":{},"recType":"app","name":"dossier retrieval 2.0","desc":"Dossier Fact parameterized to return misc, address, or password data","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032850831,"createDate":{"$date":1450032850831},"origin":{"id":"5665f01d3800004701c7b78f","name":"dossier retrieval 2.0","desc":"Dossier Fact parameterized to return misc, address, or password data","creatorId":"tpanagos@point.io","createDate":1450032850831,"checksum":"3834E44A7029FED29C64E88A99A16F4D169FA25268B47506ACABB87EFED03750L660"},"data":{"facts":{},"query":"[\n  {\n    \"$match\": {\n      \"data.vars.user\": \"$$objId\",\n      \"data.recordType\": \"$$objTypeId\"\n    }\n  }\n]","component":{"forms":[{"taskname":"Default","taskkey":"poi_default_view","formid":"566dbecd1a30ff0918931759","formname":"poi_default_view"},{"taskname":"Type 1","taskkey":"poi_type1_view","formid":"566dbecd1a30ff0918931759","formname":"poi_type1_view"},{"taskname":"Type 2","taskkey":"poi_type2_view","formid":"566dbecd1a30ff0918931759","formname":"poi_type2_view"}],"providers":[],"processid":"io.point.stub_provider","processtype":{"name":"io.point.stub_provider","version":"io.point.stub_provider:43:885008"}}},"checksum":"3834E44A7029FED29C64E88A99A16F4D169FA25268B47506ACABB87EFED03750L660"},{"_id":{"$oid":"566dbed21a30ff0b18931775"},"id":"566dbed21a30ff0b18931775","owner":{},"recType":"app","name":"dossier retrieval 2.0","desc":"Dossier Fact parameterized to return misc, address, or password data","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032850831,"createDate":{"$date":1450032850831},"origin":{"id":"5665f01d3800004701c7b78f","name":"dossier retrieval 2.0","desc":"Dossier Fact parameterized to return misc, address, or password data","creatorId":"tpanagos@point.io","createDate":1450032850831,"checksum":"3834E44A7029FED29C64E88A99A16F4D169FA25268B47506ACABB87EFED03750L660"},"data":{"facts":{},"query":"[\n  {\n    \"$match\": {\n      \"data.vars.user\": \"$$objId\",\n      \"data.recordType\": \"$$objTypeId\"\n    }\n  }\n]","component":{"forms":[{"taskname":"Default","taskkey":"poi_default_view","formid":"566dbecd1a30ff0918931759","formname":"poi_default_view"},{"taskname":"Type 1","taskkey":"poi_type1_view","formid":"566dbecd1a30ff0918931759","formname":"poi_type1_view"},{"taskname":"Type 2","taskkey":"poi_type2_view","formid":"566dbecd1a30ff0918931759","formname":"poi_type2_view"}],"providers":[],"processid":"io.point.stub_provider","processtype":{"name":"io.point.stub_provider","version":"io.point.stub_provider:43:885008"}}},"checksum":"3834E44A7029FED29C64E88A99A16F4D169FA25268B47506ACABB87EFED03750L660"},{"_id":{"$oid":"566dbed21a30ff0b18931775"},"id":"566dbed21a30ff0b18931775","owner":{},"recType":"app","name":"dossier retrieval 2.0","desc":"Dossier Fact parameterized to return misc, address, or password data","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032850831,"createDate":{"$date":1450032850831},"origin":{"id":"5665f01d3800004701c7b78f","name":"dossier retrieval 2.0","desc":"Dossier Fact parameterized to return misc, address, or password data","creatorId":"tpanagos@point.io","createDate":1450032850831,"checksum":"3834E44A7029FED29C64E88A99A16F4D169FA25268B47506ACABB87EFED03750L660"},"data":{"facts":{},"query":"[\n  {\n    \"$match\": {\n      \"data.vars.user\": \"$$objId\",\n      \"data.recordType\": \"$$objTypeId\"\n    }\n  }\n]","component":{"forms":[{"taskname":"Default","taskkey":"poi_default_view","formid":"566dbecd1a30ff0918931759","formname":"poi_default_view"},{"taskname":"Type 1","taskkey":"poi_type1_view","formid":"566dbecd1a30ff0918931759","formname":"poi_type1_view"},{"taskname":"Type 2","taskkey":"poi_type2_view","formid":"566dbecd1a30ff0918931759","formname":"poi_type2_view"}],"providers":[],"processid":"io.point.stub_provider","processtype":{"name":"io.point.stub_provider","version":"io.point.stub_provider:43:885008"}}},"checksum":"3834E44A7029FED29C64E88A99A16F4D169FA25268B47506ACABB87EFED03750L660"},{"_id":{"$oid":"566dbed11a30ff071893176f"},"id":"566dbed11a30ff071893176f","owner":{},"recType":"app","name":"ActiveDirectory Fact Provider","desc":"Fact provider for Listing and Reading user info from Active Directory","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032849343,"createDate":{"$date":1450032849343},"origin":{"id":"5669cd2b3800008708c7b819","name":"ActiveDirectory Fact Provider","desc":"Fact provider for Listing and Reading user info from Active Directory","creatorId":"tpanagos@point.io","createDate":1450032849343,"checksum":"3B2673E860CB761944060FB4E044C84AF8F3E674AE9E8605A11EEB64B3CBFD89L463"},"data":{"facts":{},"query":"","component":{"forms":[{"taskname":"Default","taskkey":"poi_default_view","formid":"566dbecb1a30ff811993174d","formname":"poi_default_view"},{"taskname":"User Profile","taskkey":"poi_profile_view","formid":"566dbecb1a30ff091893174f","formname":"poi_profile_view"}],"providers":[],"processid":"io.point.ActiveDirectory_provider","processtype":{"name":"io.point.ActiveDirectory_provider","version":"io.point.ActiveDirectory_provider:1:2511"}}},"checksum":"3B2673E860CB761944060FB4E044C84AF8F3E674AE9E8605A11EEB64B3CBFD89L463"},{"_id":{"$oid":"566dbed11a30ff071893176f"},"id":"566dbed11a30ff071893176f","owner":{},"recType":"app","name":"ActiveDirectory Fact Provider","desc":"Fact provider for Listing and Reading user info from Active Directory","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032849343,"createDate":{"$date":1450032849343},"origin":{"id":"5669cd2b3800008708c7b819","name":"ActiveDirectory Fact Provider","desc":"Fact provider for Listing and Reading user info from Active Directory","creatorId":"tpanagos@point.io","createDate":1450032849343,"checksum":"3B2673E860CB761944060FB4E044C84AF8F3E674AE9E8605A11EEB64B3CBFD89L463"},"data":{"facts":{},"query":"","component":{"forms":[{"taskname":"Default","taskkey":"poi_default_view","formid":"566dbecb1a30ff811993174d","formname":"poi_default_view"},{"taskname":"User Profile","taskkey":"poi_profile_view","formid":"566dbecb1a30ff091893174f","formname":"poi_profile_view"}],"providers":[],"processid":"io.point.ActiveDirectory_provider","processtype":{"name":"io.point.ActiveDirectory_provider","version":"io.point.ActiveDirectory_provider:1:2511"}}},"checksum":"3B2673E860CB761944060FB4E044C84AF8F3E674AE9E8605A11EEB64B3CBFD89L463"}],"flows":[{"PROCESSTYPE":{"id":"com.comcast.ExecutiveSupport:2:574","name":"Comcast Executive Support","key":"com.comcast.ExecutiveSupport","category":"http://www.activiti.org/test","description":null,"resourceName":"bpmn","deploymentId":"571","version":2,"hasStartForm":false,"isSuspended":false,"tenantId":"io.point.tpanagos","BPMNXML":"<definitions targetNamespace=\"http://www.activiti.org/test\" expressionLanguage=\"http://www.w3.org/1999/XPath\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\">\n  <message name=\"injectListJSON\" id=\"injectListJSON\"/>\n  <process isExecutable=\"true\" name=\"Comcast Executive Support\" id=\"com.comcast.ExecutiveSupport\">\n    <startEvent name=\"ExecutiveRequestFlow\" id=\"start\"/>\n    <serviceTask activiti:class=\"plugins.facts\" name=\"List AD Entries\" id=\"servicetask6\">\n      <extensionElements>\n        <activiti:field name=\"PluginKey\">\n          <activiti:string>poi_ListADProfile_fact</activiti:string>\n        </activiti:field>\n        <activiti:field name=\"parameterMap\">\n          <activiti:expression>${ADListMap}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <userTask activiti:formKey=\"poi_select_form\" activiti:assignee=\"${wf_currentAssignee}\" name=\"Select User\" id=\"usertask1\"/>    \n    <serviceTask activiti:class=\"plugins.facts\" name=\"Get AD data from GUID\" id=\"serviceTask2\">\n      <extensionElements>\n        <activiti:field name=\"PluginKey\">\n          <activiti:string>poi_GetADProfile_fact</activiti:string>\n        </activiti:field>\n        <activiti:field name=\"parameterMap\">\n          <activiti:expression>${ADReadMap}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <userTask activiti:formKey=\"poi_HelpDeskUI_form\" activiti:assignee=\"${wf_currentAssignee}\" name=\"Help Desk UI\" id=\"userTask5\"/>\n    <boundaryEvent cancelActivity=\"false\" attachedToRef=\"userTask5\" name=\"Message\" id=\"boundarymessage6\">\n      <messageEventDefinition messageRef=\"injectListJSON\"/>\n    </boundaryEvent>\n    <sequenceFlow targetRef=\"end\" sourceRef=\"userTask5\" id=\"flow7\"/>\n    <endEvent name=\"end\" id=\"end\"/>\n    <serviceTask activiti:class=\"plugins.facts\" name=\"Get Dossier Data\" id=\"servicetask1\">\n      <extensionElements>\n        <activiti:field name=\"PluginKey\">\n          <activiti:string>poi_GetDossierData_fact</activiti:string>\n        </activiti:field>\n        <activiti:field name=\"parameterMap\">\n          <activiti:expression>${DossierMap}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <serviceTask activiti:class=\"plugins.facts\" name=\"Get Address Data\" id=\"servicetask2\">\n      <extensionElements>\n        <activiti:field name=\"PluginKey\">\n          <activiti:string>poi_GetAddressData_fact</activiti:string>\n        </activiti:field>\n        <activiti:field name=\"parameterMap\">\n          <activiti:expression>${AddressMap}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <serviceTask activiti:class=\"plugins.facts\" name=\"Get Password Data\" id=\"servicetask3\">\n      <extensionElements>\n        <activiti:field name=\"PluginKey\">\n          <activiti:string>poi_GetPwdData_fact</activiti:string>\n        </activiti:field>\n        <activiti:field name=\"parameterMap\">\n          <activiti:expression>${PasswordMap}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <sequenceFlow targetRef=\"servicetask2\" sourceRef=\"servicetask1\" id=\"flow9\"/>\n    <sequenceFlow targetRef=\"servicetask3\" sourceRef=\"servicetask2\" id=\"flow10\"/>\n    <sequenceFlow targetRef=\"servicetask4\" sourceRef=\"servicetask3\" id=\"flow11\"/>\n    <serviceTask activiti:class=\"plugins.facts\" name=\"Get Files\" id=\"servicetask4\">\n      <extensionElements>\n        <activiti:field name=\"PluginKey\">\n          <activiti:string>poi_GetFilesData_fact</activiti:string>\n        </activiti:field>\n        <activiti:field name=\"parameterMap\">\n          <activiti:expression>${FilesFolderMap}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <serviceTask activiti:class=\"plugins.facts\" name=\"Get Photos\" id=\"servicetask5\">\n      <extensionElements>\n        <activiti:field name=\"PluginKey\">\n          <activiti:string>poi_GetPhotos_fact</activiti:string>\n        </activiti:field>\n        <activiti:field name=\"parameterMap\">\n          <activiti:expression>${PhotosFolderMap}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <sequenceFlow targetRef=\"servicetask5\" sourceRef=\"servicetask4\" id=\"flow12\"/>\n    <sequenceFlow targetRef=\"userTask5\" sourceRef=\"servicetask5\" id=\"flow13\"/>\n    <sequenceFlow targetRef=\"servicetask6\" sourceRef=\"start\" id=\"flow14\"/>\n    <sequenceFlow targetRef=\"servicetask1\" sourceRef=\"serviceTask2\" id=\"flow15\"/>\n    <sequenceFlow targetRef=\"usertask1\" sourceRef=\"servicetask6\" id=\"flow17\"/>\n    <sequenceFlow targetRef=\"serviceTask2\" sourceRef=\"usertask1\" id=\"flow18\"/>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_ExecutiveRequestFlow\">\n    <bpmndi:BPMNPlane id=\"BPMNPlane_ExecutiveRequestFlow\" bpmnElement=\"ExecutiveRequestFlow\">\n      <bpmndi:BPMNShape id=\"BPMNShape_start\" bpmnElement=\"start\">\n        <omgdc:Bounds y=\"15.0\" x=\"0.0\" width=\"35.0\" height=\"35.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"BPMNShape_serviceTask2\" bpmnElement=\"serviceTask2\">\n        <omgdc:Bounds y=\"3.0\" x=\"230.0\" width=\"100.0\" height=\"60.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"BPMNShape_userTask5\" bpmnElement=\"userTask5\">\n        <omgdc:Bounds y=\"6.0\" x=\"1030.0\" width=\"100.0\" height=\"60.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"BPMNShape_boundarymessage6\" bpmnElement=\"boundarymessage6\">\n        <omgdc:Bounds y=\"51.0\" x=\"1095.0\" width=\"30.0\" height=\"30.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"BPMNShape_end\" bpmnElement=\"end\">\n        <omgdc:Bounds y=\"18.0\" x=\"1190.0\" width=\"35.0\" height=\"35.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"BPMNShape_servicetask1\" bpmnElement=\"servicetask1\">\n        <omgdc:Bounds y=\"3.0\" x=\"370.0\" width=\"100.0\" height=\"60.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"BPMNShape_servicetask2\" bpmnElement=\"servicetask2\">\n        <omgdc:Bounds y=\"4.0\" x=\"500.0\" width=\"100.0\" height=\"60.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"BPMNShape_servicetask3\" bpmnElement=\"servicetask3\">\n        <omgdc:Bounds y=\"4.0\" x=\"620.0\" width=\"100.0\" height=\"60.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"BPMNShape_servicetask4\" bpmnElement=\"servicetask4\">\n        <omgdc:Bounds y=\"5.0\" x=\"760.0\" width=\"100.0\" height=\"60.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"BPMNShape_servicetask5\" bpmnElement=\"servicetask5\">\n        <omgdc:Bounds y=\"5.0\" x=\"890.0\" width=\"100.0\" height=\"60.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"BPMNShape_servicetask6\" bpmnElement=\"servicetask6\">\n        <omgdc:Bounds y=\"3.0\" x=\"91.0\" width=\"100.0\" height=\"60.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"BPMNShape_usertask1\" bpmnElement=\"usertask1\">\n        <omgdc:Bounds y=\"80.0\" x=\"160.0\" width=\"100.0\" height=\"60.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"BPMNEdge_flow7\" bpmnElement=\"flow7\">\n        <omgdi:waypoint y=\"36.0\" x=\"1130.0\"/>\n        <omgdi:waypoint y=\"35.0\" x=\"1190.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"BPMNEdge_flow9\" bpmnElement=\"flow9\">\n        <omgdi:waypoint y=\"33.0\" x=\"470.0\"/>\n        <omgdi:waypoint y=\"34.0\" x=\"500.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"BPMNEdge_flow10\" bpmnElement=\"flow10\">\n        <omgdi:waypoint y=\"34.0\" x=\"600.0\"/>\n        <omgdi:waypoint y=\"34.0\" x=\"620.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"BPMNEdge_flow11\" bpmnElement=\"flow11\">\n        <omgdi:waypoint y=\"34.0\" x=\"720.0\"/>\n        <omgdi:waypoint y=\"35.0\" x=\"760.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"BPMNEdge_flow12\" bpmnElement=\"flow12\">\n        <omgdi:waypoint y=\"35.0\" x=\"860.0\"/>\n        <omgdi:waypoint y=\"35.0\" x=\"890.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"BPMNEdge_flow13\" bpmnElement=\"flow13\">\n        <omgdi:waypoint y=\"35.0\" x=\"990.0\"/>\n        <omgdi:waypoint y=\"36.0\" x=\"1030.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"BPMNEdge_flow14\" bpmnElement=\"flow14\">\n        <omgdi:waypoint y=\"32.0\" x=\"35.0\"/>\n        <omgdi:waypoint y=\"33.0\" x=\"91.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"BPMNEdge_flow15\" bpmnElement=\"flow15\">\n        <omgdi:waypoint y=\"33.0\" x=\"330.0\"/>\n        <omgdi:waypoint y=\"33.0\" x=\"370.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"BPMNEdge_flow17\" bpmnElement=\"flow17\">\n        <omgdi:waypoint y=\"63.0\" x=\"141.0\"/>\n        <omgdi:waypoint y=\"80.0\" x=\"210.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"BPMNEdge_flow18\" bpmnElement=\"flow18\">\n        <omgdi:waypoint y=\"80.0\" x=\"210.0\"/>\n        <omgdi:waypoint y=\"63.0\" x=\"280.0\"/>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>"}},{"PROCESSTYPE":{"id":"io.point.APIdocShare_provider:2:62","name":"io.point.APIdocShare_provider","key":"io.point.APIdocShare_provider","category":"http://www.activiti.org/test","description":null,"resourceName":"bpmn","deploymentId":"59","version":2,"hasStartForm":false,"isSuspended":false,"tenantId":"io.point.tpanagos","BPMNXML":"<definitions typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\" xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\">\n  <process id=\"io.point.APIdocShare_provider\" name=\"io.point.APIdocShare_provider\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"/>\n    <serviceTask id=\"task1\" name=\"List Objects\" activiti:class=\"plugins.fact_components.api_APIdocShare_List_Objs\">\n      <extensionElements>\n        <activiti:field name=\"serverURL\">\n          <activiti:expression>${serverURL}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <serviceTask id=\"task2\" name=\"List Records\" activiti:class=\"plugins.fact_components.api_APIdocShare_List_Recs\">\n      <extensionElements>\n        <activiti:field name=\"objTypeId\">\n          <activiti:expression>${objTypeId}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"serverURL\">\n          <activiti:expression>${serverURL}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"exclusivegateway1\"/>\n    <endEvent id=\"endevent1\" name=\"End\"/>\n    <exclusiveGateway id=\"exclusivegateway1\" name=\"Exclusive Gateway\" default=\"default\"/>\n    <sequenceFlow id=\"flow12\" name=\"GETOBJS\" sourceRef=\"exclusivegateway1\" targetRef=\"task1\">\n      <conditionExpression xsi:type=\"tFormalExpression\">${apidata_method == &quot;GETOBJS&quot;}</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"flow13\" name=\"GETRECS\" sourceRef=\"exclusivegateway1\" targetRef=\"task2\">\n      <conditionExpression xsi:type=\"tFormalExpression\">${apidata_method == &quot;GETRECS&quot;}</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"flow18\" sourceRef=\"task2\" targetRef=\"endevent1\"/>\n    <sequenceFlow id=\"flow19\" sourceRef=\"task1\" targetRef=\"endevent1\"/>\n    <sequenceFlow id=\"default\" name=\"Unsupported\" sourceRef=\"exclusivegateway1\" targetRef=\"endevent1\"/>\n    <userTask id=\"usertask1\" name=\"Default\" activiti:formKey=\"poi_default_view\"/>\n    <userTask id=\"usertask2\" name=\"Shares\" activiti:formKey=\"poi_shareslist_view\"/>\n    <serviceTask id=\"servicetask1\" name=\"Read Object List\" activiti:class=\"plugins.fact_components.api_APIdocShare_Read_Obj_toFields\">\n      <documentation>This might return an Array of folder contents.</documentation>\n      <extensionElements>\n        <activiti:field name=\"objTypeId\">\n          <activiti:expression>${objTypeId}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"objId\">\n          <activiti:expression>${objId}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"serverURL\">\n          <activiti:expression>${serverURL}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"containerid\">\n          <activiti:expression>${containerid}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"path\">\n          <activiti:expression>${path}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <sequenceFlow id=\"flow20\" name=\"GET\" sourceRef=\"exclusivegateway1\" targetRef=\"servicetask1\">\n      <conditionExpression xsi:type=\"tFormalExpression\">${apidata_method == &quot;GET&quot;}</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"flow21\" sourceRef=\"servicetask1\" targetRef=\"endevent1\"/>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_io.point.APIdocShare_provider\">\n    <bpmndi:BPMNPlane bpmnElement=\"io.point.APIdocShare_provider\" id=\"BPMNPlane_io.point.APIdocShare_provider\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"70.0\" y=\"164.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task1\" id=\"BPMNShape_task1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"209.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task2\" id=\"BPMNShape_task2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"280.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"740.0\" y=\"164.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"exclusivegateway1\" id=\"BPMNShape_exclusivegateway1\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"150.0\" y=\"161.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"370.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"440.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"servicetask1\" id=\"BPMNShape_servicetask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"80.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"105.0\" y=\"181.0\"/>\n        <omgdi:waypoint x=\"150.0\" y=\"181.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow12\" id=\"BPMNEdge_flow12\">\n        <omgdi:waypoint x=\"170.0\" y=\"201.0\"/>\n        <omgdi:waypoint x=\"169.0\" y=\"236.0\"/>\n        <omgdi:waypoint x=\"330.0\" y=\"236.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"13.0\" width=\"52.0\" x=\"180.0\" y=\"219.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow13\" id=\"BPMNEdge_flow13\">\n        <omgdi:waypoint x=\"170.0\" y=\"201.0\"/>\n        <omgdi:waypoint x=\"169.0\" y=\"307.0\"/>\n        <omgdi:waypoint x=\"330.0\" y=\"307.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"13.0\" width=\"53.0\" x=\"180.0\" y=\"289.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow18\" id=\"BPMNEdge_flow18\">\n        <omgdi:waypoint x=\"435.0\" y=\"307.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"307.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"199.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow19\" id=\"BPMNEdge_flow19\">\n        <omgdi:waypoint x=\"435.0\" y=\"236.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"236.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"199.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"default\" id=\"BPMNEdge_default\">\n        <omgdi:waypoint x=\"190.0\" y=\"181.0\"/>\n        <omgdi:waypoint x=\"740.0\" y=\"181.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"13.0\" width=\"63.0\" x=\"209.0\" y=\"164.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow20\" id=\"BPMNEdge_flow20\">\n        <omgdi:waypoint x=\"170.0\" y=\"161.0\"/>\n        <omgdi:waypoint x=\"170.0\" y=\"107.0\"/>\n        <omgdi:waypoint x=\"330.0\" y=\"107.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"13.0\" width=\"100.0\" x=\"179.0\" y=\"95.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow21\" id=\"BPMNEdge_flow21\">\n        <omgdi:waypoint x=\"435.0\" y=\"107.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"107.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"164.0\"/>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>"}},{"PROCESSTYPE":{"id":"io.point.APIdocShare_provider:2:62","name":"io.point.APIdocShare_provider","key":"io.point.APIdocShare_provider","category":"http://www.activiti.org/test","description":null,"resourceName":"bpmn","deploymentId":"59","version":2,"hasStartForm":false,"isSuspended":false,"tenantId":"io.point.tpanagos","BPMNXML":"<definitions typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\" xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\">\n  <process id=\"io.point.APIdocShare_provider\" name=\"io.point.APIdocShare_provider\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"/>\n    <serviceTask id=\"task1\" name=\"List Objects\" activiti:class=\"plugins.fact_components.api_APIdocShare_List_Objs\">\n      <extensionElements>\n        <activiti:field name=\"serverURL\">\n          <activiti:expression>${serverURL}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <serviceTask id=\"task2\" name=\"List Records\" activiti:class=\"plugins.fact_components.api_APIdocShare_List_Recs\">\n      <extensionElements>\n        <activiti:field name=\"objTypeId\">\n          <activiti:expression>${objTypeId}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"serverURL\">\n          <activiti:expression>${serverURL}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"exclusivegateway1\"/>\n    <endEvent id=\"endevent1\" name=\"End\"/>\n    <exclusiveGateway id=\"exclusivegateway1\" name=\"Exclusive Gateway\" default=\"default\"/>\n    <sequenceFlow id=\"flow12\" name=\"GETOBJS\" sourceRef=\"exclusivegateway1\" targetRef=\"task1\">\n      <conditionExpression xsi:type=\"tFormalExpression\">${apidata_method == &quot;GETOBJS&quot;}</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"flow13\" name=\"GETRECS\" sourceRef=\"exclusivegateway1\" targetRef=\"task2\">\n      <conditionExpression xsi:type=\"tFormalExpression\">${apidata_method == &quot;GETRECS&quot;}</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"flow18\" sourceRef=\"task2\" targetRef=\"endevent1\"/>\n    <sequenceFlow id=\"flow19\" sourceRef=\"task1\" targetRef=\"endevent1\"/>\n    <sequenceFlow id=\"default\" name=\"Unsupported\" sourceRef=\"exclusivegateway1\" targetRef=\"endevent1\"/>\n    <userTask id=\"usertask1\" name=\"Default\" activiti:formKey=\"poi_default_view\"/>\n    <userTask id=\"usertask2\" name=\"Shares\" activiti:formKey=\"poi_shareslist_view\"/>\n    <serviceTask id=\"servicetask1\" name=\"Read Object List\" activiti:class=\"plugins.fact_components.api_APIdocShare_Read_Obj_toFields\">\n      <documentation>This might return an Array of folder contents.</documentation>\n      <extensionElements>\n        <activiti:field name=\"objTypeId\">\n          <activiti:expression>${objTypeId}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"objId\">\n          <activiti:expression>${objId}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"serverURL\">\n          <activiti:expression>${serverURL}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"containerid\">\n          <activiti:expression>${containerid}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"path\">\n          <activiti:expression>${path}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <sequenceFlow id=\"flow20\" name=\"GET\" sourceRef=\"exclusivegateway1\" targetRef=\"servicetask1\">\n      <conditionExpression xsi:type=\"tFormalExpression\">${apidata_method == &quot;GET&quot;}</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"flow21\" sourceRef=\"servicetask1\" targetRef=\"endevent1\"/>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_io.point.APIdocShare_provider\">\n    <bpmndi:BPMNPlane bpmnElement=\"io.point.APIdocShare_provider\" id=\"BPMNPlane_io.point.APIdocShare_provider\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"70.0\" y=\"164.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task1\" id=\"BPMNShape_task1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"209.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task2\" id=\"BPMNShape_task2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"280.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"740.0\" y=\"164.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"exclusivegateway1\" id=\"BPMNShape_exclusivegateway1\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"150.0\" y=\"161.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"370.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"440.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"servicetask1\" id=\"BPMNShape_servicetask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"80.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"105.0\" y=\"181.0\"/>\n        <omgdi:waypoint x=\"150.0\" y=\"181.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow12\" id=\"BPMNEdge_flow12\">\n        <omgdi:waypoint x=\"170.0\" y=\"201.0\"/>\n        <omgdi:waypoint x=\"169.0\" y=\"236.0\"/>\n        <omgdi:waypoint x=\"330.0\" y=\"236.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"13.0\" width=\"52.0\" x=\"180.0\" y=\"219.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow13\" id=\"BPMNEdge_flow13\">\n        <omgdi:waypoint x=\"170.0\" y=\"201.0\"/>\n        <omgdi:waypoint x=\"169.0\" y=\"307.0\"/>\n        <omgdi:waypoint x=\"330.0\" y=\"307.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"13.0\" width=\"53.0\" x=\"180.0\" y=\"289.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow18\" id=\"BPMNEdge_flow18\">\n        <omgdi:waypoint x=\"435.0\" y=\"307.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"307.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"199.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow19\" id=\"BPMNEdge_flow19\">\n        <omgdi:waypoint x=\"435.0\" y=\"236.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"236.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"199.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"default\" id=\"BPMNEdge_default\">\n        <omgdi:waypoint x=\"190.0\" y=\"181.0\"/>\n        <omgdi:waypoint x=\"740.0\" y=\"181.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"13.0\" width=\"63.0\" x=\"209.0\" y=\"164.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow20\" id=\"BPMNEdge_flow20\">\n        <omgdi:waypoint x=\"170.0\" y=\"161.0\"/>\n        <omgdi:waypoint x=\"170.0\" y=\"107.0\"/>\n        <omgdi:waypoint x=\"330.0\" y=\"107.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"13.0\" width=\"100.0\" x=\"179.0\" y=\"95.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow21\" id=\"BPMNEdge_flow21\">\n        <omgdi:waypoint x=\"435.0\" y=\"107.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"107.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"164.0\"/>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>"}},{"PROCESSTYPE":{"id":"io.point.stub_provider:3:74","name":"Stub Fact Provider Flow","key":"io.point.stub_provider","category":"http://www.activiti.org/test","description":null,"resourceName":"bpmn","deploymentId":"71","version":3,"hasStartForm":false,"isSuspended":false,"tenantId":"io.point.tpanagos","BPMNXML":"<definitions typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\" xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\">\n  <process id=\"io.point.stub_provider\" name=\"Stub Fact Provider Flow\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"/>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"exclusivegateway1\"/>\n    <endEvent id=\"endevent1\" name=\"End\"/>\n    <exclusiveGateway id=\"exclusivegateway1\" name=\"Exclusive Gateway\" default=\"default\"/>\n    <sequenceFlow id=\"default\" name=\"Unsupported\" sourceRef=\"exclusivegateway1\" targetRef=\"endevent1\"/>\n    <userTask id=\"usertask1\" name=\"Default\" activiti:formKey=\"poi_default_view\"/>\n    <userTask id=\"usertask2\" name=\"Type 1\" activiti:formKey=\"poi_type1_view\"/>\n    <userTask id=\"usertask3\" name=\"Type 2\" activiti:formKey=\"poi_type2_view\"/>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_io.point.Docusign_provider\">\n    <bpmndi:BPMNPlane bpmnElement=\"io.point.Docusign_provider\" id=\"BPMNPlane_io.point.Docusign_provider\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"70.0\" y=\"164.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"740.0\" y=\"164.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"exclusivegateway1\" id=\"BPMNShape_exclusivegateway1\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"150.0\" y=\"161.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"334.0\" y=\"220.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"334.0\" y=\"290.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask3\" id=\"BPMNShape_usertask3\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"334.0\" y=\"360.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"105.0\" y=\"181.0\"/>\n        <omgdi:waypoint x=\"150.0\" y=\"181.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"default\" id=\"BPMNEdge_default\">\n        <omgdi:waypoint x=\"190.0\" y=\"181.0\"/>\n        <omgdi:waypoint x=\"740.0\" y=\"181.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"12.0\" width=\"63.0\" x=\"209.0\" y=\"164.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>"}},{"PROCESSTYPE":{"id":"io.point.stub_provider:3:74","name":"Stub Fact Provider Flow","key":"io.point.stub_provider","category":"http://www.activiti.org/test","description":null,"resourceName":"bpmn","deploymentId":"71","version":3,"hasStartForm":false,"isSuspended":false,"tenantId":"io.point.tpanagos","BPMNXML":"<definitions typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\" xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\">\n  <process id=\"io.point.stub_provider\" name=\"Stub Fact Provider Flow\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"/>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"exclusivegateway1\"/>\n    <endEvent id=\"endevent1\" name=\"End\"/>\n    <exclusiveGateway id=\"exclusivegateway1\" name=\"Exclusive Gateway\" default=\"default\"/>\n    <sequenceFlow id=\"default\" name=\"Unsupported\" sourceRef=\"exclusivegateway1\" targetRef=\"endevent1\"/>\n    <userTask id=\"usertask1\" name=\"Default\" activiti:formKey=\"poi_default_view\"/>\n    <userTask id=\"usertask2\" name=\"Type 1\" activiti:formKey=\"poi_type1_view\"/>\n    <userTask id=\"usertask3\" name=\"Type 2\" activiti:formKey=\"poi_type2_view\"/>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_io.point.Docusign_provider\">\n    <bpmndi:BPMNPlane bpmnElement=\"io.point.Docusign_provider\" id=\"BPMNPlane_io.point.Docusign_provider\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"70.0\" y=\"164.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"740.0\" y=\"164.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"exclusivegateway1\" id=\"BPMNShape_exclusivegateway1\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"150.0\" y=\"161.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"334.0\" y=\"220.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"334.0\" y=\"290.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask3\" id=\"BPMNShape_usertask3\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"334.0\" y=\"360.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"105.0\" y=\"181.0\"/>\n        <omgdi:waypoint x=\"150.0\" y=\"181.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"default\" id=\"BPMNEdge_default\">\n        <omgdi:waypoint x=\"190.0\" y=\"181.0\"/>\n        <omgdi:waypoint x=\"740.0\" y=\"181.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"12.0\" width=\"63.0\" x=\"209.0\" y=\"164.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>"}},{"PROCESSTYPE":{"id":"io.point.stub_provider:3:74","name":"Stub Fact Provider Flow","key":"io.point.stub_provider","category":"http://www.activiti.org/test","description":null,"resourceName":"bpmn","deploymentId":"71","version":3,"hasStartForm":false,"isSuspended":false,"tenantId":"io.point.tpanagos","BPMNXML":"<definitions typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\" xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\">\n  <process id=\"io.point.stub_provider\" name=\"Stub Fact Provider Flow\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"/>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"exclusivegateway1\"/>\n    <endEvent id=\"endevent1\" name=\"End\"/>\n    <exclusiveGateway id=\"exclusivegateway1\" name=\"Exclusive Gateway\" default=\"default\"/>\n    <sequenceFlow id=\"default\" name=\"Unsupported\" sourceRef=\"exclusivegateway1\" targetRef=\"endevent1\"/>\n    <userTask id=\"usertask1\" name=\"Default\" activiti:formKey=\"poi_default_view\"/>\n    <userTask id=\"usertask2\" name=\"Type 1\" activiti:formKey=\"poi_type1_view\"/>\n    <userTask id=\"usertask3\" name=\"Type 2\" activiti:formKey=\"poi_type2_view\"/>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_io.point.Docusign_provider\">\n    <bpmndi:BPMNPlane bpmnElement=\"io.point.Docusign_provider\" id=\"BPMNPlane_io.point.Docusign_provider\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"70.0\" y=\"164.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"740.0\" y=\"164.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"exclusivegateway1\" id=\"BPMNShape_exclusivegateway1\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"150.0\" y=\"161.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"334.0\" y=\"220.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"334.0\" y=\"290.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask3\" id=\"BPMNShape_usertask3\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"334.0\" y=\"360.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"105.0\" y=\"181.0\"/>\n        <omgdi:waypoint x=\"150.0\" y=\"181.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"default\" id=\"BPMNEdge_default\">\n        <omgdi:waypoint x=\"190.0\" y=\"181.0\"/>\n        <omgdi:waypoint x=\"740.0\" y=\"181.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"12.0\" width=\"63.0\" x=\"209.0\" y=\"164.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>"}},{"PROCESSTYPE":{"id":"io.point.ActiveDirectory_provider:2:78","name":"io.point.ActiveDirectory_provider","key":"io.point.ActiveDirectory_provider","category":"http://www.activiti.org/test","description":null,"resourceName":"bpmn","deploymentId":"75","version":2,"hasStartForm":false,"isSuspended":false,"tenantId":"io.point.tpanagos","BPMNXML":"<definitions typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\" xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\">\n  <process id=\"io.point.ActiveDirectory_provider\" name=\"io.point.ActiveDirectory_provider\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"/>\n    <serviceTask id=\"task2\" name=\"List Records\" activiti:class=\"plugins.fact_components.api_AD_List_Recs\">\n      <extensionElements>\n        <activiti:field name=\"objTypeId\">\n          <activiti:expression>${objTypeId}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"serverURL\">\n          <activiti:expression>${serverURL}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"exclusivegateway1\"/>\n    <endEvent id=\"endevent1\" name=\"End\"/>\n    <exclusiveGateway id=\"exclusivegateway1\" name=\"Exclusive Gateway\" default=\"default\"/>\n    <sequenceFlow id=\"flow13\" name=\"GETRECS\" sourceRef=\"exclusivegateway1\" targetRef=\"task2\">\n      <conditionExpression xsi:type=\"tFormalExpression\">${apidata_method == &quot;GETRECS&quot;}</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"flow18\" sourceRef=\"task2\" targetRef=\"endevent1\"/>\n    <sequenceFlow id=\"default\" name=\"Unsupported\" sourceRef=\"exclusivegateway1\" targetRef=\"endevent1\"/>\n    <userTask id=\"usertask1\" name=\"Default\" activiti:formKey=\"poi_default_view\"/>\n    <userTask id=\"usertask2\" name=\"User Profile\" activiti:formKey=\"poi_profile_view\"/>\n    <serviceTask id=\"servicetask1\" name=\"Read Record\" activiti:class=\"plugins.fact_components.api_AD_Read_Obj_toFields\">\n      <extensionElements>\n        <activiti:field name=\"objTypeId\">\n          <activiti:expression>${objTypeId}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"objId\">\n          <activiti:expression>${objId}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"serverURL\">\n          <activiti:expression>${serverURL}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <sequenceFlow id=\"flow20\" name=\"GET\" sourceRef=\"exclusivegateway1\" targetRef=\"servicetask1\">\n      <conditionExpression xsi:type=\"tFormalExpression\">${apidata_method == &quot;GET&quot;}</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"flow21\" sourceRef=\"servicetask1\" targetRef=\"endevent1\"/>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_io.point.ActiveDirectory_provider\">\n    <bpmndi:BPMNPlane bpmnElement=\"io.point.ActiveDirectory_provider\" id=\"BPMNPlane_io.point.ActiveDirectory_provider\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"70.0\" y=\"164.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task2\" id=\"BPMNShape_task2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"280.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"740.0\" y=\"164.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"exclusivegateway1\" id=\"BPMNShape_exclusivegateway1\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"150.0\" y=\"161.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"370.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"440.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"servicetask1\" id=\"BPMNShape_servicetask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"80.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"105.0\" y=\"181.0\"/>\n        <omgdi:waypoint x=\"150.0\" y=\"181.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow13\" id=\"BPMNEdge_flow13\">\n        <omgdi:waypoint x=\"170.0\" y=\"201.0\"/>\n        <omgdi:waypoint x=\"169.0\" y=\"307.0\"/>\n        <omgdi:waypoint x=\"330.0\" y=\"307.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"13.0\" width=\"53.0\" x=\"180.0\" y=\"289.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow18\" id=\"BPMNEdge_flow18\">\n        <omgdi:waypoint x=\"435.0\" y=\"307.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"307.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"199.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"default\" id=\"BPMNEdge_default\">\n        <omgdi:waypoint x=\"190.0\" y=\"181.0\"/>\n        <omgdi:waypoint x=\"740.0\" y=\"181.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"13.0\" width=\"63.0\" x=\"209.0\" y=\"164.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow20\" id=\"BPMNEdge_flow20\">\n        <omgdi:waypoint x=\"170.0\" y=\"161.0\"/>\n        <omgdi:waypoint x=\"170.0\" y=\"107.0\"/>\n        <omgdi:waypoint x=\"330.0\" y=\"107.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"13.0\" width=\"23.0\" x=\"179.0\" y=\"95.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow21\" id=\"BPMNEdge_flow21\">\n        <omgdi:waypoint x=\"435.0\" y=\"107.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"107.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"164.0\"/>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>"}},{"PROCESSTYPE":{"id":"io.point.ActiveDirectory_provider:2:78","name":"io.point.ActiveDirectory_provider","key":"io.point.ActiveDirectory_provider","category":"http://www.activiti.org/test","description":null,"resourceName":"bpmn","deploymentId":"75","version":2,"hasStartForm":false,"isSuspended":false,"tenantId":"io.point.tpanagos","BPMNXML":"<definitions typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\" xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\">\n  <process id=\"io.point.ActiveDirectory_provider\" name=\"io.point.ActiveDirectory_provider\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"/>\n    <serviceTask id=\"task2\" name=\"List Records\" activiti:class=\"plugins.fact_components.api_AD_List_Recs\">\n      <extensionElements>\n        <activiti:field name=\"objTypeId\">\n          <activiti:expression>${objTypeId}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"serverURL\">\n          <activiti:expression>${serverURL}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"exclusivegateway1\"/>\n    <endEvent id=\"endevent1\" name=\"End\"/>\n    <exclusiveGateway id=\"exclusivegateway1\" name=\"Exclusive Gateway\" default=\"default\"/>\n    <sequenceFlow id=\"flow13\" name=\"GETRECS\" sourceRef=\"exclusivegateway1\" targetRef=\"task2\">\n      <conditionExpression xsi:type=\"tFormalExpression\">${apidata_method == &quot;GETRECS&quot;}</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"flow18\" sourceRef=\"task2\" targetRef=\"endevent1\"/>\n    <sequenceFlow id=\"default\" name=\"Unsupported\" sourceRef=\"exclusivegateway1\" targetRef=\"endevent1\"/>\n    <userTask id=\"usertask1\" name=\"Default\" activiti:formKey=\"poi_default_view\"/>\n    <userTask id=\"usertask2\" name=\"User Profile\" activiti:formKey=\"poi_profile_view\"/>\n    <serviceTask id=\"servicetask1\" name=\"Read Record\" activiti:class=\"plugins.fact_components.api_AD_Read_Obj_toFields\">\n      <extensionElements>\n        <activiti:field name=\"objTypeId\">\n          <activiti:expression>${objTypeId}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"objId\">\n          <activiti:expression>${objId}</activiti:expression>\n        </activiti:field>\n        <activiti:field name=\"serverURL\">\n          <activiti:expression>${serverURL}</activiti:expression>\n        </activiti:field>\n      </extensionElements>\n    </serviceTask>\n    <sequenceFlow id=\"flow20\" name=\"GET\" sourceRef=\"exclusivegateway1\" targetRef=\"servicetask1\">\n      <conditionExpression xsi:type=\"tFormalExpression\">${apidata_method == &quot;GET&quot;}</conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"flow21\" sourceRef=\"servicetask1\" targetRef=\"endevent1\"/>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_io.point.ActiveDirectory_provider\">\n    <bpmndi:BPMNPlane bpmnElement=\"io.point.ActiveDirectory_provider\" id=\"BPMNPlane_io.point.ActiveDirectory_provider\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"70.0\" y=\"164.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task2\" id=\"BPMNShape_task2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"280.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"740.0\" y=\"164.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"exclusivegateway1\" id=\"BPMNShape_exclusivegateway1\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"150.0\" y=\"161.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"370.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"440.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"servicetask1\" id=\"BPMNShape_servicetask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"330.0\" y=\"80.0\"/>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"105.0\" y=\"181.0\"/>\n        <omgdi:waypoint x=\"150.0\" y=\"181.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow13\" id=\"BPMNEdge_flow13\">\n        <omgdi:waypoint x=\"170.0\" y=\"201.0\"/>\n        <omgdi:waypoint x=\"169.0\" y=\"307.0\"/>\n        <omgdi:waypoint x=\"330.0\" y=\"307.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"13.0\" width=\"53.0\" x=\"180.0\" y=\"289.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow18\" id=\"BPMNEdge_flow18\">\n        <omgdi:waypoint x=\"435.0\" y=\"307.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"307.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"199.0\"/>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"default\" id=\"BPMNEdge_default\">\n        <omgdi:waypoint x=\"190.0\" y=\"181.0\"/>\n        <omgdi:waypoint x=\"740.0\" y=\"181.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"13.0\" width=\"63.0\" x=\"209.0\" y=\"164.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow20\" id=\"BPMNEdge_flow20\">\n        <omgdi:waypoint x=\"170.0\" y=\"161.0\"/>\n        <omgdi:waypoint x=\"170.0\" y=\"107.0\"/>\n        <omgdi:waypoint x=\"330.0\" y=\"107.0\"/>\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds height=\"13.0\" width=\"23.0\" x=\"179.0\" y=\"95.0\"/>\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow21\" id=\"BPMNEdge_flow21\">\n        <omgdi:waypoint x=\"435.0\" y=\"107.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"107.0\"/>\n        <omgdi:waypoint x=\"757.0\" y=\"164.0\"/>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>"}}],"forms":[{"_id":{"$oid":"566dbeca1a30ff811993174b"},"id":"566dbeca1a30ff811993174b","owner":{},"recType":"app","name":"Submit or Cancel","desc":"Recently Converted Form Record","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032842478,"createDate":{"$date":1450032842478},"origin":{"id":"56435b561d0000d0029ad0ab","name":"Submit or Cancel","desc":"Recently Converted Form Record","creatorId":"tpanagos@point.io","createDate":1450032842463,"checksum":"1C468F0AFF8AB724034F71E17F74BDC631F6753ADE892AA96B4ABC7A75EB13F2L3189"},"data":{"form":"    <script>\n        //Add Extensions to the IndexController Behavior Here with the Controller.reopen method.//\n        window.App.IndexController.reopen({\n            messageBlock: \"\",\n            isHistoryOpen: false,\n            messageHistory: function(mystage, questionIdx) {\n                var history = this.get(\"model.HISTORY\");\n                var myMsgBlock = this.get(\"messageBlock\") + '<ul>';\n                history.forEach( function(item) {\n                    myMsgBlock = myMsgBlock + '<li>Task#&nbsp;' + item.ID + '&nbsp;&nbsp;' + item.LABEL + ':&nbsp;' + item.DESCRIPTION + '&nbsp;Status&nbsp;' + item.STATUS + '</li>';\n                });\n                myMsgBlock = myMsgBlock + '</ul>';\n\n                this.set(\"messageBlock\", myMsgBlock);\n                var d = $('.history-content');\n                d.scrollTop(d.prop(\"scrollHeight\"));\n                return myMsgBlock;\n            }.property(\"model.HISTORY\"),\n            actions: {\n                // submitAction: function(source) {\n                //       this.get('controller.relatedsViewInstance').send('submitAction', source);\n                //       $('#emberForm').submit();\n                //   },\n                cancelAction: function() {\n                    $('[name=optionid]').val('reject');\n                    this.set(\"isSubmitting\", true );\n                    // here you could perform your actions like persisting to the server or so\n                    $('#emberForm').submit();\n                },\n                toggleHistory: function () {\n                    console.log(\"Current State: \" + this.get(\"isHistoryOpen\"));\n                    var historyState = this.get(\"isHistoryOpen\");\n                    if (historyState) {\n                        $('#openIcon').removeClass('glyphicon-expand').addClass('glyphicon-collapse-down');\n                    } else {\n                        $('#openIcon').removeClass('glyphicon-collapse-down').addClass('glyphicon-expand');\n                    }\n                    this.set(\"isHistoryOpen\", !historyState);\n                }\n            }\n        });\n    </script>\n    <script type=\"text/x-handlebars\" data-template-name=\"index\">\n        <div class=\"container\" class=\"form-horizontal\">\n            <div id=\"content panel-group\" id=\"accordion\">\n                <div style=\"padding: 10px;\">\n                    <div class=\"panel panel-default\">\n                        <div class=\"panel-heading\">\n                            <h3 class=\"panel-title\">Confirm</h3>\n                        </div>\n                    </div>\n                    <div align=\"center\">\n                        <button id=\"approve\" class=\"btn btn-success\" {{action 'submitAction' target=\"controller\"}}>Submit</button>\n                        <button id=\"reject\" class=\"btn btn-danger\" {{action 'cancelAction' target=\"controller\"}}>Cancel</button>\n                    </div>\n                </div>\n            </div> <!-- content -->\n        </div> <!-- container -->\n        {{input type=\"hidden\" name=\"optionid\"}}\n    </script>\n\n"},"checksum":"1C468F0AFF8AB724034F71E17F74BDC631F6753ADE892AA96B4ABC7A75EB13F2L3189"},{"_id":{"$oid":"566dbeca1a30ff811993174b"},"id":"566dbeca1a30ff811993174b","owner":{},"recType":"app","name":"Submit or Cancel","desc":"Recently Converted Form Record","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032842478,"createDate":{"$date":1450032842478},"origin":{"id":"56435b561d0000d0029ad0ab","name":"Submit or Cancel","desc":"Recently Converted Form Record","creatorId":"tpanagos@point.io","createDate":1450032842463,"checksum":"1C468F0AFF8AB724034F71E17F74BDC631F6753ADE892AA96B4ABC7A75EB13F2L3189"},"data":{"form":"    <script>\n        //Add Extensions to the IndexController Behavior Here with the Controller.reopen method.//\n        window.App.IndexController.reopen({\n            messageBlock: \"\",\n            isHistoryOpen: false,\n            messageHistory: function(mystage, questionIdx) {\n                var history = this.get(\"model.HISTORY\");\n                var myMsgBlock = this.get(\"messageBlock\") + '<ul>';\n                history.forEach( function(item) {\n                    myMsgBlock = myMsgBlock + '<li>Task#&nbsp;' + item.ID + '&nbsp;&nbsp;' + item.LABEL + ':&nbsp;' + item.DESCRIPTION + '&nbsp;Status&nbsp;' + item.STATUS + '</li>';\n                });\n                myMsgBlock = myMsgBlock + '</ul>';\n\n                this.set(\"messageBlock\", myMsgBlock);\n                var d = $('.history-content');\n                d.scrollTop(d.prop(\"scrollHeight\"));\n                return myMsgBlock;\n            }.property(\"model.HISTORY\"),\n            actions: {\n                // submitAction: function(source) {\n                //       this.get('controller.relatedsViewInstance').send('submitAction', source);\n                //       $('#emberForm').submit();\n                //   },\n                cancelAction: function() {\n                    $('[name=optionid]').val('reject');\n                    this.set(\"isSubmitting\", true );\n                    // here you could perform your actions like persisting to the server or so\n                    $('#emberForm').submit();\n                },\n                toggleHistory: function () {\n                    console.log(\"Current State: \" + this.get(\"isHistoryOpen\"));\n                    var historyState = this.get(\"isHistoryOpen\");\n                    if (historyState) {\n                        $('#openIcon').removeClass('glyphicon-expand').addClass('glyphicon-collapse-down');\n                    } else {\n                        $('#openIcon').removeClass('glyphicon-collapse-down').addClass('glyphicon-expand');\n                    }\n                    this.set(\"isHistoryOpen\", !historyState);\n                }\n            }\n        });\n    </script>\n    <script type=\"text/x-handlebars\" data-template-name=\"index\">\n        <div class=\"container\" class=\"form-horizontal\">\n            <div id=\"content panel-group\" id=\"accordion\">\n                <div style=\"padding: 10px;\">\n                    <div class=\"panel panel-default\">\n                        <div class=\"panel-heading\">\n                            <h3 class=\"panel-title\">Confirm</h3>\n                        </div>\n                    </div>\n                    <div align=\"center\">\n                        <button id=\"approve\" class=\"btn btn-success\" {{action 'submitAction' target=\"controller\"}}>Submit</button>\n                        <button id=\"reject\" class=\"btn btn-danger\" {{action 'cancelAction' target=\"controller\"}}>Cancel</button>\n                    </div>\n                </div>\n            </div> <!-- content -->\n        </div> <!-- container -->\n        {{input type=\"hidden\" name=\"optionid\"}}\n    </script>\n\n"},"checksum":"1C468F0AFF8AB724034F71E17F74BDC631F6753ADE892AA96B4ABC7A75EB13F2L3189"},{"_id":{"$oid":"566dbecb1a30fffa19931751"},"id":"566dbecb1a30fffa19931751","owner":{},"recType":"app","name":"APIdoc share and folder nav","desc":"apidoc default view - handles both Shares & Content object types","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032843881,"createDate":{"$date":1450032843881},"origin":{"id":"5665fa78330000c701db5e45","name":"APIdoc share and folder nav","desc":"apidoc default view - handles both Shares & Content object types","creatorId":"tpanagos@point.io","createDate":1450032843881,"checksum":"668C5BF5E49079061A3D13BA9511B9D5BA9C01A0D9BC56A71EA88F360885497FL23011"},"data":{"form":"<script type=\"text/javascript\">\n    var baseURL = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n\n    App.FileController = Ember.Controller.extend({\n        init: function () {\n            console.log(\"fileinit\");\n            // if we are doing a content view then skip the shareList view\n            if (this.get(\"params.objTypeId\") === \"Content\") {\n                this.set(\"showShareList\", false);\n                this.set(\"contentOnly\", true);\n                var params = this.get(\"params\");\n                this.send(\"openShare\", params.sharename, params.sharetype, params.objId, params.path, params.containerid);\n            }\n        },\n        queryParams: {path: \"\", containerid: \"\"},\n        containerid: null,\n        path: null,\n        showShareList: true,\n        contentOnly: false,\n        bPopUp: null,\n        isFileListEmpty: true,\n        dataArray: function () {\n            var dA = Ember.A();\n            var raw = this.get(\"model\");\n            for (var i in raw) {\n                dA.pushObject(raw[i]);\n            }\n            return dA\n        }.property(\"model\"),\n        filelist: Ember.A(),\n        folderlist: Ember.A(),\n        folderstack: Ember.A(),\n        shares: function () {\n            return this.get(\"dataArray\");\n        }.property(\"dataArray\"),\n        newFolderName: \"\",\n        headers: {\n            Authorization: sessionKey\n        },\n        uploadURL: function () {\n            return baseURL + '/apidoc/files/upload/' + this.get('folderlist.shareid');\n        }.property('folderList.shareid'),\n        uploadFile: null,\n        isLoading: false,\n        isRoot: function() {\n            return (this.get(\"folderlist\").queryParams.path == \"\")\n        }.property(\"folderlist.queryParams.path\"),\n        actions: {\n            submitAction: function () {\n                this.set('isLoading', true);\n                var self = this;\n                // We really want to inject RELATEDS\n                var injectableFiles = [];\n                this.get(\"filelist\").forEach(function (file) {\n                    injectableFiles.pushObject({\n                        \"ID\": file.link,\n                        \"LABEL\": file.name,\n                        \"TOOLTIP\": \"file.label\",\n                        \"TYPE\": \"PIO\",\n                        \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=\" + file.link\n                    });\n                });\n                var injectableFacts = {\n                    'REQUEST': {\n                        'INPUT': {\n                            'RELATEDS': injectableFiles,\n                            'FIELDS': [],\n                            'FACTS': []\n                        }\n                    }\n                };\n                Ember.$.ajax({\n                    type: \"PUT\",\n                    async: true,\n                    url: baseURL + '/messages/injectListJSON/' + taskid + '?Authorization=' + sessionKey,\n                    data: JSON.stringify(injectableFacts),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    success: function (data) {\n                        self.set('isLoading', false);\n                        //$('#emberForm').submit();\n                    }\n                });\n                return true; //this bubbles the action up\n            },\n            addFile: function (share) {\n                this.set('isLoading', true);\n                var self = this;\n                //create a link\n                var linkURL = \"\";\n                //v3\n                var servercall = baseURL + \"/apidoc/links/create/\" + share.shareid + \"?Authorization=\" + sessionKey;\n                $.ajax({\n                    type: \"POST\",\n                    async: false,\n                    data: {\n                        'containerid': share.containerid,\n                        'path': share.path,\n                        'fileid': share.fileid,\n                        'filename': share.name\n                    },\n                    url: servercall,\n                    success: function (data) {\n                        linkURL = data.RESPONSE.linkid;\n                        self.set('isLoading', false);\n                    }\n                });\n                //add it to the list\n                var fileArray = this.get(\"filelist\");\n                fileArray.pushObject({name: share.name, link: linkURL, label: share.name});\n                this.set(\"isFileListEmpty\", false);\n            },\n            removeFile: function (id) {\n                var fileList = this.get('filelist');\n                fileList.removeObject(id);\n                if (fileList.length == 0)\n                    this.set(\"isFileListEmpty\", true);\n            },\n            createFolderClick: function (shareid, containerid, path, modalId) {\n                var self = this;\n                this.set('isLoading', true);\n                var servercall = baseURL + \"/apidoc/folders/create/\" + shareid\n                $.ajax({\n                    type: \"POST\",\n                    async: false,\n                    data: {'containerid': containerid, 'path': path, 'foldername': this.get('newFolderName')},\n                    url: servercall,\n                    headers: {\n                        Authorization: sessionKey\n                    },\n                    cache: false,\n                    success: function (data) {\n                        self.send('modalFinished', modalId);\n                    }\n                });\n            },\n            modalFinished: function (modalId) {\n                $('#'+modalId).modal(\"hide\");\n                var thisFolder = this.get(\"folderlist\");\n                this.send('openShare', thisFolder.sharename, thisFolder.sharetype, thisFolder.shareid, thisFolder.queryParams.path, thisFolder.queryParams.containerid);\n                this.send('setLoading', false);\n            },\n            returnToSites: function() {\n                this.set('showShareList', true);\n            },\n            navigateToParent: function () {\n                if (this.get('folderstack').length == 0) {\n                    if (!this.get('contentOnly'))\n                    {\n                        this.send('returnToSites');\n                    }\n                }\n                else {\n                    var current = this.get('folderstack').pop();\n                    this.set('folderlist', current);\n                }\n            },\n            setLoading: function(state) {\n                this.set('isLoading', state);\n            },\n            openShare: function (sharename, sharetype, shareid, path, containerid) {\n                var self = this;\n                if (typeof containerid != 'undefined')\n                    self.set('containerid', containerid);\n                else\n                    self.set('containerid', \"\");\n                if (typeof path != 'undefined')\n                    self.set('path', path);\n                else\n                    self.set('path', \"\");\n                var queryParams = {path: self.get('path'), containerid: self.get('containerid')};\n                Ember.$.ajax({\n                    async: false,\n                    url: baseURL + '/apidoc/folders/list/' + shareid,\n                    data: queryParams,\n                    headers: {\n                        Authorization: sessionKey\n                    },\n                    success: function (data) {\n                        var sharesList = Ember.A();\n                        (data.RESPONSE.RESULT.forEach(function (share) {\n                            share.isDir = (share.type === 'DIR');\n                            var params = [];\n                            if (share.path) {\n                                params.push('path=' + encodeURIComponent(share.path))\n                            }\n                            if (share.containerid) {\n                                params.push('containerid=' + encodeURIComponent(share.containerid))\n                            }\n                            if (share.fileid) {\n                                params.push('fileid=' + encodeURIComponent(share.fileid))\n                            }\n                            if (share.name) {\n                                params.push('filename=' + encodeURIComponent(share.name))\n                            }\n                            params.push('asBinary=true');\n\n                            share.downloadURL = baseURL + '/apidoc/files/download/' + share.shareid + '?Authorization=' + sessionKey + '&' + params.join(\"&\")\n\n                            sharesList.pushObject(share);\n                        }));\n                        if (self.get('folderlist.shareid') && (containerid) && (self.get('folderlist.queryParams.containerid') != containerid)) {\n                            // Push the previous folder if there IS a previous folder & if this is NOT the top folder & we aren't just refreshing the current folder\n                            self.get('folderstack').push({\n                                shares: self.get('folderlist.shares'),\n                                shareid: self.get('folderlist.shareid'),\n                                sharename: self.get('folderlist.sharename'),\n                                sharetype: self.get('folderlist.sharetype'),\n                                queryParams: self.get('folderlist.queryParams')\n                            });\n                            //console.log(containerid + \" Push & length is now: \" + self.get('folderstack').length);\n                        }\n                        // Set the current folder\n                        self.set('folderlist.shares', sharesList);\n                        self.set('folderlist.shareid', shareid);\n                        self.set('folderlist.sharename', sharename);\n                        self.set('folderlist.sharetype', sharetype);\n                        self.set('folderlist.queryParams', queryParams);\n                    }\n                });\n                this.set('showShareList', false);\n            }\n        }\n    });\n\n    App.CreateFolderRoute = Ember.Route.extend({\n        model: function (params, options) {\n            var model = {};\n            model.shareid = params.shareid\n            model.containerid = options.queryParams.containerid\n            model.path = options.queryParams.path\n            model.sessionKey = sessionKey\n            model.url = document.URL\n            model.baseURL = baseURL\n            return model;\n        }\n    });\n    App.UploadFileRoute = Ember.Route.extend({\n        model: function (params, options) {\n            var model = {};\n            model.shareid = params.shareid\n            model.containerid = options.queryParams.containerid\n            model.path = options.queryParams.path\n            model.sessionKey = sessionKey\n            model.url = document.URL\n            model.baseURL = baseURL\n            return model;\n        }\n    });\n    App.FileUploadComponent = EmberUploader.FileField.extend({\n        multiple: true,\n        url: '',\n        filesDidChange: function (files) {\n            var self = this;\n            var uploadUrl = this.get('url');\n\n            var uploader = EmberUploader.Uploader.create({\n                url: uploadUrl,\n                paramName: 'uploadfile'\n            });\n            uploader.on('didUpload', function (e) {\n                self.sendAction('action', self.get('actionParams'));\n            });\n            if (!Ember.isEmpty(files)) {\n                this.sendAction('startAction', true);\n                uploader.uploadSerial(files, this.get('params'), this.get('headers'));\n            }\n        }\n    });\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"file\">\n\n    <div class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\">\n        <div class=\"panel-heading\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseA\">Attach Related Files</a>\n            </h4>\n        </div>\n        <div id=\"collapseA\" class=\"panel-collapse collapse in\">\n            <div class=\"container-fluid\">\n                <div id=\"content panel-group\" id=\"accordion\">\n                    <div style=\"padding: 10px;\">\n                        <div class=\"panel panel-default\">\n                            <div id='bod' class=\"panel-body\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-9\">\n                                        {{#if controller.showShareList}}\n                                        <div id=\"sharelist\" class=\"row-fluid\">\n                                            {{partial \"sharelist\"}}\n                                        </div>\n                                        {{/if}}\n                                        {{#unless controller.showShareList}}\n                                        <div id=\"folderlist\" class=\"row-fluid\">\n                                            {{partial \"_folderlist\"}}\n                                        </div>\n                                        {{/unless}}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div align=\"center\" style={{unless controller.isLoading \"display:none;\"}}>\n                <img src=\"/assets/images/throbber.gif\"/>\n            </div>\n            {{#unless controller.isFileListEmpty}}\n            <div id=\"content panel-group\" id=\"accordion\">\n                <div style=\"padding: 10px;\">\n                    <div class=\"panel panel-default\">\n                        <div class=\"panel-heading\">\n                            <h3 class=\"panel-title\">Attached Files</h3>\n                        </div>\n                        <div id='bod' class=\"panel-body\">\n                            <div class=\"row\">\n                                <div class=\"col-xs-12 col-sm-4 col-md-4\"><label>File Name</label></div>\n                                <div class=\"hidden-xs col-sm-6 col-md-6\"><label>File Label</label></div>\n                            </div>\n                            {{#each file in controller.filelist}}\n                            <div class=\"row\">\n                                <div class=\"col-xs-12 col-sm-4 col-md-4\"><p class=\"form-control-static\">{{file.name}}</p></div>\n                                <div class=\"col-xs-12 col-sm-6 col-md-6\">{{input type=\"text\" class=\"form-control\"\n                                    value=file.label}}\n                                </div>\n                                <div class=\"hidden-xs col-sm-2 col-md-2\">\n                                    <button class=\"btn btn-danger btn-sm\" {{action\n                                    \"removeFile\" file}}>Remove&nbsp;<span\n                                        class=\"glyphicon glyphicon-trash\"></span></button>\n                                </div>\n                            </div>\n                            {{/each}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            {{/unless}}\n        </div>\n    </div>\n    </div>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_sharelist\">\n    <table class=\"table table-bordered table-striped table-condensed col-md-10\">\n        <thead>\n        <tr style=\"word-break:break-word\">\n            <th>Name</th>\n            <th>Site Type</th>\n        </tr>\n        </thead>\n        <tbody>\n        {{#each share in controller.shares}}\n        <tr style=\"word-break:break-word\">\n            <td><a {{action \"openShare\" share.share.name share.share.type share.share.id share.share.path share.share.containerid}}>{{share.share.name}}</a></td>\n            <td>{{share.share.type}}</td>\n        </tr>\n        {{/each}}\n        </tbody>\n    </table>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_createFolder\">\n    <div class=\"modal fade\" id=\"button-modal-create\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <form id=\"createfolderform\" class=\"form-horizontal\" enctype=\"application/x-www-form-urlencoded\" method=\"post\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                        <h4 class=\"modal-title\" id=\"myModalLabel\">New Folder</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <div class=\"form-group\">\n                            {{input id=\"createfolder\" name=\"foldername\" class=\"form-control\" type=\"text\" value=controller.newFolderName}}\n                            <button class=\"btn btn-default\" type=\"submit\" {{action \"createFolderClick\" folderlist.shareid containerid path \"button-modal-create\"}}>Create</button>\n                        </div>\n                        <div align=\"center\" style={{unless controller.isLoading \"display:none;\"}}>\n                        <img src=\"/assets/images/throbber.gif\"/>\n                    </div>\n            </div>\n            </form>\n        </div>\n    </div>\n    </div>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_uploadFile\">\n    <div class=\"modal fade\" id=\"button-modal-upload\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <form id=\"fileuploadform\" class=\"form-horizontal\" enctype=\"multipart/form-data\" method=\"post\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                        <h4 class=\"modal-title\" id=\"myModalLabel\">File Upload</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <div class=\"form-group\">\n                            {{file-upload class=\"form-control\" url=controller.uploadURL\n                            params=controller.folderlist.queryParams\n                            headers=controller.headers action='modalFinished'\n                            actionParams=\"button-modal-upload\" startAction='setLoading'}}\n                        </div>\n                        <div align=\"center\" style={{unless controller.isLoading \"display:none;\"}}>\n                        <img src=\"/assets/images/throbber.gif\"/>\n                    </div>\n            </div>\n            </form>\n        </div>\n    </div>\n    </div>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_folderlist\">\n    <div class=\"panel-heading\">\n        <h2 class=\"panel-title\">{{controller.folderlist.sharename}}<span style=\"float:right;\"><em>{{controller.folderlist.sharetype}}</em></span></h2>\n    </div>\n    <div id=\"browseOnly\">\n        <!--<button type=\"button\" class=\"btn btn-default {{if controller.isRoot 'disabled'}}\" {{action \"navigateToParent\" controller.folderlist.shareid}}>-->\n        <!--<span class=\"glyphicon glyphicon-level-up\"></span> &nbsp;Back to Parent-->\n        <!--</button>-->\n        {{partial 'uploadFile'}}\n        {{partial 'createFolder'}}\n    </div>\n    <table class=\"table table-bordered table-striped col-md-12\">\n        <thead>\n        <tr style=\"word-break:break-word\">\n            {{#if controller.contentOnly}}\n            <th><a {{action \"navigateToParent\" controller.folderlist.shareid}}>/{{controller.folderlist.queryParams.path}}</a></th>\n            {{else}}\n            <th><a {{action \"returnToSites\"}}>Home</a> <a {{action \"navigateToParent\" controller.folderlist.shareid}}>/{{controller.folderlist.queryParams.path}}</a></th>\n            {{/if}}\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        {{#each controller.folderlist.shares as |share|}}\n        <tr style=\"word-break:break-word\">\n            <td>\n                {{#if share.isDir}}\n                <a {{action \"openShare\" controller.folderlist.sharename controller.folderlist.sharetype share.shareid share.path share.containerid}}>\n                <span class=\"glyphicon glyphicon-folder-open\"></span> &nbsp;\n                {{share.name}}\n                </a>\n                {{/if}}\n                {{#unless share.isDir}}\n                <a href=\"{{share.downloadURL}}\">\n                    <span class=\"glyphicon glyphicon-file\" style=\"color: silver;\"></span> &nbsp;\n                    {{share.name}}\n                </a>\n                {{/unless}}\n            </td>\n            <td align=\"center\">\n                {{#unless share.isDir}}\n                <!--<a class=\"btn btn-default\" href=\"{{share.downloadURL}}\">-->\n                <!--<span class=\"glyphicon glyphicon-download\"></span> &nbsp; Download-->\n                <!--</a>-->\n                <button class=\"btn btn-success\" {{action\n                \"addFile\" share}}>\n                <span class=\"glyphicon glyphicon-paperclip\"></span> &nbsp; Attach File\n                </button>\n                {{/unless}}\n            </td>\n        </tr>\n        {{/each}}\n        </tbody>\n        <tfoot>\n        <tr>\n            <td colspan=\"2\">\n                <a data-insertid=\"1\" class=\"btn btn-success\" data-toggle=\"modal\" data-target=\"#button-modal-upload\">Upload Files</a>\n                <a data-insertid=\"1\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#button-modal-create\">Create Folder</a>\n            </td>\n        </tr>\n        </tfoot>\n    </table>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"light-box\">\n    {{#if inlineImage}}<img src=\"{{unbound href}}\" title=\"{{unbound data-title}}\" class=\"{{unbound data-class}}\"/>{{/if}}{{yield}}\n</script>","facts":{}},"checksum":"668C5BF5E49079061A3D13BA9511B9D5BA9C01A0D9BC56A71EA88F360885497FL23011"},{"_id":{"$oid":"566dbecb1a30fffa19931751"},"id":"566dbecb1a30fffa19931751","owner":{},"recType":"app","name":"APIdoc share and folder nav","desc":"apidoc default view - handles both Shares & Content object types","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032843881,"createDate":{"$date":1450032843881},"origin":{"id":"5665fa78330000c701db5e45","name":"APIdoc share and folder nav","desc":"apidoc default view - handles both Shares & Content object types","creatorId":"tpanagos@point.io","createDate":1450032843881,"checksum":"668C5BF5E49079061A3D13BA9511B9D5BA9C01A0D9BC56A71EA88F360885497FL23011"},"data":{"form":"<script type=\"text/javascript\">\n    var baseURL = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n\n    App.FileController = Ember.Controller.extend({\n        init: function () {\n            console.log(\"fileinit\");\n            // if we are doing a content view then skip the shareList view\n            if (this.get(\"params.objTypeId\") === \"Content\") {\n                this.set(\"showShareList\", false);\n                this.set(\"contentOnly\", true);\n                var params = this.get(\"params\");\n                this.send(\"openShare\", params.sharename, params.sharetype, params.objId, params.path, params.containerid);\n            }\n        },\n        queryParams: {path: \"\", containerid: \"\"},\n        containerid: null,\n        path: null,\n        showShareList: true,\n        contentOnly: false,\n        bPopUp: null,\n        isFileListEmpty: true,\n        dataArray: function () {\n            var dA = Ember.A();\n            var raw = this.get(\"model\");\n            for (var i in raw) {\n                dA.pushObject(raw[i]);\n            }\n            return dA\n        }.property(\"model\"),\n        filelist: Ember.A(),\n        folderlist: Ember.A(),\n        folderstack: Ember.A(),\n        shares: function () {\n            return this.get(\"dataArray\");\n        }.property(\"dataArray\"),\n        newFolderName: \"\",\n        headers: {\n            Authorization: sessionKey\n        },\n        uploadURL: function () {\n            return baseURL + '/apidoc/files/upload/' + this.get('folderlist.shareid');\n        }.property('folderList.shareid'),\n        uploadFile: null,\n        isLoading: false,\n        isRoot: function() {\n            return (this.get(\"folderlist\").queryParams.path == \"\")\n        }.property(\"folderlist.queryParams.path\"),\n        actions: {\n            submitAction: function () {\n                this.set('isLoading', true);\n                var self = this;\n                // We really want to inject RELATEDS\n                var injectableFiles = [];\n                this.get(\"filelist\").forEach(function (file) {\n                    injectableFiles.pushObject({\n                        \"ID\": file.link,\n                        \"LABEL\": file.name,\n                        \"TOOLTIP\": \"file.label\",\n                        \"TYPE\": \"PIO\",\n                        \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=\" + file.link\n                    });\n                });\n                var injectableFacts = {\n                    'REQUEST': {\n                        'INPUT': {\n                            'RELATEDS': injectableFiles,\n                            'FIELDS': [],\n                            'FACTS': []\n                        }\n                    }\n                };\n                Ember.$.ajax({\n                    type: \"PUT\",\n                    async: true,\n                    url: baseURL + '/messages/injectListJSON/' + taskid + '?Authorization=' + sessionKey,\n                    data: JSON.stringify(injectableFacts),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    success: function (data) {\n                        self.set('isLoading', false);\n                        //$('#emberForm').submit();\n                    }\n                });\n                return true; //this bubbles the action up\n            },\n            addFile: function (share) {\n                this.set('isLoading', true);\n                var self = this;\n                //create a link\n                var linkURL = \"\";\n                //v3\n                var servercall = baseURL + \"/apidoc/links/create/\" + share.shareid + \"?Authorization=\" + sessionKey;\n                $.ajax({\n                    type: \"POST\",\n                    async: false,\n                    data: {\n                        'containerid': share.containerid,\n                        'path': share.path,\n                        'fileid': share.fileid,\n                        'filename': share.name\n                    },\n                    url: servercall,\n                    success: function (data) {\n                        linkURL = data.RESPONSE.linkid;\n                        self.set('isLoading', false);\n                    }\n                });\n                //add it to the list\n                var fileArray = this.get(\"filelist\");\n                fileArray.pushObject({name: share.name, link: linkURL, label: share.name});\n                this.set(\"isFileListEmpty\", false);\n            },\n            removeFile: function (id) {\n                var fileList = this.get('filelist');\n                fileList.removeObject(id);\n                if (fileList.length == 0)\n                    this.set(\"isFileListEmpty\", true);\n            },\n            createFolderClick: function (shareid, containerid, path, modalId) {\n                var self = this;\n                this.set('isLoading', true);\n                var servercall = baseURL + \"/apidoc/folders/create/\" + shareid\n                $.ajax({\n                    type: \"POST\",\n                    async: false,\n                    data: {'containerid': containerid, 'path': path, 'foldername': this.get('newFolderName')},\n                    url: servercall,\n                    headers: {\n                        Authorization: sessionKey\n                    },\n                    cache: false,\n                    success: function (data) {\n                        self.send('modalFinished', modalId);\n                    }\n                });\n            },\n            modalFinished: function (modalId) {\n                $('#'+modalId).modal(\"hide\");\n                var thisFolder = this.get(\"folderlist\");\n                this.send('openShare', thisFolder.sharename, thisFolder.sharetype, thisFolder.shareid, thisFolder.queryParams.path, thisFolder.queryParams.containerid);\n                this.send('setLoading', false);\n            },\n            returnToSites: function() {\n                this.set('showShareList', true);\n            },\n            navigateToParent: function () {\n                if (this.get('folderstack').length == 0) {\n                    if (!this.get('contentOnly'))\n                    {\n                        this.send('returnToSites');\n                    }\n                }\n                else {\n                    var current = this.get('folderstack').pop();\n                    this.set('folderlist', current);\n                }\n            },\n            setLoading: function(state) {\n                this.set('isLoading', state);\n            },\n            openShare: function (sharename, sharetype, shareid, path, containerid) {\n                var self = this;\n                if (typeof containerid != 'undefined')\n                    self.set('containerid', containerid);\n                else\n                    self.set('containerid', \"\");\n                if (typeof path != 'undefined')\n                    self.set('path', path);\n                else\n                    self.set('path', \"\");\n                var queryParams = {path: self.get('path'), containerid: self.get('containerid')};\n                Ember.$.ajax({\n                    async: false,\n                    url: baseURL + '/apidoc/folders/list/' + shareid,\n                    data: queryParams,\n                    headers: {\n                        Authorization: sessionKey\n                    },\n                    success: function (data) {\n                        var sharesList = Ember.A();\n                        (data.RESPONSE.RESULT.forEach(function (share) {\n                            share.isDir = (share.type === 'DIR');\n                            var params = [];\n                            if (share.path) {\n                                params.push('path=' + encodeURIComponent(share.path))\n                            }\n                            if (share.containerid) {\n                                params.push('containerid=' + encodeURIComponent(share.containerid))\n                            }\n                            if (share.fileid) {\n                                params.push('fileid=' + encodeURIComponent(share.fileid))\n                            }\n                            if (share.name) {\n                                params.push('filename=' + encodeURIComponent(share.name))\n                            }\n                            params.push('asBinary=true');\n\n                            share.downloadURL = baseURL + '/apidoc/files/download/' + share.shareid + '?Authorization=' + sessionKey + '&' + params.join(\"&\")\n\n                            sharesList.pushObject(share);\n                        }));\n                        if (self.get('folderlist.shareid') && (containerid) && (self.get('folderlist.queryParams.containerid') != containerid)) {\n                            // Push the previous folder if there IS a previous folder & if this is NOT the top folder & we aren't just refreshing the current folder\n                            self.get('folderstack').push({\n                                shares: self.get('folderlist.shares'),\n                                shareid: self.get('folderlist.shareid'),\n                                sharename: self.get('folderlist.sharename'),\n                                sharetype: self.get('folderlist.sharetype'),\n                                queryParams: self.get('folderlist.queryParams')\n                            });\n                            //console.log(containerid + \" Push & length is now: \" + self.get('folderstack').length);\n                        }\n                        // Set the current folder\n                        self.set('folderlist.shares', sharesList);\n                        self.set('folderlist.shareid', shareid);\n                        self.set('folderlist.sharename', sharename);\n                        self.set('folderlist.sharetype', sharetype);\n                        self.set('folderlist.queryParams', queryParams);\n                    }\n                });\n                this.set('showShareList', false);\n            }\n        }\n    });\n\n    App.CreateFolderRoute = Ember.Route.extend({\n        model: function (params, options) {\n            var model = {};\n            model.shareid = params.shareid\n            model.containerid = options.queryParams.containerid\n            model.path = options.queryParams.path\n            model.sessionKey = sessionKey\n            model.url = document.URL\n            model.baseURL = baseURL\n            return model;\n        }\n    });\n    App.UploadFileRoute = Ember.Route.extend({\n        model: function (params, options) {\n            var model = {};\n            model.shareid = params.shareid\n            model.containerid = options.queryParams.containerid\n            model.path = options.queryParams.path\n            model.sessionKey = sessionKey\n            model.url = document.URL\n            model.baseURL = baseURL\n            return model;\n        }\n    });\n    App.FileUploadComponent = EmberUploader.FileField.extend({\n        multiple: true,\n        url: '',\n        filesDidChange: function (files) {\n            var self = this;\n            var uploadUrl = this.get('url');\n\n            var uploader = EmberUploader.Uploader.create({\n                url: uploadUrl,\n                paramName: 'uploadfile'\n            });\n            uploader.on('didUpload', function (e) {\n                self.sendAction('action', self.get('actionParams'));\n            });\n            if (!Ember.isEmpty(files)) {\n                this.sendAction('startAction', true);\n                uploader.uploadSerial(files, this.get('params'), this.get('headers'));\n            }\n        }\n    });\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"file\">\n\n    <div class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\">\n        <div class=\"panel-heading\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseA\">Attach Related Files</a>\n            </h4>\n        </div>\n        <div id=\"collapseA\" class=\"panel-collapse collapse in\">\n            <div class=\"container-fluid\">\n                <div id=\"content panel-group\" id=\"accordion\">\n                    <div style=\"padding: 10px;\">\n                        <div class=\"panel panel-default\">\n                            <div id='bod' class=\"panel-body\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-9\">\n                                        {{#if controller.showShareList}}\n                                        <div id=\"sharelist\" class=\"row-fluid\">\n                                            {{partial \"sharelist\"}}\n                                        </div>\n                                        {{/if}}\n                                        {{#unless controller.showShareList}}\n                                        <div id=\"folderlist\" class=\"row-fluid\">\n                                            {{partial \"_folderlist\"}}\n                                        </div>\n                                        {{/unless}}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div align=\"center\" style={{unless controller.isLoading \"display:none;\"}}>\n                <img src=\"/assets/images/throbber.gif\"/>\n            </div>\n            {{#unless controller.isFileListEmpty}}\n            <div id=\"content panel-group\" id=\"accordion\">\n                <div style=\"padding: 10px;\">\n                    <div class=\"panel panel-default\">\n                        <div class=\"panel-heading\">\n                            <h3 class=\"panel-title\">Attached Files</h3>\n                        </div>\n                        <div id='bod' class=\"panel-body\">\n                            <div class=\"row\">\n                                <div class=\"col-xs-12 col-sm-4 col-md-4\"><label>File Name</label></div>\n                                <div class=\"hidden-xs col-sm-6 col-md-6\"><label>File Label</label></div>\n                            </div>\n                            {{#each file in controller.filelist}}\n                            <div class=\"row\">\n                                <div class=\"col-xs-12 col-sm-4 col-md-4\"><p class=\"form-control-static\">{{file.name}}</p></div>\n                                <div class=\"col-xs-12 col-sm-6 col-md-6\">{{input type=\"text\" class=\"form-control\"\n                                    value=file.label}}\n                                </div>\n                                <div class=\"hidden-xs col-sm-2 col-md-2\">\n                                    <button class=\"btn btn-danger btn-sm\" {{action\n                                    \"removeFile\" file}}>Remove&nbsp;<span\n                                        class=\"glyphicon glyphicon-trash\"></span></button>\n                                </div>\n                            </div>\n                            {{/each}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            {{/unless}}\n        </div>\n    </div>\n    </div>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_sharelist\">\n    <table class=\"table table-bordered table-striped table-condensed col-md-10\">\n        <thead>\n        <tr style=\"word-break:break-word\">\n            <th>Name</th>\n            <th>Site Type</th>\n        </tr>\n        </thead>\n        <tbody>\n        {{#each share in controller.shares}}\n        <tr style=\"word-break:break-word\">\n            <td><a {{action \"openShare\" share.share.name share.share.type share.share.id share.share.path share.share.containerid}}>{{share.share.name}}</a></td>\n            <td>{{share.share.type}}</td>\n        </tr>\n        {{/each}}\n        </tbody>\n    </table>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_createFolder\">\n    <div class=\"modal fade\" id=\"button-modal-create\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <form id=\"createfolderform\" class=\"form-horizontal\" enctype=\"application/x-www-form-urlencoded\" method=\"post\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                        <h4 class=\"modal-title\" id=\"myModalLabel\">New Folder</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <div class=\"form-group\">\n                            {{input id=\"createfolder\" name=\"foldername\" class=\"form-control\" type=\"text\" value=controller.newFolderName}}\n                            <button class=\"btn btn-default\" type=\"submit\" {{action \"createFolderClick\" folderlist.shareid containerid path \"button-modal-create\"}}>Create</button>\n                        </div>\n                        <div align=\"center\" style={{unless controller.isLoading \"display:none;\"}}>\n                        <img src=\"/assets/images/throbber.gif\"/>\n                    </div>\n            </div>\n            </form>\n        </div>\n    </div>\n    </div>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_uploadFile\">\n    <div class=\"modal fade\" id=\"button-modal-upload\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <form id=\"fileuploadform\" class=\"form-horizontal\" enctype=\"multipart/form-data\" method=\"post\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                        <h4 class=\"modal-title\" id=\"myModalLabel\">File Upload</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <div class=\"form-group\">\n                            {{file-upload class=\"form-control\" url=controller.uploadURL\n                            params=controller.folderlist.queryParams\n                            headers=controller.headers action='modalFinished'\n                            actionParams=\"button-modal-upload\" startAction='setLoading'}}\n                        </div>\n                        <div align=\"center\" style={{unless controller.isLoading \"display:none;\"}}>\n                        <img src=\"/assets/images/throbber.gif\"/>\n                    </div>\n            </div>\n            </form>\n        </div>\n    </div>\n    </div>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_folderlist\">\n    <div class=\"panel-heading\">\n        <h2 class=\"panel-title\">{{controller.folderlist.sharename}}<span style=\"float:right;\"><em>{{controller.folderlist.sharetype}}</em></span></h2>\n    </div>\n    <div id=\"browseOnly\">\n        <!--<button type=\"button\" class=\"btn btn-default {{if controller.isRoot 'disabled'}}\" {{action \"navigateToParent\" controller.folderlist.shareid}}>-->\n        <!--<span class=\"glyphicon glyphicon-level-up\"></span> &nbsp;Back to Parent-->\n        <!--</button>-->\n        {{partial 'uploadFile'}}\n        {{partial 'createFolder'}}\n    </div>\n    <table class=\"table table-bordered table-striped col-md-12\">\n        <thead>\n        <tr style=\"word-break:break-word\">\n            {{#if controller.contentOnly}}\n            <th><a {{action \"navigateToParent\" controller.folderlist.shareid}}>/{{controller.folderlist.queryParams.path}}</a></th>\n            {{else}}\n            <th><a {{action \"returnToSites\"}}>Home</a> <a {{action \"navigateToParent\" controller.folderlist.shareid}}>/{{controller.folderlist.queryParams.path}}</a></th>\n            {{/if}}\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        {{#each controller.folderlist.shares as |share|}}\n        <tr style=\"word-break:break-word\">\n            <td>\n                {{#if share.isDir}}\n                <a {{action \"openShare\" controller.folderlist.sharename controller.folderlist.sharetype share.shareid share.path share.containerid}}>\n                <span class=\"glyphicon glyphicon-folder-open\"></span> &nbsp;\n                {{share.name}}\n                </a>\n                {{/if}}\n                {{#unless share.isDir}}\n                <a href=\"{{share.downloadURL}}\">\n                    <span class=\"glyphicon glyphicon-file\" style=\"color: silver;\"></span> &nbsp;\n                    {{share.name}}\n                </a>\n                {{/unless}}\n            </td>\n            <td align=\"center\">\n                {{#unless share.isDir}}\n                <!--<a class=\"btn btn-default\" href=\"{{share.downloadURL}}\">-->\n                <!--<span class=\"glyphicon glyphicon-download\"></span> &nbsp; Download-->\n                <!--</a>-->\n                <button class=\"btn btn-success\" {{action\n                \"addFile\" share}}>\n                <span class=\"glyphicon glyphicon-paperclip\"></span> &nbsp; Attach File\n                </button>\n                {{/unless}}\n            </td>\n        </tr>\n        {{/each}}\n        </tbody>\n        <tfoot>\n        <tr>\n            <td colspan=\"2\">\n                <a data-insertid=\"1\" class=\"btn btn-success\" data-toggle=\"modal\" data-target=\"#button-modal-upload\">Upload Files</a>\n                <a data-insertid=\"1\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#button-modal-create\">Create Folder</a>\n            </td>\n        </tr>\n        </tfoot>\n    </table>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"light-box\">\n    {{#if inlineImage}}<img src=\"{{unbound href}}\" title=\"{{unbound data-title}}\" class=\"{{unbound data-class}}\"/>{{/if}}{{yield}}\n</script>","facts":{}},"checksum":"668C5BF5E49079061A3D13BA9511B9D5BA9C01A0D9BC56A71EA88F360885497FL23011"},{"_id":{"$oid":"566dbecb1a30fffa19931751"},"id":"566dbecb1a30fffa19931751","owner":{},"recType":"app","name":"APIdoc share and folder nav","desc":"apidoc default view - handles both Shares & Content object types","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032843881,"createDate":{"$date":1450032843881},"origin":{"id":"5665fa78330000c701db5e45","name":"APIdoc share and folder nav","desc":"apidoc default view - handles both Shares & Content object types","creatorId":"tpanagos@point.io","createDate":1450032843881,"checksum":"668C5BF5E49079061A3D13BA9511B9D5BA9C01A0D9BC56A71EA88F360885497FL23011"},"data":{"form":"<script type=\"text/javascript\">\n    var baseURL = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n\n    App.FileController = Ember.Controller.extend({\n        init: function () {\n            console.log(\"fileinit\");\n            // if we are doing a content view then skip the shareList view\n            if (this.get(\"params.objTypeId\") === \"Content\") {\n                this.set(\"showShareList\", false);\n                this.set(\"contentOnly\", true);\n                var params = this.get(\"params\");\n                this.send(\"openShare\", params.sharename, params.sharetype, params.objId, params.path, params.containerid);\n            }\n        },\n        queryParams: {path: \"\", containerid: \"\"},\n        containerid: null,\n        path: null,\n        showShareList: true,\n        contentOnly: false,\n        bPopUp: null,\n        isFileListEmpty: true,\n        dataArray: function () {\n            var dA = Ember.A();\n            var raw = this.get(\"model\");\n            for (var i in raw) {\n                dA.pushObject(raw[i]);\n            }\n            return dA\n        }.property(\"model\"),\n        filelist: Ember.A(),\n        folderlist: Ember.A(),\n        folderstack: Ember.A(),\n        shares: function () {\n            return this.get(\"dataArray\");\n        }.property(\"dataArray\"),\n        newFolderName: \"\",\n        headers: {\n            Authorization: sessionKey\n        },\n        uploadURL: function () {\n            return baseURL + '/apidoc/files/upload/' + this.get('folderlist.shareid');\n        }.property('folderList.shareid'),\n        uploadFile: null,\n        isLoading: false,\n        isRoot: function() {\n            return (this.get(\"folderlist\").queryParams.path == \"\")\n        }.property(\"folderlist.queryParams.path\"),\n        actions: {\n            submitAction: function () {\n                this.set('isLoading', true);\n                var self = this;\n                // We really want to inject RELATEDS\n                var injectableFiles = [];\n                this.get(\"filelist\").forEach(function (file) {\n                    injectableFiles.pushObject({\n                        \"ID\": file.link,\n                        \"LABEL\": file.name,\n                        \"TOOLTIP\": \"file.label\",\n                        \"TYPE\": \"PIO\",\n                        \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=\" + file.link\n                    });\n                });\n                var injectableFacts = {\n                    'REQUEST': {\n                        'INPUT': {\n                            'RELATEDS': injectableFiles,\n                            'FIELDS': [],\n                            'FACTS': []\n                        }\n                    }\n                };\n                Ember.$.ajax({\n                    type: \"PUT\",\n                    async: true,\n                    url: baseURL + '/messages/injectListJSON/' + taskid + '?Authorization=' + sessionKey,\n                    data: JSON.stringify(injectableFacts),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    success: function (data) {\n                        self.set('isLoading', false);\n                        //$('#emberForm').submit();\n                    }\n                });\n                return true; //this bubbles the action up\n            },\n            addFile: function (share) {\n                this.set('isLoading', true);\n                var self = this;\n                //create a link\n                var linkURL = \"\";\n                //v3\n                var servercall = baseURL + \"/apidoc/links/create/\" + share.shareid + \"?Authorization=\" + sessionKey;\n                $.ajax({\n                    type: \"POST\",\n                    async: false,\n                    data: {\n                        'containerid': share.containerid,\n                        'path': share.path,\n                        'fileid': share.fileid,\n                        'filename': share.name\n                    },\n                    url: servercall,\n                    success: function (data) {\n                        linkURL = data.RESPONSE.linkid;\n                        self.set('isLoading', false);\n                    }\n                });\n                //add it to the list\n                var fileArray = this.get(\"filelist\");\n                fileArray.pushObject({name: share.name, link: linkURL, label: share.name});\n                this.set(\"isFileListEmpty\", false);\n            },\n            removeFile: function (id) {\n                var fileList = this.get('filelist');\n                fileList.removeObject(id);\n                if (fileList.length == 0)\n                    this.set(\"isFileListEmpty\", true);\n            },\n            createFolderClick: function (shareid, containerid, path, modalId) {\n                var self = this;\n                this.set('isLoading', true);\n                var servercall = baseURL + \"/apidoc/folders/create/\" + shareid\n                $.ajax({\n                    type: \"POST\",\n                    async: false,\n                    data: {'containerid': containerid, 'path': path, 'foldername': this.get('newFolderName')},\n                    url: servercall,\n                    headers: {\n                        Authorization: sessionKey\n                    },\n                    cache: false,\n                    success: function (data) {\n                        self.send('modalFinished', modalId);\n                    }\n                });\n            },\n            modalFinished: function (modalId) {\n                $('#'+modalId).modal(\"hide\");\n                var thisFolder = this.get(\"folderlist\");\n                this.send('openShare', thisFolder.sharename, thisFolder.sharetype, thisFolder.shareid, thisFolder.queryParams.path, thisFolder.queryParams.containerid);\n                this.send('setLoading', false);\n            },\n            returnToSites: function() {\n                this.set('showShareList', true);\n            },\n            navigateToParent: function () {\n                if (this.get('folderstack').length == 0) {\n                    if (!this.get('contentOnly'))\n                    {\n                        this.send('returnToSites');\n                    }\n                }\n                else {\n                    var current = this.get('folderstack').pop();\n                    this.set('folderlist', current);\n                }\n            },\n            setLoading: function(state) {\n                this.set('isLoading', state);\n            },\n            openShare: function (sharename, sharetype, shareid, path, containerid) {\n                var self = this;\n                if (typeof containerid != 'undefined')\n                    self.set('containerid', containerid);\n                else\n                    self.set('containerid', \"\");\n                if (typeof path != 'undefined')\n                    self.set('path', path);\n                else\n                    self.set('path', \"\");\n                var queryParams = {path: self.get('path'), containerid: self.get('containerid')};\n                Ember.$.ajax({\n                    async: false,\n                    url: baseURL + '/apidoc/folders/list/' + shareid,\n                    data: queryParams,\n                    headers: {\n                        Authorization: sessionKey\n                    },\n                    success: function (data) {\n                        var sharesList = Ember.A();\n                        (data.RESPONSE.RESULT.forEach(function (share) {\n                            share.isDir = (share.type === 'DIR');\n                            var params = [];\n                            if (share.path) {\n                                params.push('path=' + encodeURIComponent(share.path))\n                            }\n                            if (share.containerid) {\n                                params.push('containerid=' + encodeURIComponent(share.containerid))\n                            }\n                            if (share.fileid) {\n                                params.push('fileid=' + encodeURIComponent(share.fileid))\n                            }\n                            if (share.name) {\n                                params.push('filename=' + encodeURIComponent(share.name))\n                            }\n                            params.push('asBinary=true');\n\n                            share.downloadURL = baseURL + '/apidoc/files/download/' + share.shareid + '?Authorization=' + sessionKey + '&' + params.join(\"&\")\n\n                            sharesList.pushObject(share);\n                        }));\n                        if (self.get('folderlist.shareid') && (containerid) && (self.get('folderlist.queryParams.containerid') != containerid)) {\n                            // Push the previous folder if there IS a previous folder & if this is NOT the top folder & we aren't just refreshing the current folder\n                            self.get('folderstack').push({\n                                shares: self.get('folderlist.shares'),\n                                shareid: self.get('folderlist.shareid'),\n                                sharename: self.get('folderlist.sharename'),\n                                sharetype: self.get('folderlist.sharetype'),\n                                queryParams: self.get('folderlist.queryParams')\n                            });\n                            //console.log(containerid + \" Push & length is now: \" + self.get('folderstack').length);\n                        }\n                        // Set the current folder\n                        self.set('folderlist.shares', sharesList);\n                        self.set('folderlist.shareid', shareid);\n                        self.set('folderlist.sharename', sharename);\n                        self.set('folderlist.sharetype', sharetype);\n                        self.set('folderlist.queryParams', queryParams);\n                    }\n                });\n                this.set('showShareList', false);\n            }\n        }\n    });\n\n    App.CreateFolderRoute = Ember.Route.extend({\n        model: function (params, options) {\n            var model = {};\n            model.shareid = params.shareid\n            model.containerid = options.queryParams.containerid\n            model.path = options.queryParams.path\n            model.sessionKey = sessionKey\n            model.url = document.URL\n            model.baseURL = baseURL\n            return model;\n        }\n    });\n    App.UploadFileRoute = Ember.Route.extend({\n        model: function (params, options) {\n            var model = {};\n            model.shareid = params.shareid\n            model.containerid = options.queryParams.containerid\n            model.path = options.queryParams.path\n            model.sessionKey = sessionKey\n            model.url = document.URL\n            model.baseURL = baseURL\n            return model;\n        }\n    });\n    App.FileUploadComponent = EmberUploader.FileField.extend({\n        multiple: true,\n        url: '',\n        filesDidChange: function (files) {\n            var self = this;\n            var uploadUrl = this.get('url');\n\n            var uploader = EmberUploader.Uploader.create({\n                url: uploadUrl,\n                paramName: 'uploadfile'\n            });\n            uploader.on('didUpload', function (e) {\n                self.sendAction('action', self.get('actionParams'));\n            });\n            if (!Ember.isEmpty(files)) {\n                this.sendAction('startAction', true);\n                uploader.uploadSerial(files, this.get('params'), this.get('headers'));\n            }\n        }\n    });\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"file\">\n\n    <div class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\">\n        <div class=\"panel-heading\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseA\">Attach Related Files</a>\n            </h4>\n        </div>\n        <div id=\"collapseA\" class=\"panel-collapse collapse in\">\n            <div class=\"container-fluid\">\n                <div id=\"content panel-group\" id=\"accordion\">\n                    <div style=\"padding: 10px;\">\n                        <div class=\"panel panel-default\">\n                            <div id='bod' class=\"panel-body\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-9\">\n                                        {{#if controller.showShareList}}\n                                        <div id=\"sharelist\" class=\"row-fluid\">\n                                            {{partial \"sharelist\"}}\n                                        </div>\n                                        {{/if}}\n                                        {{#unless controller.showShareList}}\n                                        <div id=\"folderlist\" class=\"row-fluid\">\n                                            {{partial \"_folderlist\"}}\n                                        </div>\n                                        {{/unless}}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div align=\"center\" style={{unless controller.isLoading \"display:none;\"}}>\n                <img src=\"/assets/images/throbber.gif\"/>\n            </div>\n            {{#unless controller.isFileListEmpty}}\n            <div id=\"content panel-group\" id=\"accordion\">\n                <div style=\"padding: 10px;\">\n                    <div class=\"panel panel-default\">\n                        <div class=\"panel-heading\">\n                            <h3 class=\"panel-title\">Attached Files</h3>\n                        </div>\n                        <div id='bod' class=\"panel-body\">\n                            <div class=\"row\">\n                                <div class=\"col-xs-12 col-sm-4 col-md-4\"><label>File Name</label></div>\n                                <div class=\"hidden-xs col-sm-6 col-md-6\"><label>File Label</label></div>\n                            </div>\n                            {{#each file in controller.filelist}}\n                            <div class=\"row\">\n                                <div class=\"col-xs-12 col-sm-4 col-md-4\"><p class=\"form-control-static\">{{file.name}}</p></div>\n                                <div class=\"col-xs-12 col-sm-6 col-md-6\">{{input type=\"text\" class=\"form-control\"\n                                    value=file.label}}\n                                </div>\n                                <div class=\"hidden-xs col-sm-2 col-md-2\">\n                                    <button class=\"btn btn-danger btn-sm\" {{action\n                                    \"removeFile\" file}}>Remove&nbsp;<span\n                                        class=\"glyphicon glyphicon-trash\"></span></button>\n                                </div>\n                            </div>\n                            {{/each}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            {{/unless}}\n        </div>\n    </div>\n    </div>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_sharelist\">\n    <table class=\"table table-bordered table-striped table-condensed col-md-10\">\n        <thead>\n        <tr style=\"word-break:break-word\">\n            <th>Name</th>\n            <th>Site Type</th>\n        </tr>\n        </thead>\n        <tbody>\n        {{#each share in controller.shares}}\n        <tr style=\"word-break:break-word\">\n            <td><a {{action \"openShare\" share.share.name share.share.type share.share.id share.share.path share.share.containerid}}>{{share.share.name}}</a></td>\n            <td>{{share.share.type}}</td>\n        </tr>\n        {{/each}}\n        </tbody>\n    </table>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_createFolder\">\n    <div class=\"modal fade\" id=\"button-modal-create\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <form id=\"createfolderform\" class=\"form-horizontal\" enctype=\"application/x-www-form-urlencoded\" method=\"post\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                        <h4 class=\"modal-title\" id=\"myModalLabel\">New Folder</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <div class=\"form-group\">\n                            {{input id=\"createfolder\" name=\"foldername\" class=\"form-control\" type=\"text\" value=controller.newFolderName}}\n                            <button class=\"btn btn-default\" type=\"submit\" {{action \"createFolderClick\" folderlist.shareid containerid path \"button-modal-create\"}}>Create</button>\n                        </div>\n                        <div align=\"center\" style={{unless controller.isLoading \"display:none;\"}}>\n                        <img src=\"/assets/images/throbber.gif\"/>\n                    </div>\n            </div>\n            </form>\n        </div>\n    </div>\n    </div>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_uploadFile\">\n    <div class=\"modal fade\" id=\"button-modal-upload\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <form id=\"fileuploadform\" class=\"form-horizontal\" enctype=\"multipart/form-data\" method=\"post\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                        <h4 class=\"modal-title\" id=\"myModalLabel\">File Upload</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <div class=\"form-group\">\n                            {{file-upload class=\"form-control\" url=controller.uploadURL\n                            params=controller.folderlist.queryParams\n                            headers=controller.headers action='modalFinished'\n                            actionParams=\"button-modal-upload\" startAction='setLoading'}}\n                        </div>\n                        <div align=\"center\" style={{unless controller.isLoading \"display:none;\"}}>\n                        <img src=\"/assets/images/throbber.gif\"/>\n                    </div>\n            </div>\n            </form>\n        </div>\n    </div>\n    </div>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_folderlist\">\n    <div class=\"panel-heading\">\n        <h2 class=\"panel-title\">{{controller.folderlist.sharename}}<span style=\"float:right;\"><em>{{controller.folderlist.sharetype}}</em></span></h2>\n    </div>\n    <div id=\"browseOnly\">\n        <!--<button type=\"button\" class=\"btn btn-default {{if controller.isRoot 'disabled'}}\" {{action \"navigateToParent\" controller.folderlist.shareid}}>-->\n        <!--<span class=\"glyphicon glyphicon-level-up\"></span> &nbsp;Back to Parent-->\n        <!--</button>-->\n        {{partial 'uploadFile'}}\n        {{partial 'createFolder'}}\n    </div>\n    <table class=\"table table-bordered table-striped col-md-12\">\n        <thead>\n        <tr style=\"word-break:break-word\">\n            {{#if controller.contentOnly}}\n            <th><a {{action \"navigateToParent\" controller.folderlist.shareid}}>/{{controller.folderlist.queryParams.path}}</a></th>\n            {{else}}\n            <th><a {{action \"returnToSites\"}}>Home</a> <a {{action \"navigateToParent\" controller.folderlist.shareid}}>/{{controller.folderlist.queryParams.path}}</a></th>\n            {{/if}}\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        {{#each controller.folderlist.shares as |share|}}\n        <tr style=\"word-break:break-word\">\n            <td>\n                {{#if share.isDir}}\n                <a {{action \"openShare\" controller.folderlist.sharename controller.folderlist.sharetype share.shareid share.path share.containerid}}>\n                <span class=\"glyphicon glyphicon-folder-open\"></span> &nbsp;\n                {{share.name}}\n                </a>\n                {{/if}}\n                {{#unless share.isDir}}\n                <a href=\"{{share.downloadURL}}\">\n                    <span class=\"glyphicon glyphicon-file\" style=\"color: silver;\"></span> &nbsp;\n                    {{share.name}}\n                </a>\n                {{/unless}}\n            </td>\n            <td align=\"center\">\n                {{#unless share.isDir}}\n                <!--<a class=\"btn btn-default\" href=\"{{share.downloadURL}}\">-->\n                <!--<span class=\"glyphicon glyphicon-download\"></span> &nbsp; Download-->\n                <!--</a>-->\n                <button class=\"btn btn-success\" {{action\n                \"addFile\" share}}>\n                <span class=\"glyphicon glyphicon-paperclip\"></span> &nbsp; Attach File\n                </button>\n                {{/unless}}\n            </td>\n        </tr>\n        {{/each}}\n        </tbody>\n        <tfoot>\n        <tr>\n            <td colspan=\"2\">\n                <a data-insertid=\"1\" class=\"btn btn-success\" data-toggle=\"modal\" data-target=\"#button-modal-upload\">Upload Files</a>\n                <a data-insertid=\"1\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#button-modal-create\">Create Folder</a>\n            </td>\n        </tr>\n        </tfoot>\n    </table>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"light-box\">\n    {{#if inlineImage}}<img src=\"{{unbound href}}\" title=\"{{unbound data-title}}\" class=\"{{unbound data-class}}\"/>{{/if}}{{yield}}\n</script>","facts":{}},"checksum":"668C5BF5E49079061A3D13BA9511B9D5BA9C01A0D9BC56A71EA88F360885497FL23011"},{"_id":{"$oid":"566dbecb1a30fffa19931751"},"id":"566dbecb1a30fffa19931751","owner":{},"recType":"app","name":"APIdoc share and folder nav","desc":"apidoc default view - handles both Shares & Content object types","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032843881,"createDate":{"$date":1450032843881},"origin":{"id":"5665fa78330000c701db5e45","name":"APIdoc share and folder nav","desc":"apidoc default view - handles both Shares & Content object types","creatorId":"tpanagos@point.io","createDate":1450032843881,"checksum":"668C5BF5E49079061A3D13BA9511B9D5BA9C01A0D9BC56A71EA88F360885497FL23011"},"data":{"form":"<script type=\"text/javascript\">\n    var baseURL = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n\n    App.FileController = Ember.Controller.extend({\n        init: function () {\n            console.log(\"fileinit\");\n            // if we are doing a content view then skip the shareList view\n            if (this.get(\"params.objTypeId\") === \"Content\") {\n                this.set(\"showShareList\", false);\n                this.set(\"contentOnly\", true);\n                var params = this.get(\"params\");\n                this.send(\"openShare\", params.sharename, params.sharetype, params.objId, params.path, params.containerid);\n            }\n        },\n        queryParams: {path: \"\", containerid: \"\"},\n        containerid: null,\n        path: null,\n        showShareList: true,\n        contentOnly: false,\n        bPopUp: null,\n        isFileListEmpty: true,\n        dataArray: function () {\n            var dA = Ember.A();\n            var raw = this.get(\"model\");\n            for (var i in raw) {\n                dA.pushObject(raw[i]);\n            }\n            return dA\n        }.property(\"model\"),\n        filelist: Ember.A(),\n        folderlist: Ember.A(),\n        folderstack: Ember.A(),\n        shares: function () {\n            return this.get(\"dataArray\");\n        }.property(\"dataArray\"),\n        newFolderName: \"\",\n        headers: {\n            Authorization: sessionKey\n        },\n        uploadURL: function () {\n            return baseURL + '/apidoc/files/upload/' + this.get('folderlist.shareid');\n        }.property('folderList.shareid'),\n        uploadFile: null,\n        isLoading: false,\n        isRoot: function() {\n            return (this.get(\"folderlist\").queryParams.path == \"\")\n        }.property(\"folderlist.queryParams.path\"),\n        actions: {\n            submitAction: function () {\n                this.set('isLoading', true);\n                var self = this;\n                // We really want to inject RELATEDS\n                var injectableFiles = [];\n                this.get(\"filelist\").forEach(function (file) {\n                    injectableFiles.pushObject({\n                        \"ID\": file.link,\n                        \"LABEL\": file.name,\n                        \"TOOLTIP\": \"file.label\",\n                        \"TYPE\": \"PIO\",\n                        \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=\" + file.link\n                    });\n                });\n                var injectableFacts = {\n                    'REQUEST': {\n                        'INPUT': {\n                            'RELATEDS': injectableFiles,\n                            'FIELDS': [],\n                            'FACTS': []\n                        }\n                    }\n                };\n                Ember.$.ajax({\n                    type: \"PUT\",\n                    async: true,\n                    url: baseURL + '/messages/injectListJSON/' + taskid + '?Authorization=' + sessionKey,\n                    data: JSON.stringify(injectableFacts),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    success: function (data) {\n                        self.set('isLoading', false);\n                        //$('#emberForm').submit();\n                    }\n                });\n                return true; //this bubbles the action up\n            },\n            addFile: function (share) {\n                this.set('isLoading', true);\n                var self = this;\n                //create a link\n                var linkURL = \"\";\n                //v3\n                var servercall = baseURL + \"/apidoc/links/create/\" + share.shareid + \"?Authorization=\" + sessionKey;\n                $.ajax({\n                    type: \"POST\",\n                    async: false,\n                    data: {\n                        'containerid': share.containerid,\n                        'path': share.path,\n                        'fileid': share.fileid,\n                        'filename': share.name\n                    },\n                    url: servercall,\n                    success: function (data) {\n                        linkURL = data.RESPONSE.linkid;\n                        self.set('isLoading', false);\n                    }\n                });\n                //add it to the list\n                var fileArray = this.get(\"filelist\");\n                fileArray.pushObject({name: share.name, link: linkURL, label: share.name});\n                this.set(\"isFileListEmpty\", false);\n            },\n            removeFile: function (id) {\n                var fileList = this.get('filelist');\n                fileList.removeObject(id);\n                if (fileList.length == 0)\n                    this.set(\"isFileListEmpty\", true);\n            },\n            createFolderClick: function (shareid, containerid, path, modalId) {\n                var self = this;\n                this.set('isLoading', true);\n                var servercall = baseURL + \"/apidoc/folders/create/\" + shareid\n                $.ajax({\n                    type: \"POST\",\n                    async: false,\n                    data: {'containerid': containerid, 'path': path, 'foldername': this.get('newFolderName')},\n                    url: servercall,\n                    headers: {\n                        Authorization: sessionKey\n                    },\n                    cache: false,\n                    success: function (data) {\n                        self.send('modalFinished', modalId);\n                    }\n                });\n            },\n            modalFinished: function (modalId) {\n                $('#'+modalId).modal(\"hide\");\n                var thisFolder = this.get(\"folderlist\");\n                this.send('openShare', thisFolder.sharename, thisFolder.sharetype, thisFolder.shareid, thisFolder.queryParams.path, thisFolder.queryParams.containerid);\n                this.send('setLoading', false);\n            },\n            returnToSites: function() {\n                this.set('showShareList', true);\n            },\n            navigateToParent: function () {\n                if (this.get('folderstack').length == 0) {\n                    if (!this.get('contentOnly'))\n                    {\n                        this.send('returnToSites');\n                    }\n                }\n                else {\n                    var current = this.get('folderstack').pop();\n                    this.set('folderlist', current);\n                }\n            },\n            setLoading: function(state) {\n                this.set('isLoading', state);\n            },\n            openShare: function (sharename, sharetype, shareid, path, containerid) {\n                var self = this;\n                if (typeof containerid != 'undefined')\n                    self.set('containerid', containerid);\n                else\n                    self.set('containerid', \"\");\n                if (typeof path != 'undefined')\n                    self.set('path', path);\n                else\n                    self.set('path', \"\");\n                var queryParams = {path: self.get('path'), containerid: self.get('containerid')};\n                Ember.$.ajax({\n                    async: false,\n                    url: baseURL + '/apidoc/folders/list/' + shareid,\n                    data: queryParams,\n                    headers: {\n                        Authorization: sessionKey\n                    },\n                    success: function (data) {\n                        var sharesList = Ember.A();\n                        (data.RESPONSE.RESULT.forEach(function (share) {\n                            share.isDir = (share.type === 'DIR');\n                            var params = [];\n                            if (share.path) {\n                                params.push('path=' + encodeURIComponent(share.path))\n                            }\n                            if (share.containerid) {\n                                params.push('containerid=' + encodeURIComponent(share.containerid))\n                            }\n                            if (share.fileid) {\n                                params.push('fileid=' + encodeURIComponent(share.fileid))\n                            }\n                            if (share.name) {\n                                params.push('filename=' + encodeURIComponent(share.name))\n                            }\n                            params.push('asBinary=true');\n\n                            share.downloadURL = baseURL + '/apidoc/files/download/' + share.shareid + '?Authorization=' + sessionKey + '&' + params.join(\"&\")\n\n                            sharesList.pushObject(share);\n                        }));\n                        if (self.get('folderlist.shareid') && (containerid) && (self.get('folderlist.queryParams.containerid') != containerid)) {\n                            // Push the previous folder if there IS a previous folder & if this is NOT the top folder & we aren't just refreshing the current folder\n                            self.get('folderstack').push({\n                                shares: self.get('folderlist.shares'),\n                                shareid: self.get('folderlist.shareid'),\n                                sharename: self.get('folderlist.sharename'),\n                                sharetype: self.get('folderlist.sharetype'),\n                                queryParams: self.get('folderlist.queryParams')\n                            });\n                            //console.log(containerid + \" Push & length is now: \" + self.get('folderstack').length);\n                        }\n                        // Set the current folder\n                        self.set('folderlist.shares', sharesList);\n                        self.set('folderlist.shareid', shareid);\n                        self.set('folderlist.sharename', sharename);\n                        self.set('folderlist.sharetype', sharetype);\n                        self.set('folderlist.queryParams', queryParams);\n                    }\n                });\n                this.set('showShareList', false);\n            }\n        }\n    });\n\n    App.CreateFolderRoute = Ember.Route.extend({\n        model: function (params, options) {\n            var model = {};\n            model.shareid = params.shareid\n            model.containerid = options.queryParams.containerid\n            model.path = options.queryParams.path\n            model.sessionKey = sessionKey\n            model.url = document.URL\n            model.baseURL = baseURL\n            return model;\n        }\n    });\n    App.UploadFileRoute = Ember.Route.extend({\n        model: function (params, options) {\n            var model = {};\n            model.shareid = params.shareid\n            model.containerid = options.queryParams.containerid\n            model.path = options.queryParams.path\n            model.sessionKey = sessionKey\n            model.url = document.URL\n            model.baseURL = baseURL\n            return model;\n        }\n    });\n    App.FileUploadComponent = EmberUploader.FileField.extend({\n        multiple: true,\n        url: '',\n        filesDidChange: function (files) {\n            var self = this;\n            var uploadUrl = this.get('url');\n\n            var uploader = EmberUploader.Uploader.create({\n                url: uploadUrl,\n                paramName: 'uploadfile'\n            });\n            uploader.on('didUpload', function (e) {\n                self.sendAction('action', self.get('actionParams'));\n            });\n            if (!Ember.isEmpty(files)) {\n                this.sendAction('startAction', true);\n                uploader.uploadSerial(files, this.get('params'), this.get('headers'));\n            }\n        }\n    });\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"file\">\n\n    <div class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\">\n        <div class=\"panel-heading\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseA\">Attach Related Files</a>\n            </h4>\n        </div>\n        <div id=\"collapseA\" class=\"panel-collapse collapse in\">\n            <div class=\"container-fluid\">\n                <div id=\"content panel-group\" id=\"accordion\">\n                    <div style=\"padding: 10px;\">\n                        <div class=\"panel panel-default\">\n                            <div id='bod' class=\"panel-body\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-9\">\n                                        {{#if controller.showShareList}}\n                                        <div id=\"sharelist\" class=\"row-fluid\">\n                                            {{partial \"sharelist\"}}\n                                        </div>\n                                        {{/if}}\n                                        {{#unless controller.showShareList}}\n                                        <div id=\"folderlist\" class=\"row-fluid\">\n                                            {{partial \"_folderlist\"}}\n                                        </div>\n                                        {{/unless}}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div align=\"center\" style={{unless controller.isLoading \"display:none;\"}}>\n                <img src=\"/assets/images/throbber.gif\"/>\n            </div>\n            {{#unless controller.isFileListEmpty}}\n            <div id=\"content panel-group\" id=\"accordion\">\n                <div style=\"padding: 10px;\">\n                    <div class=\"panel panel-default\">\n                        <div class=\"panel-heading\">\n                            <h3 class=\"panel-title\">Attached Files</h3>\n                        </div>\n                        <div id='bod' class=\"panel-body\">\n                            <div class=\"row\">\n                                <div class=\"col-xs-12 col-sm-4 col-md-4\"><label>File Name</label></div>\n                                <div class=\"hidden-xs col-sm-6 col-md-6\"><label>File Label</label></div>\n                            </div>\n                            {{#each file in controller.filelist}}\n                            <div class=\"row\">\n                                <div class=\"col-xs-12 col-sm-4 col-md-4\"><p class=\"form-control-static\">{{file.name}}</p></div>\n                                <div class=\"col-xs-12 col-sm-6 col-md-6\">{{input type=\"text\" class=\"form-control\"\n                                    value=file.label}}\n                                </div>\n                                <div class=\"hidden-xs col-sm-2 col-md-2\">\n                                    <button class=\"btn btn-danger btn-sm\" {{action\n                                    \"removeFile\" file}}>Remove&nbsp;<span\n                                        class=\"glyphicon glyphicon-trash\"></span></button>\n                                </div>\n                            </div>\n                            {{/each}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            {{/unless}}\n        </div>\n    </div>\n    </div>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_sharelist\">\n    <table class=\"table table-bordered table-striped table-condensed col-md-10\">\n        <thead>\n        <tr style=\"word-break:break-word\">\n            <th>Name</th>\n            <th>Site Type</th>\n        </tr>\n        </thead>\n        <tbody>\n        {{#each share in controller.shares}}\n        <tr style=\"word-break:break-word\">\n            <td><a {{action \"openShare\" share.share.name share.share.type share.share.id share.share.path share.share.containerid}}>{{share.share.name}}</a></td>\n            <td>{{share.share.type}}</td>\n        </tr>\n        {{/each}}\n        </tbody>\n    </table>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_createFolder\">\n    <div class=\"modal fade\" id=\"button-modal-create\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <form id=\"createfolderform\" class=\"form-horizontal\" enctype=\"application/x-www-form-urlencoded\" method=\"post\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                        <h4 class=\"modal-title\" id=\"myModalLabel\">New Folder</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <div class=\"form-group\">\n                            {{input id=\"createfolder\" name=\"foldername\" class=\"form-control\" type=\"text\" value=controller.newFolderName}}\n                            <button class=\"btn btn-default\" type=\"submit\" {{action \"createFolderClick\" folderlist.shareid containerid path \"button-modal-create\"}}>Create</button>\n                        </div>\n                        <div align=\"center\" style={{unless controller.isLoading \"display:none;\"}}>\n                        <img src=\"/assets/images/throbber.gif\"/>\n                    </div>\n            </div>\n            </form>\n        </div>\n    </div>\n    </div>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_uploadFile\">\n    <div class=\"modal fade\" id=\"button-modal-upload\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <form id=\"fileuploadform\" class=\"form-horizontal\" enctype=\"multipart/form-data\" method=\"post\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                        <h4 class=\"modal-title\" id=\"myModalLabel\">File Upload</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <div class=\"form-group\">\n                            {{file-upload class=\"form-control\" url=controller.uploadURL\n                            params=controller.folderlist.queryParams\n                            headers=controller.headers action='modalFinished'\n                            actionParams=\"button-modal-upload\" startAction='setLoading'}}\n                        </div>\n                        <div align=\"center\" style={{unless controller.isLoading \"display:none;\"}}>\n                        <img src=\"/assets/images/throbber.gif\"/>\n                    </div>\n            </div>\n            </form>\n        </div>\n    </div>\n    </div>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"_folderlist\">\n    <div class=\"panel-heading\">\n        <h2 class=\"panel-title\">{{controller.folderlist.sharename}}<span style=\"float:right;\"><em>{{controller.folderlist.sharetype}}</em></span></h2>\n    </div>\n    <div id=\"browseOnly\">\n        <!--<button type=\"button\" class=\"btn btn-default {{if controller.isRoot 'disabled'}}\" {{action \"navigateToParent\" controller.folderlist.shareid}}>-->\n        <!--<span class=\"glyphicon glyphicon-level-up\"></span> &nbsp;Back to Parent-->\n        <!--</button>-->\n        {{partial 'uploadFile'}}\n        {{partial 'createFolder'}}\n    </div>\n    <table class=\"table table-bordered table-striped col-md-12\">\n        <thead>\n        <tr style=\"word-break:break-word\">\n            {{#if controller.contentOnly}}\n            <th><a {{action \"navigateToParent\" controller.folderlist.shareid}}>/{{controller.folderlist.queryParams.path}}</a></th>\n            {{else}}\n            <th><a {{action \"returnToSites\"}}>Home</a> <a {{action \"navigateToParent\" controller.folderlist.shareid}}>/{{controller.folderlist.queryParams.path}}</a></th>\n            {{/if}}\n            <th></th>\n        </tr>\n        </thead>\n        <tbody>\n        {{#each controller.folderlist.shares as |share|}}\n        <tr style=\"word-break:break-word\">\n            <td>\n                {{#if share.isDir}}\n                <a {{action \"openShare\" controller.folderlist.sharename controller.folderlist.sharetype share.shareid share.path share.containerid}}>\n                <span class=\"glyphicon glyphicon-folder-open\"></span> &nbsp;\n                {{share.name}}\n                </a>\n                {{/if}}\n                {{#unless share.isDir}}\n                <a href=\"{{share.downloadURL}}\">\n                    <span class=\"glyphicon glyphicon-file\" style=\"color: silver;\"></span> &nbsp;\n                    {{share.name}}\n                </a>\n                {{/unless}}\n            </td>\n            <td align=\"center\">\n                {{#unless share.isDir}}\n                <!--<a class=\"btn btn-default\" href=\"{{share.downloadURL}}\">-->\n                <!--<span class=\"glyphicon glyphicon-download\"></span> &nbsp; Download-->\n                <!--</a>-->\n                <button class=\"btn btn-success\" {{action\n                \"addFile\" share}}>\n                <span class=\"glyphicon glyphicon-paperclip\"></span> &nbsp; Attach File\n                </button>\n                {{/unless}}\n            </td>\n        </tr>\n        {{/each}}\n        </tbody>\n        <tfoot>\n        <tr>\n            <td colspan=\"2\">\n                <a data-insertid=\"1\" class=\"btn btn-success\" data-toggle=\"modal\" data-target=\"#button-modal-upload\">Upload Files</a>\n                <a data-insertid=\"1\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#button-modal-create\">Create Folder</a>\n            </td>\n        </tr>\n        </tfoot>\n    </table>\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"light-box\">\n    {{#if inlineImage}}<img src=\"{{unbound href}}\" title=\"{{unbound data-title}}\" class=\"{{unbound data-class}}\"/>{{/if}}{{yield}}\n</script>","facts":{}},"checksum":"668C5BF5E49079061A3D13BA9511B9D5BA9C01A0D9BC56A71EA88F360885497FL23011"},{"_id":{"$oid":"566dbecd1a30ff0918931759"},"id":"566dbecd1a30ff0918931759","owner":{},"recType":"app","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032845410,"createDate":{"$date":1450032845410},"origin":{"id":"5665f0553800005601c7b791","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","createDate":1450032845410,"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},"data":{"form":"<script type='text/javascript'>\n    App.AutoController = Ember.Controller.extend({\n        modals: Ember.inject.service(),\n        facts: jsonTask.FACTS,\n        isInserting: false,\n        flipbit: true,\n        changeFlag: false,\n        newId: function() {\n            return this.get(\"newLabel\").replace(/\\s+/g, '');\n        }.property(\"newLabel\"),\n        newLabel: \"\",\n        newType: \"string\",\n        newOptionLabel: \"\",\n        newOptionId: function() {\n            return this.get(\"newOptionLabel\").replace(/\\s+/g, '');\n        }.property(\"newOptionLabel\"),\n        newEnumOptions: [],\n        hasTemplateChanges: false,\n        hasUserChanges: false,\n        init: function() {\n            var facts = this.get(\"facts\");\n            // var modals = this.get('modals');\n            if(facts.data != null) {\n                this.set(\"dossier_exists\", true);\n            }\n            else {\n                this.set(\"dossier_exists\", false);\n                var objType = this.get('params.objTypeId');\n                var type = {\"recordType\":objType};\n//                var type = {\"recordType\":\"com.comcast.dossier_data\"};\n                var objid = {\n                    \"user\":facts.objId\n                }\n                Ember.set(facts, \"data\", type);\n                Ember.set(facts.data, \"vars\", objid);\n            }\n            console.log(facts);\n            // console.log(modals);\n        },\n        newLocation: function() {\n            return this.get(\"templateData\");\n        }.property(),\n        isEnum: function() {\n            return (this.get(\"newType\") === \"enum\");\n        }.property(\"newType\"),\n        isAdmin: function() {\n            return ($.inArray(this.get(\"facts.wf_currentAssignee\"), this.get(\"facts.admins\")) > 0);\n        }.property(),\n        newObject: function() {\n            var obj = {\n                id: this.get(\"newId\"),\n                label: this.get(\"newLabel\"),\n                value: \"\",\n                inputtype: this.get(\"newType\"),\n                fields:[],\n                options:this.get(\"newEnumOptions\")\n            };\n            return obj;\n        }.property(\"newId\",\"newLabel\",\"newType\",\"newLocation\"),\n        selectableTypes: [\n            {\"id\":\"string\",\"label\":\"Textbox\"},\n            {\"id\":\"enum\",\"label\":\"Dropdown\"},\n            {\"id\":\"boolean\",\"label\":\"True/False\"},\n            {\"id\":\"category\",\"label\":\"Category\"},\n            {\"id\":\"image\",\"label\":\"Image\"},\n            {\"id\":\"date\",\"label\":\"Date\"},\n            {\"id\":\"password\",\"label\":\"Password\"}\n        ],\n        locations: function() {\n            console.log(\"triggered locations\");\n            var locArray = Ember.A();\n            locArray.pushObject({\n                id: \"top\",\n                label: \"Top Level\",\n                reference: this.get(\"templateData\")\n            });\n            this.locationFinder(this.get(\"mergedArray\"), locArray, \"-\");\n            return locArray;\n        }.property(\"templateData.@each.inputtype\",\"flipbit\"),\n        locationFinder: function(fields, locArray, dashes) {\n            var self = this;\n            fields.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    locArray.pushObject({\n                        id: item.id,\n                        label: dashes + ' ' + item.label,\n                        reference: item.fields\n                    });\n                    self.locationFinder(item.fields, locArray, dashes + '-');\n                }\n            });\n        },\n        templateData: function() {\n            // getter\n            console.log(\"triggered template read\");\n            var templateObject = Ember.A();\n            var self = this;\n            var templateName = this.get('params.template');\n            var params = '&q={\"data.recordType\":\"' + templateName + '\"}&f={\"_id\":1,\"tstamp\":1,\"data\":1}';\n            Ember.$.ajax({\n                url: flowURL + '/objectstore?Authorization=' + sessionKey + params,\n                async: false,\n                success: function(data) {\n                    console.log(\"read success\");\n                    console.log(data);\n                    templateObject = data.RESPONSE.objs[0].data.vars.fields;\n                    self.templateId = data.RESPONSE.objs[0]._id;\n                    self.templateVars = data.RESPONSE.objs[0].data.vars;\n                    self.templateRecType = data.RESPONSE.objs[0].data.recordType;\n                }\n            });\n            return templateObject;\n        }.property(),\n        mergedArray: function() {\n            console.log(\"triggered mergedArray\");\n            var mergedArray = Ember.A();\n            if (!this.get(\"facts.data.vars.fields\")) {\n                console.log(\"facts.data.vars.fields does NOT exist.\");\n                var userFieldsArray = Ember.A();\n            }\n            else {\n                console.log(\"facts.data.vars.fields DOES exist.\");\n                var userFieldsArray = this.get(\"facts.data.vars.fields\");\n            }\n            var fieldsArray = this.get(\"templateData\");\n            if (fieldsArray) {\n                this.arrayMerger(fieldsArray, userFieldsArray, mergedArray);\n            }\n            return mergedArray;\n        }.property(\"templateData.[]\", \"flipbit\"),\n        // Recursive function helper for mergedArray property\n        arrayMerger: function(fieldsArray, userFieldsArray, mergedArray) {\n            var self = this;\n            fieldsArray.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    var arr = $.grep(userFieldsArray, function(n, i) {\n                        return (n.id === item.id);\n                    });\n                    if (arr.length > 0) {\n                        var subMergedArray = Ember.A();\n                        self.arrayMerger(item.fields, arr[0].fields, subMergedArray);\n                        item.fields.set(subMergedArray);\n//                        item.fields = subMergedArray;\n                    }\n                    mergedArray.pushObject(item);\n                }\n                else {\n                    if (!item.value) {\n                        var arr = $.grep(userFieldsArray, function(n, i) {\n                            return (n.id === item.id)\n                        });\n                        if ((arr.length > 0) && arr[0].value) {\n                            item.value = arr[0].value;\n                        } else\n                            item.value = \"\";\n                    }\n                    mergedArray.pushObject(item);\n                }\n            });\n        },\n        updateValue: function(fields, name, value) {\n            var self = this;\n            var arr = $.grep(fields, function(n, i) {\n                return (n.id === name);\n            });\n            if (arr.length > 0) {\n                arr[0].value = value;\n                return true;\n            }\n            else {\n                fields.some(function(item) {\n                    if (item.inputtype === \"category\") {\n                        //recurse through subFields\n                        self.updateValue(item.fields, name, value);\n                    }\n                });\n            }\n            return false;\n        },\n        clearValue: function(fields) {\n            var self = this;\n            fields.forEach(function(item) {\n                delete item.value;\n                if (item.inputtype === \"category\") {\n                    //recurse through subFields\n                    self.clearValue(item.fields);\n                }\n            });\n        },\n        isCancelable: function() {\n            return (this.get(\"isInserting\"));\n        }.property(\"isInserting\"),\n        buttonText: function() {\n            if (this.get(\"isInserting\"))\n                return \"Save\";\n            else\n                return\"Edit\";\n        }.property(\"isInserting\", \"isEnum\"),\n        actions: {\n            openModal: function(name) {\n                this.get('modals').open(name);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('submit');\n                this.set(\"isSubmitting\", true );\n//                if (this.get(\"hasTemplateChanges\"))\n//                    this.updateTemplate();\n                this.send('userUpdateAction');\n                // here you could perform your actions like persisting to the server or so\n//                $('#emberForm').submit();\n                return true;\n            },\n            insertAction: function () {\n                console.log(\"insertAction\");\n                if (this.get(\"isInserting\")) {\n                    this.set(\"isInserting\", false);\n                    var loc = this.get(\"newLocation\");\n                    loc.pushObject(this.get(\"newObject\"));\n                    // This is here to trigger computed properties when there is a change to a subfield array\n                    if (loc != this.get(\"templateData\"))\n                        this.set(\"flipbit\", !this.get(\"flipbit\"));\n                    this.set(\"hasTemplateChanges\", true);\n                    this.send('templateUpdateAction');\n                }\n                else {\n                    this.set(\"isInserting\", true);\n                }\n            },\n            cancelAction: function() {\n                this.set(\"isInserting\", false);\n            },\n            addAction: function(id, label, array) {\n                array.pushObject({\n                    id: id,\n                    label: label\n                });\n            },\n            templateUpdateAction: function() {\n                var vars = this.get(\"templateVars\");\n                var fields = this.get(\"templateData\");\n                var self = this;\n                this.clearValue(fields);\n                vars.fields.set(fields);\n                var updateObjStore = {\n                    recordType: this.get(\"templateRecType\"),\n                    vars: vars\n                };\n                var self = this;\n                Ember.$.ajax(flowURL + '/objectstore/' + this.get('templateId') + '?Authorization=' + sessionKey, {\n                    type: 'PATCH',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        self.set(\"hasTemplateChanges\", false);\n                        console.log(self);\n                        // this.get('modals').open('picker');\n                        alert(\"Template Update Success\");\n                    },\n                    error: function(data) {\n                        alert(\"Template Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            },\n            userUpdateAction: function() {\n                if (this.get(\"dossier_exists\")) {\n                    console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                    var self = this;\n                    var vars = this.get(\"facts.data.vars\");\n                    var fields = this.get(\"templateData\");\n//                var fields = this.get(\"mergedArray\");\n                    // Sync the values from the form with the values in mergedArray\n                    var fieldValuePairs = $('#dossier_form').serializeArray();\n                    $.each(fieldValuePairs, function(index, fieldValuePair) {\n                        self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                        console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                    });\n                    var updateObjStore = {\n                        recordType: this.get(\"facts.data.recordType\"),\n                        vars: {\n                            fields: fields,\n                            user: this.get(\"facts.data.vars.user\")\n                        }\n                    };\n                    console.log(updateObjStore);\n                    Ember.$.ajax(flowURL + '/objectstore/' + this.get(\"facts.apidata_data._id\") + '?Authorization=' + sessionKey, {\n                        type: 'PATCH',\n                        async: false,\n                        data:  JSON.stringify(updateObjStore),\n                        dataType: 'json',\n                        contentType: 'application/json',\n                        context: this,\n                        success: function(data) {\n                            alert(\"User Update Success\");\n                        },\n                        error: function(data) {\n                            alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                        }\n                    });\n                }\n                else {\n                    this.send(\"userCreateAction\");\n                }\n            },\n            userCreateAction: function() {\n                console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                var self = this;\n                var vars = this.get(\"facts.data.vars\");\n                var fields = this.get(\"templateData\");\n                var facts = this.get(\"facts\");\n//                var fields = this.get(\"mergedArray\");\n                // Sync the values from the form with the values in mergedArray\n                var fieldValuePairs = $('#dossier_form').serializeArray();\n                $.each(fieldValuePairs, function(index, fieldValuePair) {\n                    self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                    console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                });\n                var updateObjStore = {\n                    recordType: this.get(\"facts.data.recordType\"),\n                    vars: {\n                        fields: fields,\n                        user: this.get(\"facts.objId\")\n                    }\n                };\n                console.log(updateObjStore);\n                Ember.$.ajax(flowURL + '/objectstore?Authorization=' + sessionKey, {\n                    type: 'POST',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        alert(\"User Saved Success\");\n                        console.log(data);\n                        this.set(\"dossier_exists\", true);\n                        var id = {\n                            \"_id\": data.RESPONSE.objId\n                        }\n                        Ember.set(facts, \"apidata_data\", id);\n                    },\n                    error: function(data) {\n                        alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            }\n        }\n    });\n    App.ModalsService = Ember.Service.extend({\n        containerView: null,\n        open: function(name) {\n            var Modal = this.container.lookupFactory('component:'+name+'-modal');\n            var modal = Modal.create();\n            this.get('containerView').pushObject(modal);\n        },\n        close: function() {\n            this.get('containerView').popObject();\n        }\n    });\n\n    App.MyModalsComponent = Ember.ContainerView.extend({\n        elementId: 'my-modals',\n        modals: Ember.inject.service(),\n        didInsertElement: function() {\n            this.set('modals.containerView', this);\n        }\n    });\n\n    App.BaseModalComponent = Ember.Component.extend({\n        modals: Ember.inject.service(),\n        actions: {\n            close: function() {\n                this.get('modals').close();\n            }\n        }\n    });\n\n    App.PickerModalComponent = App.BaseModalComponent.extend({\n        layoutName: 'components/picker-modal',\n        pickerWrapper: null,\n        pickerData: null,\n        classNames: ['input-small'],\n        format: \"l\",\n        placeholder: Ember.computed.alias('format'),\n        iconOnRight: true,\n\n        didInsertElement: function () {\n            var self = this;\n            var format = this.get('format');\n\n            var pickerWrapper = this.$().datetimepicker({\n                format: 'l'\n                //viewMode: 'years'\n                //minDate: \"1/1/\" + (moment().year() - 2).toString()\n            });\n            this.set('pickerWrapper', pickerWrapper);\n\n            var pickerData = pickerWrapper.data(\"DateTimePicker\");\n            this.set('pickerData', pickerData);\n\n            if(this.get('datetime'))\n                pickerData.setDate(this.get('datetime'));\n\n            pickerWrapper.on('dp.change', function (ev) {\n                //self.sendAction('action', ev.format());\n                self.set('datetime', ev.date);\n            });\n        },\n\n        datetimeChanged: function () {\n            // get model datetime\n            var modelDatetime = this.get('datetime');\n            // get picker datetime\n            var picker = this.get('pickerData');\n            var pickerDatetime = picker.getDate();\n            // if not the same the overwrite model over picker\n            if (modelDatetime != pickerDatetime) {\n                picker.setDate(modelDatetime);\n            }\n            picker.hide();\n        }.observes('datetime')\n    });\n\n    function createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        // labelClass is a CSS class name for control labels\n        // fieldClass is a CSS class name applied to controls themselves\n        // subLabelClass is a CSS class name applied to the label for a subCategory - will likely provide a bolding\n        // subClass is a CSS class name applied to the inner div for a subCategory - will likely provide a nested view\n        // fieldId is the control id value\n        // fieldLabel is the Label value\n        // opts is an object which is expected to have optional properties {value, inputtype, options, results}\n        var returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><strong>' + fieldLabel + '</strong></label>';\n        returnHTML = returnHTML + '<div class=\"controls\">';\n        // var tvalue = \"\";\n        // console.log(opts.value);\n        // if(opts.value !== null)\n        // {\n        //     tvalue = opts.value;\n        // }\n        // else {\n        //     tvalue = \"\";\n        // }\n        if (typeof opts.inputtype === \"undefined\") opts.inputtype=\"default\";\n        switch (opts.inputtype)\n        {\n            case 'string':\n            case 'long':\n                //Basic Input\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'date':\n                // returnHTML = returnHTML + \"\";\n                break;\n            case 'image':\n                returnHTML = returnHTML + \"<div class='show-image' style='width:35%'><img src='\" + opts.value + \"' style='width:100%; height:300px' /><input class='\" + fieldClass +\" update' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"' style='width: 100%'></div>\";\n                break;\n            case 'password':\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='password' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'enum':\n                //Basic Select Return\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                for (i = 0; i < opts.options.length; i++) {\n                    var selected = \"\";\n                    if (opts.options[i].id == opts.value)\n                    {\n                        selected = \"selected\";\n                    }\n                    returnHTML = returnHTML + \"<option \" + selected +\" value='\" + opts.options[i].id +  \"'>\" + opts.options[i].label + \"</option>\";\n                }\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'boolean':\n                //Basic boolean...\n                var isTrue = \"\";\n                var isFalse = \"\";\n                if((opts.value == 'true') || (opts.value === true))\n                {\n                    isTrue = \"selected\"; //checked old way\n                }else{\n                    isFalse = \"selected\"; //checked old way\n                }\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                returnHTML = returnHTML + \"<option \" + isTrue +\" value='True'>True</option>\";\n                returnHTML = returnHTML + \"<option \" + isFalse +\" value='False'>False</option>\";\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'category':\n                // returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><h3>' + fieldLabel + '</h3></label>';\n                // returnHTML = returnHTML + '<div class=\"' + subClass + '\">';\n                returnHTML = \"<div class='white-text' id='collapseToggle'>\";\n                returnHTML = returnHTML + \"<h3 href='#\" + fieldId + \"' style='cursor:pointer;' data-toggle='collapse' class='collapsed' aria-expanded='false'>\" + fieldLabel + \"</h3>\";\n                returnHTML = returnHTML + \"<div id=\" + fieldId + \" aria-expanded='false' class='\" + subClass + \" collapse'>\";\n                opts.fields.forEach(function(opt) {\n                    returnHTML = returnHTML + createInput(labelClass, fieldClass, subLabelClass, subClass, opt.id, opt.label, opt);\n                });\n                returnHTML = returnHTML + \"</div>\";\n                break;\n            default:\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' disabled=true value='\" + opts.value + \"'>\";\n                break;\n        }\n        returnHTML = returnHTML + '</div>';\n        return new Handlebars.SafeString(returnHTML);\n    };\n    Ember.Handlebars.registerBoundHelper('createInput', function(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        //expects opts: {id, label, value, inputtype, options}\n        return createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts);\n    });\n</script>\n\n\n<script type=\"text/x-handlebars\" data-template-name=\"auto\">\n    <div class=\"panel panel-info\">\n        <div class=\"panel-heading\" style=\"font-weight:bolder;\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accord\" href=\"#collapseB\">{{params.title}}</a>\n            </h4>\n        </div>\n        <div id=\"collapseB\" class=\"panel-collapse collapse in\">\n            <div id=\"body\" class=\"panel-body content\" id='accord'>\n                {{#if isAdmin}}\n                <div class=\"text-right\" style=\"margin-bottom: 5px;\">\n                    <button id=\"insert\" class=\"btn btn-warning\" {{action 'insertAction' target=\"controller\"}}>{{controller.buttonText}}</button>\n                    {{#if controller.isCancelable}}<button id=\"insert\" class=\"btn btn-danger\" {{action 'cancelAction' target=\"controller\"}}>Cancel</button>{{/if}}\n                </div>\n                {{#if controller.isInserting}}\n                <div style=\"outline: 1px solid darkorange; background: orange;\">\n                    {{partial \"newfield\"}}\n                    <div align=\"center\" style=\"padding: 15px;\">\n                        {{#if hasTemplateChanges}}\n                        <button id=\"save\" class=\"btn btn-primary\" {{action 'templateUpdateAction' target=\"controller\"}}>Save Template</button>\n                        {{/if}}\n                    </div>\n                </div>\n                {{/if}}\n                {{/if}}\n                <form id=\"dossier_form\">\n                    {{#each field in controller.mergedArray}}\n                    <div class=\"control-group\">\n                        {{createInput \"control-label\" \"form-control\" \"h2\" \"panel-body\" field.id field.label field}}\n                    </div>\n                    {{/each}}\n                    <div class=\"control-group\">\n                        {{my-modals}}\n                    </div>\n                </form>\n                <div align=\"center\">\n                    <button id=\"save\" class=\"btn btn-primary\" {{action 'userUpdateAction' target=\"controller\"}}>Save</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"_newfield\">\n    <div style=\"padding: 10px;\">\n        <label class=\"control-label\" for=\"newLocation\"><h3>Field Location</h3></label>\n        {{{view \"select\" content=controller.locations class=\"form-control\" id=\"newLocation\"\n        value=controller.newLocation optionValuePath=\"content.reference\" optionLabelPath=\"content.label\"}}}\n        <label class=\"control-label\" for=\"newLabel\"><h3>Field Label</h3></label>\n        {{input class=\"form-control\" id=\"newLabel\" value=controller.newLabel}}\n        <label class=\"control-label\" for=\"newId\"><h3>Unique Field Id</h3></label>\n        {{input class=\"form-control\" id=\"newId\" value=controller.newId}}\n        <label class=\"control-label\" for=\"newType\"><h3>Field Type</h3></label>\n        {{{view \"select\" content=controller.selectableTypes class=\"form-control\" id=\"newType\"\n        value=controller.newType optionValuePath=\"content.id\" optionLabelPath=\"content.label\"}}}\n        {{#if isEnum}}\n        <div class=\"panel-body\">\n            <h4>New Dropdown Options</h4><br>\n            <ul>\n                {{#each option in controller.newEnumOptions}}\n                <li>{{option.id}} - {{option.label}}</li>\n                {{/each}}\n            </ul>\n            <label class=\"control-label\" for=\"newOptionLabel\"><h3>Option Label</h3></label>\n            {{input class=\"form-control\" id=\"newOptionLabel\" value=controller.newOptionLabel}}\n            <label class=\"control-label\" for=\"newOptionId\"><h3>Unique Option Id</h3></label>\n            {{input class=\"form-control\" id=\"newOptionId\" value=controller.newOptionId}}\n            <div align=\"center\">\n                <button id=\"add\" class=\"btn btn-primary\" {{action 'addAction' controller.newOptionId controller.newOptionLabel controller.newEnumOptions target=\"controller\"}}>Add</button>\n            </div>\n        </div>\n        {{/if}}\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"components/picker-modal\">\n    <div class=\"form-group\">\n        <div class='input-group date'>\n            {{#if iconOnRight}}\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            {{else}}\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            {{/if}}\n        </div>\n    </div>\n</script>","facts":{}},"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},{"_id":{"$oid":"566dbecd1a30ff0918931759"},"id":"566dbecd1a30ff0918931759","owner":{},"recType":"app","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032845410,"createDate":{"$date":1450032845410},"origin":{"id":"5665f0553800005601c7b791","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","createDate":1450032845410,"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},"data":{"form":"<script type='text/javascript'>\n    App.AutoController = Ember.Controller.extend({\n        modals: Ember.inject.service(),\n        facts: jsonTask.FACTS,\n        isInserting: false,\n        flipbit: true,\n        changeFlag: false,\n        newId: function() {\n            return this.get(\"newLabel\").replace(/\\s+/g, '');\n        }.property(\"newLabel\"),\n        newLabel: \"\",\n        newType: \"string\",\n        newOptionLabel: \"\",\n        newOptionId: function() {\n            return this.get(\"newOptionLabel\").replace(/\\s+/g, '');\n        }.property(\"newOptionLabel\"),\n        newEnumOptions: [],\n        hasTemplateChanges: false,\n        hasUserChanges: false,\n        init: function() {\n            var facts = this.get(\"facts\");\n            // var modals = this.get('modals');\n            if(facts.data != null) {\n                this.set(\"dossier_exists\", true);\n            }\n            else {\n                this.set(\"dossier_exists\", false);\n                var objType = this.get('params.objTypeId');\n                var type = {\"recordType\":objType};\n//                var type = {\"recordType\":\"com.comcast.dossier_data\"};\n                var objid = {\n                    \"user\":facts.objId\n                }\n                Ember.set(facts, \"data\", type);\n                Ember.set(facts.data, \"vars\", objid);\n            }\n            console.log(facts);\n            // console.log(modals);\n        },\n        newLocation: function() {\n            return this.get(\"templateData\");\n        }.property(),\n        isEnum: function() {\n            return (this.get(\"newType\") === \"enum\");\n        }.property(\"newType\"),\n        isAdmin: function() {\n            return ($.inArray(this.get(\"facts.wf_currentAssignee\"), this.get(\"facts.admins\")) > 0);\n        }.property(),\n        newObject: function() {\n            var obj = {\n                id: this.get(\"newId\"),\n                label: this.get(\"newLabel\"),\n                value: \"\",\n                inputtype: this.get(\"newType\"),\n                fields:[],\n                options:this.get(\"newEnumOptions\")\n            };\n            return obj;\n        }.property(\"newId\",\"newLabel\",\"newType\",\"newLocation\"),\n        selectableTypes: [\n            {\"id\":\"string\",\"label\":\"Textbox\"},\n            {\"id\":\"enum\",\"label\":\"Dropdown\"},\n            {\"id\":\"boolean\",\"label\":\"True/False\"},\n            {\"id\":\"category\",\"label\":\"Category\"},\n            {\"id\":\"image\",\"label\":\"Image\"},\n            {\"id\":\"date\",\"label\":\"Date\"},\n            {\"id\":\"password\",\"label\":\"Password\"}\n        ],\n        locations: function() {\n            console.log(\"triggered locations\");\n            var locArray = Ember.A();\n            locArray.pushObject({\n                id: \"top\",\n                label: \"Top Level\",\n                reference: this.get(\"templateData\")\n            });\n            this.locationFinder(this.get(\"mergedArray\"), locArray, \"-\");\n            return locArray;\n        }.property(\"templateData.@each.inputtype\",\"flipbit\"),\n        locationFinder: function(fields, locArray, dashes) {\n            var self = this;\n            fields.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    locArray.pushObject({\n                        id: item.id,\n                        label: dashes + ' ' + item.label,\n                        reference: item.fields\n                    });\n                    self.locationFinder(item.fields, locArray, dashes + '-');\n                }\n            });\n        },\n        templateData: function() {\n            // getter\n            console.log(\"triggered template read\");\n            var templateObject = Ember.A();\n            var self = this;\n            var templateName = this.get('params.template');\n            var params = '&q={\"data.recordType\":\"' + templateName + '\"}&f={\"_id\":1,\"tstamp\":1,\"data\":1}';\n            Ember.$.ajax({\n                url: flowURL + '/objectstore?Authorization=' + sessionKey + params,\n                async: false,\n                success: function(data) {\n                    console.log(\"read success\");\n                    console.log(data);\n                    templateObject = data.RESPONSE.objs[0].data.vars.fields;\n                    self.templateId = data.RESPONSE.objs[0]._id;\n                    self.templateVars = data.RESPONSE.objs[0].data.vars;\n                    self.templateRecType = data.RESPONSE.objs[0].data.recordType;\n                }\n            });\n            return templateObject;\n        }.property(),\n        mergedArray: function() {\n            console.log(\"triggered mergedArray\");\n            var mergedArray = Ember.A();\n            if (!this.get(\"facts.data.vars.fields\")) {\n                console.log(\"facts.data.vars.fields does NOT exist.\");\n                var userFieldsArray = Ember.A();\n            }\n            else {\n                console.log(\"facts.data.vars.fields DOES exist.\");\n                var userFieldsArray = this.get(\"facts.data.vars.fields\");\n            }\n            var fieldsArray = this.get(\"templateData\");\n            if (fieldsArray) {\n                this.arrayMerger(fieldsArray, userFieldsArray, mergedArray);\n            }\n            return mergedArray;\n        }.property(\"templateData.[]\", \"flipbit\"),\n        // Recursive function helper for mergedArray property\n        arrayMerger: function(fieldsArray, userFieldsArray, mergedArray) {\n            var self = this;\n            fieldsArray.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    var arr = $.grep(userFieldsArray, function(n, i) {\n                        return (n.id === item.id);\n                    });\n                    if (arr.length > 0) {\n                        var subMergedArray = Ember.A();\n                        self.arrayMerger(item.fields, arr[0].fields, subMergedArray);\n                        item.fields.set(subMergedArray);\n//                        item.fields = subMergedArray;\n                    }\n                    mergedArray.pushObject(item);\n                }\n                else {\n                    if (!item.value) {\n                        var arr = $.grep(userFieldsArray, function(n, i) {\n                            return (n.id === item.id)\n                        });\n                        if ((arr.length > 0) && arr[0].value) {\n                            item.value = arr[0].value;\n                        } else\n                            item.value = \"\";\n                    }\n                    mergedArray.pushObject(item);\n                }\n            });\n        },\n        updateValue: function(fields, name, value) {\n            var self = this;\n            var arr = $.grep(fields, function(n, i) {\n                return (n.id === name);\n            });\n            if (arr.length > 0) {\n                arr[0].value = value;\n                return true;\n            }\n            else {\n                fields.some(function(item) {\n                    if (item.inputtype === \"category\") {\n                        //recurse through subFields\n                        self.updateValue(item.fields, name, value);\n                    }\n                });\n            }\n            return false;\n        },\n        clearValue: function(fields) {\n            var self = this;\n            fields.forEach(function(item) {\n                delete item.value;\n                if (item.inputtype === \"category\") {\n                    //recurse through subFields\n                    self.clearValue(item.fields);\n                }\n            });\n        },\n        isCancelable: function() {\n            return (this.get(\"isInserting\"));\n        }.property(\"isInserting\"),\n        buttonText: function() {\n            if (this.get(\"isInserting\"))\n                return \"Save\";\n            else\n                return\"Edit\";\n        }.property(\"isInserting\", \"isEnum\"),\n        actions: {\n            openModal: function(name) {\n                this.get('modals').open(name);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('submit');\n                this.set(\"isSubmitting\", true );\n//                if (this.get(\"hasTemplateChanges\"))\n//                    this.updateTemplate();\n                this.send('userUpdateAction');\n                // here you could perform your actions like persisting to the server or so\n//                $('#emberForm').submit();\n                return true;\n            },\n            insertAction: function () {\n                console.log(\"insertAction\");\n                if (this.get(\"isInserting\")) {\n                    this.set(\"isInserting\", false);\n                    var loc = this.get(\"newLocation\");\n                    loc.pushObject(this.get(\"newObject\"));\n                    // This is here to trigger computed properties when there is a change to a subfield array\n                    if (loc != this.get(\"templateData\"))\n                        this.set(\"flipbit\", !this.get(\"flipbit\"));\n                    this.set(\"hasTemplateChanges\", true);\n                    this.send('templateUpdateAction');\n                }\n                else {\n                    this.set(\"isInserting\", true);\n                }\n            },\n            cancelAction: function() {\n                this.set(\"isInserting\", false);\n            },\n            addAction: function(id, label, array) {\n                array.pushObject({\n                    id: id,\n                    label: label\n                });\n            },\n            templateUpdateAction: function() {\n                var vars = this.get(\"templateVars\");\n                var fields = this.get(\"templateData\");\n                var self = this;\n                this.clearValue(fields);\n                vars.fields.set(fields);\n                var updateObjStore = {\n                    recordType: this.get(\"templateRecType\"),\n                    vars: vars\n                };\n                var self = this;\n                Ember.$.ajax(flowURL + '/objectstore/' + this.get('templateId') + '?Authorization=' + sessionKey, {\n                    type: 'PATCH',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        self.set(\"hasTemplateChanges\", false);\n                        console.log(self);\n                        // this.get('modals').open('picker');\n                        alert(\"Template Update Success\");\n                    },\n                    error: function(data) {\n                        alert(\"Template Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            },\n            userUpdateAction: function() {\n                if (this.get(\"dossier_exists\")) {\n                    console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                    var self = this;\n                    var vars = this.get(\"facts.data.vars\");\n                    var fields = this.get(\"templateData\");\n//                var fields = this.get(\"mergedArray\");\n                    // Sync the values from the form with the values in mergedArray\n                    var fieldValuePairs = $('#dossier_form').serializeArray();\n                    $.each(fieldValuePairs, function(index, fieldValuePair) {\n                        self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                        console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                    });\n                    var updateObjStore = {\n                        recordType: this.get(\"facts.data.recordType\"),\n                        vars: {\n                            fields: fields,\n                            user: this.get(\"facts.data.vars.user\")\n                        }\n                    };\n                    console.log(updateObjStore);\n                    Ember.$.ajax(flowURL + '/objectstore/' + this.get(\"facts.apidata_data._id\") + '?Authorization=' + sessionKey, {\n                        type: 'PATCH',\n                        async: false,\n                        data:  JSON.stringify(updateObjStore),\n                        dataType: 'json',\n                        contentType: 'application/json',\n                        context: this,\n                        success: function(data) {\n                            alert(\"User Update Success\");\n                        },\n                        error: function(data) {\n                            alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                        }\n                    });\n                }\n                else {\n                    this.send(\"userCreateAction\");\n                }\n            },\n            userCreateAction: function() {\n                console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                var self = this;\n                var vars = this.get(\"facts.data.vars\");\n                var fields = this.get(\"templateData\");\n                var facts = this.get(\"facts\");\n//                var fields = this.get(\"mergedArray\");\n                // Sync the values from the form with the values in mergedArray\n                var fieldValuePairs = $('#dossier_form').serializeArray();\n                $.each(fieldValuePairs, function(index, fieldValuePair) {\n                    self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                    console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                });\n                var updateObjStore = {\n                    recordType: this.get(\"facts.data.recordType\"),\n                    vars: {\n                        fields: fields,\n                        user: this.get(\"facts.objId\")\n                    }\n                };\n                console.log(updateObjStore);\n                Ember.$.ajax(flowURL + '/objectstore?Authorization=' + sessionKey, {\n                    type: 'POST',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        alert(\"User Saved Success\");\n                        console.log(data);\n                        this.set(\"dossier_exists\", true);\n                        var id = {\n                            \"_id\": data.RESPONSE.objId\n                        }\n                        Ember.set(facts, \"apidata_data\", id);\n                    },\n                    error: function(data) {\n                        alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            }\n        }\n    });\n    App.ModalsService = Ember.Service.extend({\n        containerView: null,\n        open: function(name) {\n            var Modal = this.container.lookupFactory('component:'+name+'-modal');\n            var modal = Modal.create();\n            this.get('containerView').pushObject(modal);\n        },\n        close: function() {\n            this.get('containerView').popObject();\n        }\n    });\n\n    App.MyModalsComponent = Ember.ContainerView.extend({\n        elementId: 'my-modals',\n        modals: Ember.inject.service(),\n        didInsertElement: function() {\n            this.set('modals.containerView', this);\n        }\n    });\n\n    App.BaseModalComponent = Ember.Component.extend({\n        modals: Ember.inject.service(),\n        actions: {\n            close: function() {\n                this.get('modals').close();\n            }\n        }\n    });\n\n    App.PickerModalComponent = App.BaseModalComponent.extend({\n        layoutName: 'components/picker-modal',\n        pickerWrapper: null,\n        pickerData: null,\n        classNames: ['input-small'],\n        format: \"l\",\n        placeholder: Ember.computed.alias('format'),\n        iconOnRight: true,\n\n        didInsertElement: function () {\n            var self = this;\n            var format = this.get('format');\n\n            var pickerWrapper = this.$().datetimepicker({\n                format: 'l'\n                //viewMode: 'years'\n                //minDate: \"1/1/\" + (moment().year() - 2).toString()\n            });\n            this.set('pickerWrapper', pickerWrapper);\n\n            var pickerData = pickerWrapper.data(\"DateTimePicker\");\n            this.set('pickerData', pickerData);\n\n            if(this.get('datetime'))\n                pickerData.setDate(this.get('datetime'));\n\n            pickerWrapper.on('dp.change', function (ev) {\n                //self.sendAction('action', ev.format());\n                self.set('datetime', ev.date);\n            });\n        },\n\n        datetimeChanged: function () {\n            // get model datetime\n            var modelDatetime = this.get('datetime');\n            // get picker datetime\n            var picker = this.get('pickerData');\n            var pickerDatetime = picker.getDate();\n            // if not the same the overwrite model over picker\n            if (modelDatetime != pickerDatetime) {\n                picker.setDate(modelDatetime);\n            }\n            picker.hide();\n        }.observes('datetime')\n    });\n\n    function createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        // labelClass is a CSS class name for control labels\n        // fieldClass is a CSS class name applied to controls themselves\n        // subLabelClass is a CSS class name applied to the label for a subCategory - will likely provide a bolding\n        // subClass is a CSS class name applied to the inner div for a subCategory - will likely provide a nested view\n        // fieldId is the control id value\n        // fieldLabel is the Label value\n        // opts is an object which is expected to have optional properties {value, inputtype, options, results}\n        var returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><strong>' + fieldLabel + '</strong></label>';\n        returnHTML = returnHTML + '<div class=\"controls\">';\n        // var tvalue = \"\";\n        // console.log(opts.value);\n        // if(opts.value !== null)\n        // {\n        //     tvalue = opts.value;\n        // }\n        // else {\n        //     tvalue = \"\";\n        // }\n        if (typeof opts.inputtype === \"undefined\") opts.inputtype=\"default\";\n        switch (opts.inputtype)\n        {\n            case 'string':\n            case 'long':\n                //Basic Input\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'date':\n                // returnHTML = returnHTML + \"\";\n                break;\n            case 'image':\n                returnHTML = returnHTML + \"<div class='show-image' style='width:35%'><img src='\" + opts.value + \"' style='width:100%; height:300px' /><input class='\" + fieldClass +\" update' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"' style='width: 100%'></div>\";\n                break;\n            case 'password':\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='password' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'enum':\n                //Basic Select Return\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                for (i = 0; i < opts.options.length; i++) {\n                    var selected = \"\";\n                    if (opts.options[i].id == opts.value)\n                    {\n                        selected = \"selected\";\n                    }\n                    returnHTML = returnHTML + \"<option \" + selected +\" value='\" + opts.options[i].id +  \"'>\" + opts.options[i].label + \"</option>\";\n                }\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'boolean':\n                //Basic boolean...\n                var isTrue = \"\";\n                var isFalse = \"\";\n                if((opts.value == 'true') || (opts.value === true))\n                {\n                    isTrue = \"selected\"; //checked old way\n                }else{\n                    isFalse = \"selected\"; //checked old way\n                }\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                returnHTML = returnHTML + \"<option \" + isTrue +\" value='True'>True</option>\";\n                returnHTML = returnHTML + \"<option \" + isFalse +\" value='False'>False</option>\";\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'category':\n                // returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><h3>' + fieldLabel + '</h3></label>';\n                // returnHTML = returnHTML + '<div class=\"' + subClass + '\">';\n                returnHTML = \"<div class='white-text' id='collapseToggle'>\";\n                returnHTML = returnHTML + \"<h3 href='#\" + fieldId + \"' style='cursor:pointer;' data-toggle='collapse' class='collapsed' aria-expanded='false'>\" + fieldLabel + \"</h3>\";\n                returnHTML = returnHTML + \"<div id=\" + fieldId + \" aria-expanded='false' class='\" + subClass + \" collapse'>\";\n                opts.fields.forEach(function(opt) {\n                    returnHTML = returnHTML + createInput(labelClass, fieldClass, subLabelClass, subClass, opt.id, opt.label, opt);\n                });\n                returnHTML = returnHTML + \"</div>\";\n                break;\n            default:\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' disabled=true value='\" + opts.value + \"'>\";\n                break;\n        }\n        returnHTML = returnHTML + '</div>';\n        return new Handlebars.SafeString(returnHTML);\n    };\n    Ember.Handlebars.registerBoundHelper('createInput', function(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        //expects opts: {id, label, value, inputtype, options}\n        return createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts);\n    });\n</script>\n\n\n<script type=\"text/x-handlebars\" data-template-name=\"auto\">\n    <div class=\"panel panel-info\">\n        <div class=\"panel-heading\" style=\"font-weight:bolder;\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accord\" href=\"#collapseB\">{{params.title}}</a>\n            </h4>\n        </div>\n        <div id=\"collapseB\" class=\"panel-collapse collapse in\">\n            <div id=\"body\" class=\"panel-body content\" id='accord'>\n                {{#if isAdmin}}\n                <div class=\"text-right\" style=\"margin-bottom: 5px;\">\n                    <button id=\"insert\" class=\"btn btn-warning\" {{action 'insertAction' target=\"controller\"}}>{{controller.buttonText}}</button>\n                    {{#if controller.isCancelable}}<button id=\"insert\" class=\"btn btn-danger\" {{action 'cancelAction' target=\"controller\"}}>Cancel</button>{{/if}}\n                </div>\n                {{#if controller.isInserting}}\n                <div style=\"outline: 1px solid darkorange; background: orange;\">\n                    {{partial \"newfield\"}}\n                    <div align=\"center\" style=\"padding: 15px;\">\n                        {{#if hasTemplateChanges}}\n                        <button id=\"save\" class=\"btn btn-primary\" {{action 'templateUpdateAction' target=\"controller\"}}>Save Template</button>\n                        {{/if}}\n                    </div>\n                </div>\n                {{/if}}\n                {{/if}}\n                <form id=\"dossier_form\">\n                    {{#each field in controller.mergedArray}}\n                    <div class=\"control-group\">\n                        {{createInput \"control-label\" \"form-control\" \"h2\" \"panel-body\" field.id field.label field}}\n                    </div>\n                    {{/each}}\n                    <div class=\"control-group\">\n                        {{my-modals}}\n                    </div>\n                </form>\n                <div align=\"center\">\n                    <button id=\"save\" class=\"btn btn-primary\" {{action 'userUpdateAction' target=\"controller\"}}>Save</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"_newfield\">\n    <div style=\"padding: 10px;\">\n        <label class=\"control-label\" for=\"newLocation\"><h3>Field Location</h3></label>\n        {{{view \"select\" content=controller.locations class=\"form-control\" id=\"newLocation\"\n        value=controller.newLocation optionValuePath=\"content.reference\" optionLabelPath=\"content.label\"}}}\n        <label class=\"control-label\" for=\"newLabel\"><h3>Field Label</h3></label>\n        {{input class=\"form-control\" id=\"newLabel\" value=controller.newLabel}}\n        <label class=\"control-label\" for=\"newId\"><h3>Unique Field Id</h3></label>\n        {{input class=\"form-control\" id=\"newId\" value=controller.newId}}\n        <label class=\"control-label\" for=\"newType\"><h3>Field Type</h3></label>\n        {{{view \"select\" content=controller.selectableTypes class=\"form-control\" id=\"newType\"\n        value=controller.newType optionValuePath=\"content.id\" optionLabelPath=\"content.label\"}}}\n        {{#if isEnum}}\n        <div class=\"panel-body\">\n            <h4>New Dropdown Options</h4><br>\n            <ul>\n                {{#each option in controller.newEnumOptions}}\n                <li>{{option.id}} - {{option.label}}</li>\n                {{/each}}\n            </ul>\n            <label class=\"control-label\" for=\"newOptionLabel\"><h3>Option Label</h3></label>\n            {{input class=\"form-control\" id=\"newOptionLabel\" value=controller.newOptionLabel}}\n            <label class=\"control-label\" for=\"newOptionId\"><h3>Unique Option Id</h3></label>\n            {{input class=\"form-control\" id=\"newOptionId\" value=controller.newOptionId}}\n            <div align=\"center\">\n                <button id=\"add\" class=\"btn btn-primary\" {{action 'addAction' controller.newOptionId controller.newOptionLabel controller.newEnumOptions target=\"controller\"}}>Add</button>\n            </div>\n        </div>\n        {{/if}}\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"components/picker-modal\">\n    <div class=\"form-group\">\n        <div class='input-group date'>\n            {{#if iconOnRight}}\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            {{else}}\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            {{/if}}\n        </div>\n    </div>\n</script>","facts":{}},"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},{"_id":{"$oid":"566dbecd1a30ff0918931759"},"id":"566dbecd1a30ff0918931759","owner":{},"recType":"app","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032845410,"createDate":{"$date":1450032845410},"origin":{"id":"5665f0553800005601c7b791","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","createDate":1450032845410,"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},"data":{"form":"<script type='text/javascript'>\n    App.AutoController = Ember.Controller.extend({\n        modals: Ember.inject.service(),\n        facts: jsonTask.FACTS,\n        isInserting: false,\n        flipbit: true,\n        changeFlag: false,\n        newId: function() {\n            return this.get(\"newLabel\").replace(/\\s+/g, '');\n        }.property(\"newLabel\"),\n        newLabel: \"\",\n        newType: \"string\",\n        newOptionLabel: \"\",\n        newOptionId: function() {\n            return this.get(\"newOptionLabel\").replace(/\\s+/g, '');\n        }.property(\"newOptionLabel\"),\n        newEnumOptions: [],\n        hasTemplateChanges: false,\n        hasUserChanges: false,\n        init: function() {\n            var facts = this.get(\"facts\");\n            // var modals = this.get('modals');\n            if(facts.data != null) {\n                this.set(\"dossier_exists\", true);\n            }\n            else {\n                this.set(\"dossier_exists\", false);\n                var objType = this.get('params.objTypeId');\n                var type = {\"recordType\":objType};\n//                var type = {\"recordType\":\"com.comcast.dossier_data\"};\n                var objid = {\n                    \"user\":facts.objId\n                }\n                Ember.set(facts, \"data\", type);\n                Ember.set(facts.data, \"vars\", objid);\n            }\n            console.log(facts);\n            // console.log(modals);\n        },\n        newLocation: function() {\n            return this.get(\"templateData\");\n        }.property(),\n        isEnum: function() {\n            return (this.get(\"newType\") === \"enum\");\n        }.property(\"newType\"),\n        isAdmin: function() {\n            return ($.inArray(this.get(\"facts.wf_currentAssignee\"), this.get(\"facts.admins\")) > 0);\n        }.property(),\n        newObject: function() {\n            var obj = {\n                id: this.get(\"newId\"),\n                label: this.get(\"newLabel\"),\n                value: \"\",\n                inputtype: this.get(\"newType\"),\n                fields:[],\n                options:this.get(\"newEnumOptions\")\n            };\n            return obj;\n        }.property(\"newId\",\"newLabel\",\"newType\",\"newLocation\"),\n        selectableTypes: [\n            {\"id\":\"string\",\"label\":\"Textbox\"},\n            {\"id\":\"enum\",\"label\":\"Dropdown\"},\n            {\"id\":\"boolean\",\"label\":\"True/False\"},\n            {\"id\":\"category\",\"label\":\"Category\"},\n            {\"id\":\"image\",\"label\":\"Image\"},\n            {\"id\":\"date\",\"label\":\"Date\"},\n            {\"id\":\"password\",\"label\":\"Password\"}\n        ],\n        locations: function() {\n            console.log(\"triggered locations\");\n            var locArray = Ember.A();\n            locArray.pushObject({\n                id: \"top\",\n                label: \"Top Level\",\n                reference: this.get(\"templateData\")\n            });\n            this.locationFinder(this.get(\"mergedArray\"), locArray, \"-\");\n            return locArray;\n        }.property(\"templateData.@each.inputtype\",\"flipbit\"),\n        locationFinder: function(fields, locArray, dashes) {\n            var self = this;\n            fields.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    locArray.pushObject({\n                        id: item.id,\n                        label: dashes + ' ' + item.label,\n                        reference: item.fields\n                    });\n                    self.locationFinder(item.fields, locArray, dashes + '-');\n                }\n            });\n        },\n        templateData: function() {\n            // getter\n            console.log(\"triggered template read\");\n            var templateObject = Ember.A();\n            var self = this;\n            var templateName = this.get('params.template');\n            var params = '&q={\"data.recordType\":\"' + templateName + '\"}&f={\"_id\":1,\"tstamp\":1,\"data\":1}';\n            Ember.$.ajax({\n                url: flowURL + '/objectstore?Authorization=' + sessionKey + params,\n                async: false,\n                success: function(data) {\n                    console.log(\"read success\");\n                    console.log(data);\n                    templateObject = data.RESPONSE.objs[0].data.vars.fields;\n                    self.templateId = data.RESPONSE.objs[0]._id;\n                    self.templateVars = data.RESPONSE.objs[0].data.vars;\n                    self.templateRecType = data.RESPONSE.objs[0].data.recordType;\n                }\n            });\n            return templateObject;\n        }.property(),\n        mergedArray: function() {\n            console.log(\"triggered mergedArray\");\n            var mergedArray = Ember.A();\n            if (!this.get(\"facts.data.vars.fields\")) {\n                console.log(\"facts.data.vars.fields does NOT exist.\");\n                var userFieldsArray = Ember.A();\n            }\n            else {\n                console.log(\"facts.data.vars.fields DOES exist.\");\n                var userFieldsArray = this.get(\"facts.data.vars.fields\");\n            }\n            var fieldsArray = this.get(\"templateData\");\n            if (fieldsArray) {\n                this.arrayMerger(fieldsArray, userFieldsArray, mergedArray);\n            }\n            return mergedArray;\n        }.property(\"templateData.[]\", \"flipbit\"),\n        // Recursive function helper for mergedArray property\n        arrayMerger: function(fieldsArray, userFieldsArray, mergedArray) {\n            var self = this;\n            fieldsArray.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    var arr = $.grep(userFieldsArray, function(n, i) {\n                        return (n.id === item.id);\n                    });\n                    if (arr.length > 0) {\n                        var subMergedArray = Ember.A();\n                        self.arrayMerger(item.fields, arr[0].fields, subMergedArray);\n                        item.fields.set(subMergedArray);\n//                        item.fields = subMergedArray;\n                    }\n                    mergedArray.pushObject(item);\n                }\n                else {\n                    if (!item.value) {\n                        var arr = $.grep(userFieldsArray, function(n, i) {\n                            return (n.id === item.id)\n                        });\n                        if ((arr.length > 0) && arr[0].value) {\n                            item.value = arr[0].value;\n                        } else\n                            item.value = \"\";\n                    }\n                    mergedArray.pushObject(item);\n                }\n            });\n        },\n        updateValue: function(fields, name, value) {\n            var self = this;\n            var arr = $.grep(fields, function(n, i) {\n                return (n.id === name);\n            });\n            if (arr.length > 0) {\n                arr[0].value = value;\n                return true;\n            }\n            else {\n                fields.some(function(item) {\n                    if (item.inputtype === \"category\") {\n                        //recurse through subFields\n                        self.updateValue(item.fields, name, value);\n                    }\n                });\n            }\n            return false;\n        },\n        clearValue: function(fields) {\n            var self = this;\n            fields.forEach(function(item) {\n                delete item.value;\n                if (item.inputtype === \"category\") {\n                    //recurse through subFields\n                    self.clearValue(item.fields);\n                }\n            });\n        },\n        isCancelable: function() {\n            return (this.get(\"isInserting\"));\n        }.property(\"isInserting\"),\n        buttonText: function() {\n            if (this.get(\"isInserting\"))\n                return \"Save\";\n            else\n                return\"Edit\";\n        }.property(\"isInserting\", \"isEnum\"),\n        actions: {\n            openModal: function(name) {\n                this.get('modals').open(name);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('submit');\n                this.set(\"isSubmitting\", true );\n//                if (this.get(\"hasTemplateChanges\"))\n//                    this.updateTemplate();\n                this.send('userUpdateAction');\n                // here you could perform your actions like persisting to the server or so\n//                $('#emberForm').submit();\n                return true;\n            },\n            insertAction: function () {\n                console.log(\"insertAction\");\n                if (this.get(\"isInserting\")) {\n                    this.set(\"isInserting\", false);\n                    var loc = this.get(\"newLocation\");\n                    loc.pushObject(this.get(\"newObject\"));\n                    // This is here to trigger computed properties when there is a change to a subfield array\n                    if (loc != this.get(\"templateData\"))\n                        this.set(\"flipbit\", !this.get(\"flipbit\"));\n                    this.set(\"hasTemplateChanges\", true);\n                    this.send('templateUpdateAction');\n                }\n                else {\n                    this.set(\"isInserting\", true);\n                }\n            },\n            cancelAction: function() {\n                this.set(\"isInserting\", false);\n            },\n            addAction: function(id, label, array) {\n                array.pushObject({\n                    id: id,\n                    label: label\n                });\n            },\n            templateUpdateAction: function() {\n                var vars = this.get(\"templateVars\");\n                var fields = this.get(\"templateData\");\n                var self = this;\n                this.clearValue(fields);\n                vars.fields.set(fields);\n                var updateObjStore = {\n                    recordType: this.get(\"templateRecType\"),\n                    vars: vars\n                };\n                var self = this;\n                Ember.$.ajax(flowURL + '/objectstore/' + this.get('templateId') + '?Authorization=' + sessionKey, {\n                    type: 'PATCH',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        self.set(\"hasTemplateChanges\", false);\n                        console.log(self);\n                        // this.get('modals').open('picker');\n                        alert(\"Template Update Success\");\n                    },\n                    error: function(data) {\n                        alert(\"Template Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            },\n            userUpdateAction: function() {\n                if (this.get(\"dossier_exists\")) {\n                    console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                    var self = this;\n                    var vars = this.get(\"facts.data.vars\");\n                    var fields = this.get(\"templateData\");\n//                var fields = this.get(\"mergedArray\");\n                    // Sync the values from the form with the values in mergedArray\n                    var fieldValuePairs = $('#dossier_form').serializeArray();\n                    $.each(fieldValuePairs, function(index, fieldValuePair) {\n                        self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                        console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                    });\n                    var updateObjStore = {\n                        recordType: this.get(\"facts.data.recordType\"),\n                        vars: {\n                            fields: fields,\n                            user: this.get(\"facts.data.vars.user\")\n                        }\n                    };\n                    console.log(updateObjStore);\n                    Ember.$.ajax(flowURL + '/objectstore/' + this.get(\"facts.apidata_data._id\") + '?Authorization=' + sessionKey, {\n                        type: 'PATCH',\n                        async: false,\n                        data:  JSON.stringify(updateObjStore),\n                        dataType: 'json',\n                        contentType: 'application/json',\n                        context: this,\n                        success: function(data) {\n                            alert(\"User Update Success\");\n                        },\n                        error: function(data) {\n                            alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                        }\n                    });\n                }\n                else {\n                    this.send(\"userCreateAction\");\n                }\n            },\n            userCreateAction: function() {\n                console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                var self = this;\n                var vars = this.get(\"facts.data.vars\");\n                var fields = this.get(\"templateData\");\n                var facts = this.get(\"facts\");\n//                var fields = this.get(\"mergedArray\");\n                // Sync the values from the form with the values in mergedArray\n                var fieldValuePairs = $('#dossier_form').serializeArray();\n                $.each(fieldValuePairs, function(index, fieldValuePair) {\n                    self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                    console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                });\n                var updateObjStore = {\n                    recordType: this.get(\"facts.data.recordType\"),\n                    vars: {\n                        fields: fields,\n                        user: this.get(\"facts.objId\")\n                    }\n                };\n                console.log(updateObjStore);\n                Ember.$.ajax(flowURL + '/objectstore?Authorization=' + sessionKey, {\n                    type: 'POST',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        alert(\"User Saved Success\");\n                        console.log(data);\n                        this.set(\"dossier_exists\", true);\n                        var id = {\n                            \"_id\": data.RESPONSE.objId\n                        }\n                        Ember.set(facts, \"apidata_data\", id);\n                    },\n                    error: function(data) {\n                        alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            }\n        }\n    });\n    App.ModalsService = Ember.Service.extend({\n        containerView: null,\n        open: function(name) {\n            var Modal = this.container.lookupFactory('component:'+name+'-modal');\n            var modal = Modal.create();\n            this.get('containerView').pushObject(modal);\n        },\n        close: function() {\n            this.get('containerView').popObject();\n        }\n    });\n\n    App.MyModalsComponent = Ember.ContainerView.extend({\n        elementId: 'my-modals',\n        modals: Ember.inject.service(),\n        didInsertElement: function() {\n            this.set('modals.containerView', this);\n        }\n    });\n\n    App.BaseModalComponent = Ember.Component.extend({\n        modals: Ember.inject.service(),\n        actions: {\n            close: function() {\n                this.get('modals').close();\n            }\n        }\n    });\n\n    App.PickerModalComponent = App.BaseModalComponent.extend({\n        layoutName: 'components/picker-modal',\n        pickerWrapper: null,\n        pickerData: null,\n        classNames: ['input-small'],\n        format: \"l\",\n        placeholder: Ember.computed.alias('format'),\n        iconOnRight: true,\n\n        didInsertElement: function () {\n            var self = this;\n            var format = this.get('format');\n\n            var pickerWrapper = this.$().datetimepicker({\n                format: 'l'\n                //viewMode: 'years'\n                //minDate: \"1/1/\" + (moment().year() - 2).toString()\n            });\n            this.set('pickerWrapper', pickerWrapper);\n\n            var pickerData = pickerWrapper.data(\"DateTimePicker\");\n            this.set('pickerData', pickerData);\n\n            if(this.get('datetime'))\n                pickerData.setDate(this.get('datetime'));\n\n            pickerWrapper.on('dp.change', function (ev) {\n                //self.sendAction('action', ev.format());\n                self.set('datetime', ev.date);\n            });\n        },\n\n        datetimeChanged: function () {\n            // get model datetime\n            var modelDatetime = this.get('datetime');\n            // get picker datetime\n            var picker = this.get('pickerData');\n            var pickerDatetime = picker.getDate();\n            // if not the same the overwrite model over picker\n            if (modelDatetime != pickerDatetime) {\n                picker.setDate(modelDatetime);\n            }\n            picker.hide();\n        }.observes('datetime')\n    });\n\n    function createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        // labelClass is a CSS class name for control labels\n        // fieldClass is a CSS class name applied to controls themselves\n        // subLabelClass is a CSS class name applied to the label for a subCategory - will likely provide a bolding\n        // subClass is a CSS class name applied to the inner div for a subCategory - will likely provide a nested view\n        // fieldId is the control id value\n        // fieldLabel is the Label value\n        // opts is an object which is expected to have optional properties {value, inputtype, options, results}\n        var returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><strong>' + fieldLabel + '</strong></label>';\n        returnHTML = returnHTML + '<div class=\"controls\">';\n        // var tvalue = \"\";\n        // console.log(opts.value);\n        // if(opts.value !== null)\n        // {\n        //     tvalue = opts.value;\n        // }\n        // else {\n        //     tvalue = \"\";\n        // }\n        if (typeof opts.inputtype === \"undefined\") opts.inputtype=\"default\";\n        switch (opts.inputtype)\n        {\n            case 'string':\n            case 'long':\n                //Basic Input\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'date':\n                // returnHTML = returnHTML + \"\";\n                break;\n            case 'image':\n                returnHTML = returnHTML + \"<div class='show-image' style='width:35%'><img src='\" + opts.value + \"' style='width:100%; height:300px' /><input class='\" + fieldClass +\" update' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"' style='width: 100%'></div>\";\n                break;\n            case 'password':\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='password' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'enum':\n                //Basic Select Return\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                for (i = 0; i < opts.options.length; i++) {\n                    var selected = \"\";\n                    if (opts.options[i].id == opts.value)\n                    {\n                        selected = \"selected\";\n                    }\n                    returnHTML = returnHTML + \"<option \" + selected +\" value='\" + opts.options[i].id +  \"'>\" + opts.options[i].label + \"</option>\";\n                }\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'boolean':\n                //Basic boolean...\n                var isTrue = \"\";\n                var isFalse = \"\";\n                if((opts.value == 'true') || (opts.value === true))\n                {\n                    isTrue = \"selected\"; //checked old way\n                }else{\n                    isFalse = \"selected\"; //checked old way\n                }\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                returnHTML = returnHTML + \"<option \" + isTrue +\" value='True'>True</option>\";\n                returnHTML = returnHTML + \"<option \" + isFalse +\" value='False'>False</option>\";\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'category':\n                // returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><h3>' + fieldLabel + '</h3></label>';\n                // returnHTML = returnHTML + '<div class=\"' + subClass + '\">';\n                returnHTML = \"<div class='white-text' id='collapseToggle'>\";\n                returnHTML = returnHTML + \"<h3 href='#\" + fieldId + \"' style='cursor:pointer;' data-toggle='collapse' class='collapsed' aria-expanded='false'>\" + fieldLabel + \"</h3>\";\n                returnHTML = returnHTML + \"<div id=\" + fieldId + \" aria-expanded='false' class='\" + subClass + \" collapse'>\";\n                opts.fields.forEach(function(opt) {\n                    returnHTML = returnHTML + createInput(labelClass, fieldClass, subLabelClass, subClass, opt.id, opt.label, opt);\n                });\n                returnHTML = returnHTML + \"</div>\";\n                break;\n            default:\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' disabled=true value='\" + opts.value + \"'>\";\n                break;\n        }\n        returnHTML = returnHTML + '</div>';\n        return new Handlebars.SafeString(returnHTML);\n    };\n    Ember.Handlebars.registerBoundHelper('createInput', function(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        //expects opts: {id, label, value, inputtype, options}\n        return createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts);\n    });\n</script>\n\n\n<script type=\"text/x-handlebars\" data-template-name=\"auto\">\n    <div class=\"panel panel-info\">\n        <div class=\"panel-heading\" style=\"font-weight:bolder;\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accord\" href=\"#collapseB\">{{params.title}}</a>\n            </h4>\n        </div>\n        <div id=\"collapseB\" class=\"panel-collapse collapse in\">\n            <div id=\"body\" class=\"panel-body content\" id='accord'>\n                {{#if isAdmin}}\n                <div class=\"text-right\" style=\"margin-bottom: 5px;\">\n                    <button id=\"insert\" class=\"btn btn-warning\" {{action 'insertAction' target=\"controller\"}}>{{controller.buttonText}}</button>\n                    {{#if controller.isCancelable}}<button id=\"insert\" class=\"btn btn-danger\" {{action 'cancelAction' target=\"controller\"}}>Cancel</button>{{/if}}\n                </div>\n                {{#if controller.isInserting}}\n                <div style=\"outline: 1px solid darkorange; background: orange;\">\n                    {{partial \"newfield\"}}\n                    <div align=\"center\" style=\"padding: 15px;\">\n                        {{#if hasTemplateChanges}}\n                        <button id=\"save\" class=\"btn btn-primary\" {{action 'templateUpdateAction' target=\"controller\"}}>Save Template</button>\n                        {{/if}}\n                    </div>\n                </div>\n                {{/if}}\n                {{/if}}\n                <form id=\"dossier_form\">\n                    {{#each field in controller.mergedArray}}\n                    <div class=\"control-group\">\n                        {{createInput \"control-label\" \"form-control\" \"h2\" \"panel-body\" field.id field.label field}}\n                    </div>\n                    {{/each}}\n                    <div class=\"control-group\">\n                        {{my-modals}}\n                    </div>\n                </form>\n                <div align=\"center\">\n                    <button id=\"save\" class=\"btn btn-primary\" {{action 'userUpdateAction' target=\"controller\"}}>Save</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"_newfield\">\n    <div style=\"padding: 10px;\">\n        <label class=\"control-label\" for=\"newLocation\"><h3>Field Location</h3></label>\n        {{{view \"select\" content=controller.locations class=\"form-control\" id=\"newLocation\"\n        value=controller.newLocation optionValuePath=\"content.reference\" optionLabelPath=\"content.label\"}}}\n        <label class=\"control-label\" for=\"newLabel\"><h3>Field Label</h3></label>\n        {{input class=\"form-control\" id=\"newLabel\" value=controller.newLabel}}\n        <label class=\"control-label\" for=\"newId\"><h3>Unique Field Id</h3></label>\n        {{input class=\"form-control\" id=\"newId\" value=controller.newId}}\n        <label class=\"control-label\" for=\"newType\"><h3>Field Type</h3></label>\n        {{{view \"select\" content=controller.selectableTypes class=\"form-control\" id=\"newType\"\n        value=controller.newType optionValuePath=\"content.id\" optionLabelPath=\"content.label\"}}}\n        {{#if isEnum}}\n        <div class=\"panel-body\">\n            <h4>New Dropdown Options</h4><br>\n            <ul>\n                {{#each option in controller.newEnumOptions}}\n                <li>{{option.id}} - {{option.label}}</li>\n                {{/each}}\n            </ul>\n            <label class=\"control-label\" for=\"newOptionLabel\"><h3>Option Label</h3></label>\n            {{input class=\"form-control\" id=\"newOptionLabel\" value=controller.newOptionLabel}}\n            <label class=\"control-label\" for=\"newOptionId\"><h3>Unique Option Id</h3></label>\n            {{input class=\"form-control\" id=\"newOptionId\" value=controller.newOptionId}}\n            <div align=\"center\">\n                <button id=\"add\" class=\"btn btn-primary\" {{action 'addAction' controller.newOptionId controller.newOptionLabel controller.newEnumOptions target=\"controller\"}}>Add</button>\n            </div>\n        </div>\n        {{/if}}\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"components/picker-modal\">\n    <div class=\"form-group\">\n        <div class='input-group date'>\n            {{#if iconOnRight}}\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            {{else}}\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            {{/if}}\n        </div>\n    </div>\n</script>","facts":{}},"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},{"_id":{"$oid":"566dbecd1a30ff0918931759"},"id":"566dbecd1a30ff0918931759","owner":{},"recType":"app","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032845410,"createDate":{"$date":1450032845410},"origin":{"id":"5665f0553800005601c7b791","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","createDate":1450032845410,"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},"data":{"form":"<script type='text/javascript'>\n    App.AutoController = Ember.Controller.extend({\n        modals: Ember.inject.service(),\n        facts: jsonTask.FACTS,\n        isInserting: false,\n        flipbit: true,\n        changeFlag: false,\n        newId: function() {\n            return this.get(\"newLabel\").replace(/\\s+/g, '');\n        }.property(\"newLabel\"),\n        newLabel: \"\",\n        newType: \"string\",\n        newOptionLabel: \"\",\n        newOptionId: function() {\n            return this.get(\"newOptionLabel\").replace(/\\s+/g, '');\n        }.property(\"newOptionLabel\"),\n        newEnumOptions: [],\n        hasTemplateChanges: false,\n        hasUserChanges: false,\n        init: function() {\n            var facts = this.get(\"facts\");\n            // var modals = this.get('modals');\n            if(facts.data != null) {\n                this.set(\"dossier_exists\", true);\n            }\n            else {\n                this.set(\"dossier_exists\", false);\n                var objType = this.get('params.objTypeId');\n                var type = {\"recordType\":objType};\n//                var type = {\"recordType\":\"com.comcast.dossier_data\"};\n                var objid = {\n                    \"user\":facts.objId\n                }\n                Ember.set(facts, \"data\", type);\n                Ember.set(facts.data, \"vars\", objid);\n            }\n            console.log(facts);\n            // console.log(modals);\n        },\n        newLocation: function() {\n            return this.get(\"templateData\");\n        }.property(),\n        isEnum: function() {\n            return (this.get(\"newType\") === \"enum\");\n        }.property(\"newType\"),\n        isAdmin: function() {\n            return ($.inArray(this.get(\"facts.wf_currentAssignee\"), this.get(\"facts.admins\")) > 0);\n        }.property(),\n        newObject: function() {\n            var obj = {\n                id: this.get(\"newId\"),\n                label: this.get(\"newLabel\"),\n                value: \"\",\n                inputtype: this.get(\"newType\"),\n                fields:[],\n                options:this.get(\"newEnumOptions\")\n            };\n            return obj;\n        }.property(\"newId\",\"newLabel\",\"newType\",\"newLocation\"),\n        selectableTypes: [\n            {\"id\":\"string\",\"label\":\"Textbox\"},\n            {\"id\":\"enum\",\"label\":\"Dropdown\"},\n            {\"id\":\"boolean\",\"label\":\"True/False\"},\n            {\"id\":\"category\",\"label\":\"Category\"},\n            {\"id\":\"image\",\"label\":\"Image\"},\n            {\"id\":\"date\",\"label\":\"Date\"},\n            {\"id\":\"password\",\"label\":\"Password\"}\n        ],\n        locations: function() {\n            console.log(\"triggered locations\");\n            var locArray = Ember.A();\n            locArray.pushObject({\n                id: \"top\",\n                label: \"Top Level\",\n                reference: this.get(\"templateData\")\n            });\n            this.locationFinder(this.get(\"mergedArray\"), locArray, \"-\");\n            return locArray;\n        }.property(\"templateData.@each.inputtype\",\"flipbit\"),\n        locationFinder: function(fields, locArray, dashes) {\n            var self = this;\n            fields.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    locArray.pushObject({\n                        id: item.id,\n                        label: dashes + ' ' + item.label,\n                        reference: item.fields\n                    });\n                    self.locationFinder(item.fields, locArray, dashes + '-');\n                }\n            });\n        },\n        templateData: function() {\n            // getter\n            console.log(\"triggered template read\");\n            var templateObject = Ember.A();\n            var self = this;\n            var templateName = this.get('params.template');\n            var params = '&q={\"data.recordType\":\"' + templateName + '\"}&f={\"_id\":1,\"tstamp\":1,\"data\":1}';\n            Ember.$.ajax({\n                url: flowURL + '/objectstore?Authorization=' + sessionKey + params,\n                async: false,\n                success: function(data) {\n                    console.log(\"read success\");\n                    console.log(data);\n                    templateObject = data.RESPONSE.objs[0].data.vars.fields;\n                    self.templateId = data.RESPONSE.objs[0]._id;\n                    self.templateVars = data.RESPONSE.objs[0].data.vars;\n                    self.templateRecType = data.RESPONSE.objs[0].data.recordType;\n                }\n            });\n            return templateObject;\n        }.property(),\n        mergedArray: function() {\n            console.log(\"triggered mergedArray\");\n            var mergedArray = Ember.A();\n            if (!this.get(\"facts.data.vars.fields\")) {\n                console.log(\"facts.data.vars.fields does NOT exist.\");\n                var userFieldsArray = Ember.A();\n            }\n            else {\n                console.log(\"facts.data.vars.fields DOES exist.\");\n                var userFieldsArray = this.get(\"facts.data.vars.fields\");\n            }\n            var fieldsArray = this.get(\"templateData\");\n            if (fieldsArray) {\n                this.arrayMerger(fieldsArray, userFieldsArray, mergedArray);\n            }\n            return mergedArray;\n        }.property(\"templateData.[]\", \"flipbit\"),\n        // Recursive function helper for mergedArray property\n        arrayMerger: function(fieldsArray, userFieldsArray, mergedArray) {\n            var self = this;\n            fieldsArray.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    var arr = $.grep(userFieldsArray, function(n, i) {\n                        return (n.id === item.id);\n                    });\n                    if (arr.length > 0) {\n                        var subMergedArray = Ember.A();\n                        self.arrayMerger(item.fields, arr[0].fields, subMergedArray);\n                        item.fields.set(subMergedArray);\n//                        item.fields = subMergedArray;\n                    }\n                    mergedArray.pushObject(item);\n                }\n                else {\n                    if (!item.value) {\n                        var arr = $.grep(userFieldsArray, function(n, i) {\n                            return (n.id === item.id)\n                        });\n                        if ((arr.length > 0) && arr[0].value) {\n                            item.value = arr[0].value;\n                        } else\n                            item.value = \"\";\n                    }\n                    mergedArray.pushObject(item);\n                }\n            });\n        },\n        updateValue: function(fields, name, value) {\n            var self = this;\n            var arr = $.grep(fields, function(n, i) {\n                return (n.id === name);\n            });\n            if (arr.length > 0) {\n                arr[0].value = value;\n                return true;\n            }\n            else {\n                fields.some(function(item) {\n                    if (item.inputtype === \"category\") {\n                        //recurse through subFields\n                        self.updateValue(item.fields, name, value);\n                    }\n                });\n            }\n            return false;\n        },\n        clearValue: function(fields) {\n            var self = this;\n            fields.forEach(function(item) {\n                delete item.value;\n                if (item.inputtype === \"category\") {\n                    //recurse through subFields\n                    self.clearValue(item.fields);\n                }\n            });\n        },\n        isCancelable: function() {\n            return (this.get(\"isInserting\"));\n        }.property(\"isInserting\"),\n        buttonText: function() {\n            if (this.get(\"isInserting\"))\n                return \"Save\";\n            else\n                return\"Edit\";\n        }.property(\"isInserting\", \"isEnum\"),\n        actions: {\n            openModal: function(name) {\n                this.get('modals').open(name);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('submit');\n                this.set(\"isSubmitting\", true );\n//                if (this.get(\"hasTemplateChanges\"))\n//                    this.updateTemplate();\n                this.send('userUpdateAction');\n                // here you could perform your actions like persisting to the server or so\n//                $('#emberForm').submit();\n                return true;\n            },\n            insertAction: function () {\n                console.log(\"insertAction\");\n                if (this.get(\"isInserting\")) {\n                    this.set(\"isInserting\", false);\n                    var loc = this.get(\"newLocation\");\n                    loc.pushObject(this.get(\"newObject\"));\n                    // This is here to trigger computed properties when there is a change to a subfield array\n                    if (loc != this.get(\"templateData\"))\n                        this.set(\"flipbit\", !this.get(\"flipbit\"));\n                    this.set(\"hasTemplateChanges\", true);\n                    this.send('templateUpdateAction');\n                }\n                else {\n                    this.set(\"isInserting\", true);\n                }\n            },\n            cancelAction: function() {\n                this.set(\"isInserting\", false);\n            },\n            addAction: function(id, label, array) {\n                array.pushObject({\n                    id: id,\n                    label: label\n                });\n            },\n            templateUpdateAction: function() {\n                var vars = this.get(\"templateVars\");\n                var fields = this.get(\"templateData\");\n                var self = this;\n                this.clearValue(fields);\n                vars.fields.set(fields);\n                var updateObjStore = {\n                    recordType: this.get(\"templateRecType\"),\n                    vars: vars\n                };\n                var self = this;\n                Ember.$.ajax(flowURL + '/objectstore/' + this.get('templateId') + '?Authorization=' + sessionKey, {\n                    type: 'PATCH',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        self.set(\"hasTemplateChanges\", false);\n                        console.log(self);\n                        // this.get('modals').open('picker');\n                        alert(\"Template Update Success\");\n                    },\n                    error: function(data) {\n                        alert(\"Template Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            },\n            userUpdateAction: function() {\n                if (this.get(\"dossier_exists\")) {\n                    console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                    var self = this;\n                    var vars = this.get(\"facts.data.vars\");\n                    var fields = this.get(\"templateData\");\n//                var fields = this.get(\"mergedArray\");\n                    // Sync the values from the form with the values in mergedArray\n                    var fieldValuePairs = $('#dossier_form').serializeArray();\n                    $.each(fieldValuePairs, function(index, fieldValuePair) {\n                        self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                        console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                    });\n                    var updateObjStore = {\n                        recordType: this.get(\"facts.data.recordType\"),\n                        vars: {\n                            fields: fields,\n                            user: this.get(\"facts.data.vars.user\")\n                        }\n                    };\n                    console.log(updateObjStore);\n                    Ember.$.ajax(flowURL + '/objectstore/' + this.get(\"facts.apidata_data._id\") + '?Authorization=' + sessionKey, {\n                        type: 'PATCH',\n                        async: false,\n                        data:  JSON.stringify(updateObjStore),\n                        dataType: 'json',\n                        contentType: 'application/json',\n                        context: this,\n                        success: function(data) {\n                            alert(\"User Update Success\");\n                        },\n                        error: function(data) {\n                            alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                        }\n                    });\n                }\n                else {\n                    this.send(\"userCreateAction\");\n                }\n            },\n            userCreateAction: function() {\n                console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                var self = this;\n                var vars = this.get(\"facts.data.vars\");\n                var fields = this.get(\"templateData\");\n                var facts = this.get(\"facts\");\n//                var fields = this.get(\"mergedArray\");\n                // Sync the values from the form with the values in mergedArray\n                var fieldValuePairs = $('#dossier_form').serializeArray();\n                $.each(fieldValuePairs, function(index, fieldValuePair) {\n                    self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                    console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                });\n                var updateObjStore = {\n                    recordType: this.get(\"facts.data.recordType\"),\n                    vars: {\n                        fields: fields,\n                        user: this.get(\"facts.objId\")\n                    }\n                };\n                console.log(updateObjStore);\n                Ember.$.ajax(flowURL + '/objectstore?Authorization=' + sessionKey, {\n                    type: 'POST',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        alert(\"User Saved Success\");\n                        console.log(data);\n                        this.set(\"dossier_exists\", true);\n                        var id = {\n                            \"_id\": data.RESPONSE.objId\n                        }\n                        Ember.set(facts, \"apidata_data\", id);\n                    },\n                    error: function(data) {\n                        alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            }\n        }\n    });\n    App.ModalsService = Ember.Service.extend({\n        containerView: null,\n        open: function(name) {\n            var Modal = this.container.lookupFactory('component:'+name+'-modal');\n            var modal = Modal.create();\n            this.get('containerView').pushObject(modal);\n        },\n        close: function() {\n            this.get('containerView').popObject();\n        }\n    });\n\n    App.MyModalsComponent = Ember.ContainerView.extend({\n        elementId: 'my-modals',\n        modals: Ember.inject.service(),\n        didInsertElement: function() {\n            this.set('modals.containerView', this);\n        }\n    });\n\n    App.BaseModalComponent = Ember.Component.extend({\n        modals: Ember.inject.service(),\n        actions: {\n            close: function() {\n                this.get('modals').close();\n            }\n        }\n    });\n\n    App.PickerModalComponent = App.BaseModalComponent.extend({\n        layoutName: 'components/picker-modal',\n        pickerWrapper: null,\n        pickerData: null,\n        classNames: ['input-small'],\n        format: \"l\",\n        placeholder: Ember.computed.alias('format'),\n        iconOnRight: true,\n\n        didInsertElement: function () {\n            var self = this;\n            var format = this.get('format');\n\n            var pickerWrapper = this.$().datetimepicker({\n                format: 'l'\n                //viewMode: 'years'\n                //minDate: \"1/1/\" + (moment().year() - 2).toString()\n            });\n            this.set('pickerWrapper', pickerWrapper);\n\n            var pickerData = pickerWrapper.data(\"DateTimePicker\");\n            this.set('pickerData', pickerData);\n\n            if(this.get('datetime'))\n                pickerData.setDate(this.get('datetime'));\n\n            pickerWrapper.on('dp.change', function (ev) {\n                //self.sendAction('action', ev.format());\n                self.set('datetime', ev.date);\n            });\n        },\n\n        datetimeChanged: function () {\n            // get model datetime\n            var modelDatetime = this.get('datetime');\n            // get picker datetime\n            var picker = this.get('pickerData');\n            var pickerDatetime = picker.getDate();\n            // if not the same the overwrite model over picker\n            if (modelDatetime != pickerDatetime) {\n                picker.setDate(modelDatetime);\n            }\n            picker.hide();\n        }.observes('datetime')\n    });\n\n    function createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        // labelClass is a CSS class name for control labels\n        // fieldClass is a CSS class name applied to controls themselves\n        // subLabelClass is a CSS class name applied to the label for a subCategory - will likely provide a bolding\n        // subClass is a CSS class name applied to the inner div for a subCategory - will likely provide a nested view\n        // fieldId is the control id value\n        // fieldLabel is the Label value\n        // opts is an object which is expected to have optional properties {value, inputtype, options, results}\n        var returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><strong>' + fieldLabel + '</strong></label>';\n        returnHTML = returnHTML + '<div class=\"controls\">';\n        // var tvalue = \"\";\n        // console.log(opts.value);\n        // if(opts.value !== null)\n        // {\n        //     tvalue = opts.value;\n        // }\n        // else {\n        //     tvalue = \"\";\n        // }\n        if (typeof opts.inputtype === \"undefined\") opts.inputtype=\"default\";\n        switch (opts.inputtype)\n        {\n            case 'string':\n            case 'long':\n                //Basic Input\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'date':\n                // returnHTML = returnHTML + \"\";\n                break;\n            case 'image':\n                returnHTML = returnHTML + \"<div class='show-image' style='width:35%'><img src='\" + opts.value + \"' style='width:100%; height:300px' /><input class='\" + fieldClass +\" update' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"' style='width: 100%'></div>\";\n                break;\n            case 'password':\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='password' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'enum':\n                //Basic Select Return\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                for (i = 0; i < opts.options.length; i++) {\n                    var selected = \"\";\n                    if (opts.options[i].id == opts.value)\n                    {\n                        selected = \"selected\";\n                    }\n                    returnHTML = returnHTML + \"<option \" + selected +\" value='\" + opts.options[i].id +  \"'>\" + opts.options[i].label + \"</option>\";\n                }\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'boolean':\n                //Basic boolean...\n                var isTrue = \"\";\n                var isFalse = \"\";\n                if((opts.value == 'true') || (opts.value === true))\n                {\n                    isTrue = \"selected\"; //checked old way\n                }else{\n                    isFalse = \"selected\"; //checked old way\n                }\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                returnHTML = returnHTML + \"<option \" + isTrue +\" value='True'>True</option>\";\n                returnHTML = returnHTML + \"<option \" + isFalse +\" value='False'>False</option>\";\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'category':\n                // returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><h3>' + fieldLabel + '</h3></label>';\n                // returnHTML = returnHTML + '<div class=\"' + subClass + '\">';\n                returnHTML = \"<div class='white-text' id='collapseToggle'>\";\n                returnHTML = returnHTML + \"<h3 href='#\" + fieldId + \"' style='cursor:pointer;' data-toggle='collapse' class='collapsed' aria-expanded='false'>\" + fieldLabel + \"</h3>\";\n                returnHTML = returnHTML + \"<div id=\" + fieldId + \" aria-expanded='false' class='\" + subClass + \" collapse'>\";\n                opts.fields.forEach(function(opt) {\n                    returnHTML = returnHTML + createInput(labelClass, fieldClass, subLabelClass, subClass, opt.id, opt.label, opt);\n                });\n                returnHTML = returnHTML + \"</div>\";\n                break;\n            default:\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' disabled=true value='\" + opts.value + \"'>\";\n                break;\n        }\n        returnHTML = returnHTML + '</div>';\n        return new Handlebars.SafeString(returnHTML);\n    };\n    Ember.Handlebars.registerBoundHelper('createInput', function(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        //expects opts: {id, label, value, inputtype, options}\n        return createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts);\n    });\n</script>\n\n\n<script type=\"text/x-handlebars\" data-template-name=\"auto\">\n    <div class=\"panel panel-info\">\n        <div class=\"panel-heading\" style=\"font-weight:bolder;\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accord\" href=\"#collapseB\">{{params.title}}</a>\n            </h4>\n        </div>\n        <div id=\"collapseB\" class=\"panel-collapse collapse in\">\n            <div id=\"body\" class=\"panel-body content\" id='accord'>\n                {{#if isAdmin}}\n                <div class=\"text-right\" style=\"margin-bottom: 5px;\">\n                    <button id=\"insert\" class=\"btn btn-warning\" {{action 'insertAction' target=\"controller\"}}>{{controller.buttonText}}</button>\n                    {{#if controller.isCancelable}}<button id=\"insert\" class=\"btn btn-danger\" {{action 'cancelAction' target=\"controller\"}}>Cancel</button>{{/if}}\n                </div>\n                {{#if controller.isInserting}}\n                <div style=\"outline: 1px solid darkorange; background: orange;\">\n                    {{partial \"newfield\"}}\n                    <div align=\"center\" style=\"padding: 15px;\">\n                        {{#if hasTemplateChanges}}\n                        <button id=\"save\" class=\"btn btn-primary\" {{action 'templateUpdateAction' target=\"controller\"}}>Save Template</button>\n                        {{/if}}\n                    </div>\n                </div>\n                {{/if}}\n                {{/if}}\n                <form id=\"dossier_form\">\n                    {{#each field in controller.mergedArray}}\n                    <div class=\"control-group\">\n                        {{createInput \"control-label\" \"form-control\" \"h2\" \"panel-body\" field.id field.label field}}\n                    </div>\n                    {{/each}}\n                    <div class=\"control-group\">\n                        {{my-modals}}\n                    </div>\n                </form>\n                <div align=\"center\">\n                    <button id=\"save\" class=\"btn btn-primary\" {{action 'userUpdateAction' target=\"controller\"}}>Save</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"_newfield\">\n    <div style=\"padding: 10px;\">\n        <label class=\"control-label\" for=\"newLocation\"><h3>Field Location</h3></label>\n        {{{view \"select\" content=controller.locations class=\"form-control\" id=\"newLocation\"\n        value=controller.newLocation optionValuePath=\"content.reference\" optionLabelPath=\"content.label\"}}}\n        <label class=\"control-label\" for=\"newLabel\"><h3>Field Label</h3></label>\n        {{input class=\"form-control\" id=\"newLabel\" value=controller.newLabel}}\n        <label class=\"control-label\" for=\"newId\"><h3>Unique Field Id</h3></label>\n        {{input class=\"form-control\" id=\"newId\" value=controller.newId}}\n        <label class=\"control-label\" for=\"newType\"><h3>Field Type</h3></label>\n        {{{view \"select\" content=controller.selectableTypes class=\"form-control\" id=\"newType\"\n        value=controller.newType optionValuePath=\"content.id\" optionLabelPath=\"content.label\"}}}\n        {{#if isEnum}}\n        <div class=\"panel-body\">\n            <h4>New Dropdown Options</h4><br>\n            <ul>\n                {{#each option in controller.newEnumOptions}}\n                <li>{{option.id}} - {{option.label}}</li>\n                {{/each}}\n            </ul>\n            <label class=\"control-label\" for=\"newOptionLabel\"><h3>Option Label</h3></label>\n            {{input class=\"form-control\" id=\"newOptionLabel\" value=controller.newOptionLabel}}\n            <label class=\"control-label\" for=\"newOptionId\"><h3>Unique Option Id</h3></label>\n            {{input class=\"form-control\" id=\"newOptionId\" value=controller.newOptionId}}\n            <div align=\"center\">\n                <button id=\"add\" class=\"btn btn-primary\" {{action 'addAction' controller.newOptionId controller.newOptionLabel controller.newEnumOptions target=\"controller\"}}>Add</button>\n            </div>\n        </div>\n        {{/if}}\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"components/picker-modal\">\n    <div class=\"form-group\">\n        <div class='input-group date'>\n            {{#if iconOnRight}}\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            {{else}}\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            {{/if}}\n        </div>\n    </div>\n</script>","facts":{}},"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},{"_id":{"$oid":"566dbecd1a30ff0918931759"},"id":"566dbecd1a30ff0918931759","owner":{},"recType":"app","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032845410,"createDate":{"$date":1450032845410},"origin":{"id":"5665f0553800005601c7b791","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","createDate":1450032845410,"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},"data":{"form":"<script type='text/javascript'>\n    App.AutoController = Ember.Controller.extend({\n        modals: Ember.inject.service(),\n        facts: jsonTask.FACTS,\n        isInserting: false,\n        flipbit: true,\n        changeFlag: false,\n        newId: function() {\n            return this.get(\"newLabel\").replace(/\\s+/g, '');\n        }.property(\"newLabel\"),\n        newLabel: \"\",\n        newType: \"string\",\n        newOptionLabel: \"\",\n        newOptionId: function() {\n            return this.get(\"newOptionLabel\").replace(/\\s+/g, '');\n        }.property(\"newOptionLabel\"),\n        newEnumOptions: [],\n        hasTemplateChanges: false,\n        hasUserChanges: false,\n        init: function() {\n            var facts = this.get(\"facts\");\n            // var modals = this.get('modals');\n            if(facts.data != null) {\n                this.set(\"dossier_exists\", true);\n            }\n            else {\n                this.set(\"dossier_exists\", false);\n                var objType = this.get('params.objTypeId');\n                var type = {\"recordType\":objType};\n//                var type = {\"recordType\":\"com.comcast.dossier_data\"};\n                var objid = {\n                    \"user\":facts.objId\n                }\n                Ember.set(facts, \"data\", type);\n                Ember.set(facts.data, \"vars\", objid);\n            }\n            console.log(facts);\n            // console.log(modals);\n        },\n        newLocation: function() {\n            return this.get(\"templateData\");\n        }.property(),\n        isEnum: function() {\n            return (this.get(\"newType\") === \"enum\");\n        }.property(\"newType\"),\n        isAdmin: function() {\n            return ($.inArray(this.get(\"facts.wf_currentAssignee\"), this.get(\"facts.admins\")) > 0);\n        }.property(),\n        newObject: function() {\n            var obj = {\n                id: this.get(\"newId\"),\n                label: this.get(\"newLabel\"),\n                value: \"\",\n                inputtype: this.get(\"newType\"),\n                fields:[],\n                options:this.get(\"newEnumOptions\")\n            };\n            return obj;\n        }.property(\"newId\",\"newLabel\",\"newType\",\"newLocation\"),\n        selectableTypes: [\n            {\"id\":\"string\",\"label\":\"Textbox\"},\n            {\"id\":\"enum\",\"label\":\"Dropdown\"},\n            {\"id\":\"boolean\",\"label\":\"True/False\"},\n            {\"id\":\"category\",\"label\":\"Category\"},\n            {\"id\":\"image\",\"label\":\"Image\"},\n            {\"id\":\"date\",\"label\":\"Date\"},\n            {\"id\":\"password\",\"label\":\"Password\"}\n        ],\n        locations: function() {\n            console.log(\"triggered locations\");\n            var locArray = Ember.A();\n            locArray.pushObject({\n                id: \"top\",\n                label: \"Top Level\",\n                reference: this.get(\"templateData\")\n            });\n            this.locationFinder(this.get(\"mergedArray\"), locArray, \"-\");\n            return locArray;\n        }.property(\"templateData.@each.inputtype\",\"flipbit\"),\n        locationFinder: function(fields, locArray, dashes) {\n            var self = this;\n            fields.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    locArray.pushObject({\n                        id: item.id,\n                        label: dashes + ' ' + item.label,\n                        reference: item.fields\n                    });\n                    self.locationFinder(item.fields, locArray, dashes + '-');\n                }\n            });\n        },\n        templateData: function() {\n            // getter\n            console.log(\"triggered template read\");\n            var templateObject = Ember.A();\n            var self = this;\n            var templateName = this.get('params.template');\n            var params = '&q={\"data.recordType\":\"' + templateName + '\"}&f={\"_id\":1,\"tstamp\":1,\"data\":1}';\n            Ember.$.ajax({\n                url: flowURL + '/objectstore?Authorization=' + sessionKey + params,\n                async: false,\n                success: function(data) {\n                    console.log(\"read success\");\n                    console.log(data);\n                    templateObject = data.RESPONSE.objs[0].data.vars.fields;\n                    self.templateId = data.RESPONSE.objs[0]._id;\n                    self.templateVars = data.RESPONSE.objs[0].data.vars;\n                    self.templateRecType = data.RESPONSE.objs[0].data.recordType;\n                }\n            });\n            return templateObject;\n        }.property(),\n        mergedArray: function() {\n            console.log(\"triggered mergedArray\");\n            var mergedArray = Ember.A();\n            if (!this.get(\"facts.data.vars.fields\")) {\n                console.log(\"facts.data.vars.fields does NOT exist.\");\n                var userFieldsArray = Ember.A();\n            }\n            else {\n                console.log(\"facts.data.vars.fields DOES exist.\");\n                var userFieldsArray = this.get(\"facts.data.vars.fields\");\n            }\n            var fieldsArray = this.get(\"templateData\");\n            if (fieldsArray) {\n                this.arrayMerger(fieldsArray, userFieldsArray, mergedArray);\n            }\n            return mergedArray;\n        }.property(\"templateData.[]\", \"flipbit\"),\n        // Recursive function helper for mergedArray property\n        arrayMerger: function(fieldsArray, userFieldsArray, mergedArray) {\n            var self = this;\n            fieldsArray.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    var arr = $.grep(userFieldsArray, function(n, i) {\n                        return (n.id === item.id);\n                    });\n                    if (arr.length > 0) {\n                        var subMergedArray = Ember.A();\n                        self.arrayMerger(item.fields, arr[0].fields, subMergedArray);\n                        item.fields.set(subMergedArray);\n//                        item.fields = subMergedArray;\n                    }\n                    mergedArray.pushObject(item);\n                }\n                else {\n                    if (!item.value) {\n                        var arr = $.grep(userFieldsArray, function(n, i) {\n                            return (n.id === item.id)\n                        });\n                        if ((arr.length > 0) && arr[0].value) {\n                            item.value = arr[0].value;\n                        } else\n                            item.value = \"\";\n                    }\n                    mergedArray.pushObject(item);\n                }\n            });\n        },\n        updateValue: function(fields, name, value) {\n            var self = this;\n            var arr = $.grep(fields, function(n, i) {\n                return (n.id === name);\n            });\n            if (arr.length > 0) {\n                arr[0].value = value;\n                return true;\n            }\n            else {\n                fields.some(function(item) {\n                    if (item.inputtype === \"category\") {\n                        //recurse through subFields\n                        self.updateValue(item.fields, name, value);\n                    }\n                });\n            }\n            return false;\n        },\n        clearValue: function(fields) {\n            var self = this;\n            fields.forEach(function(item) {\n                delete item.value;\n                if (item.inputtype === \"category\") {\n                    //recurse through subFields\n                    self.clearValue(item.fields);\n                }\n            });\n        },\n        isCancelable: function() {\n            return (this.get(\"isInserting\"));\n        }.property(\"isInserting\"),\n        buttonText: function() {\n            if (this.get(\"isInserting\"))\n                return \"Save\";\n            else\n                return\"Edit\";\n        }.property(\"isInserting\", \"isEnum\"),\n        actions: {\n            openModal: function(name) {\n                this.get('modals').open(name);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('submit');\n                this.set(\"isSubmitting\", true );\n//                if (this.get(\"hasTemplateChanges\"))\n//                    this.updateTemplate();\n                this.send('userUpdateAction');\n                // here you could perform your actions like persisting to the server or so\n//                $('#emberForm').submit();\n                return true;\n            },\n            insertAction: function () {\n                console.log(\"insertAction\");\n                if (this.get(\"isInserting\")) {\n                    this.set(\"isInserting\", false);\n                    var loc = this.get(\"newLocation\");\n                    loc.pushObject(this.get(\"newObject\"));\n                    // This is here to trigger computed properties when there is a change to a subfield array\n                    if (loc != this.get(\"templateData\"))\n                        this.set(\"flipbit\", !this.get(\"flipbit\"));\n                    this.set(\"hasTemplateChanges\", true);\n                    this.send('templateUpdateAction');\n                }\n                else {\n                    this.set(\"isInserting\", true);\n                }\n            },\n            cancelAction: function() {\n                this.set(\"isInserting\", false);\n            },\n            addAction: function(id, label, array) {\n                array.pushObject({\n                    id: id,\n                    label: label\n                });\n            },\n            templateUpdateAction: function() {\n                var vars = this.get(\"templateVars\");\n                var fields = this.get(\"templateData\");\n                var self = this;\n                this.clearValue(fields);\n                vars.fields.set(fields);\n                var updateObjStore = {\n                    recordType: this.get(\"templateRecType\"),\n                    vars: vars\n                };\n                var self = this;\n                Ember.$.ajax(flowURL + '/objectstore/' + this.get('templateId') + '?Authorization=' + sessionKey, {\n                    type: 'PATCH',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        self.set(\"hasTemplateChanges\", false);\n                        console.log(self);\n                        // this.get('modals').open('picker');\n                        alert(\"Template Update Success\");\n                    },\n                    error: function(data) {\n                        alert(\"Template Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            },\n            userUpdateAction: function() {\n                if (this.get(\"dossier_exists\")) {\n                    console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                    var self = this;\n                    var vars = this.get(\"facts.data.vars\");\n                    var fields = this.get(\"templateData\");\n//                var fields = this.get(\"mergedArray\");\n                    // Sync the values from the form with the values in mergedArray\n                    var fieldValuePairs = $('#dossier_form').serializeArray();\n                    $.each(fieldValuePairs, function(index, fieldValuePair) {\n                        self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                        console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                    });\n                    var updateObjStore = {\n                        recordType: this.get(\"facts.data.recordType\"),\n                        vars: {\n                            fields: fields,\n                            user: this.get(\"facts.data.vars.user\")\n                        }\n                    };\n                    console.log(updateObjStore);\n                    Ember.$.ajax(flowURL + '/objectstore/' + this.get(\"facts.apidata_data._id\") + '?Authorization=' + sessionKey, {\n                        type: 'PATCH',\n                        async: false,\n                        data:  JSON.stringify(updateObjStore),\n                        dataType: 'json',\n                        contentType: 'application/json',\n                        context: this,\n                        success: function(data) {\n                            alert(\"User Update Success\");\n                        },\n                        error: function(data) {\n                            alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                        }\n                    });\n                }\n                else {\n                    this.send(\"userCreateAction\");\n                }\n            },\n            userCreateAction: function() {\n                console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                var self = this;\n                var vars = this.get(\"facts.data.vars\");\n                var fields = this.get(\"templateData\");\n                var facts = this.get(\"facts\");\n//                var fields = this.get(\"mergedArray\");\n                // Sync the values from the form with the values in mergedArray\n                var fieldValuePairs = $('#dossier_form').serializeArray();\n                $.each(fieldValuePairs, function(index, fieldValuePair) {\n                    self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                    console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                });\n                var updateObjStore = {\n                    recordType: this.get(\"facts.data.recordType\"),\n                    vars: {\n                        fields: fields,\n                        user: this.get(\"facts.objId\")\n                    }\n                };\n                console.log(updateObjStore);\n                Ember.$.ajax(flowURL + '/objectstore?Authorization=' + sessionKey, {\n                    type: 'POST',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        alert(\"User Saved Success\");\n                        console.log(data);\n                        this.set(\"dossier_exists\", true);\n                        var id = {\n                            \"_id\": data.RESPONSE.objId\n                        }\n                        Ember.set(facts, \"apidata_data\", id);\n                    },\n                    error: function(data) {\n                        alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            }\n        }\n    });\n    App.ModalsService = Ember.Service.extend({\n        containerView: null,\n        open: function(name) {\n            var Modal = this.container.lookupFactory('component:'+name+'-modal');\n            var modal = Modal.create();\n            this.get('containerView').pushObject(modal);\n        },\n        close: function() {\n            this.get('containerView').popObject();\n        }\n    });\n\n    App.MyModalsComponent = Ember.ContainerView.extend({\n        elementId: 'my-modals',\n        modals: Ember.inject.service(),\n        didInsertElement: function() {\n            this.set('modals.containerView', this);\n        }\n    });\n\n    App.BaseModalComponent = Ember.Component.extend({\n        modals: Ember.inject.service(),\n        actions: {\n            close: function() {\n                this.get('modals').close();\n            }\n        }\n    });\n\n    App.PickerModalComponent = App.BaseModalComponent.extend({\n        layoutName: 'components/picker-modal',\n        pickerWrapper: null,\n        pickerData: null,\n        classNames: ['input-small'],\n        format: \"l\",\n        placeholder: Ember.computed.alias('format'),\n        iconOnRight: true,\n\n        didInsertElement: function () {\n            var self = this;\n            var format = this.get('format');\n\n            var pickerWrapper = this.$().datetimepicker({\n                format: 'l'\n                //viewMode: 'years'\n                //minDate: \"1/1/\" + (moment().year() - 2).toString()\n            });\n            this.set('pickerWrapper', pickerWrapper);\n\n            var pickerData = pickerWrapper.data(\"DateTimePicker\");\n            this.set('pickerData', pickerData);\n\n            if(this.get('datetime'))\n                pickerData.setDate(this.get('datetime'));\n\n            pickerWrapper.on('dp.change', function (ev) {\n                //self.sendAction('action', ev.format());\n                self.set('datetime', ev.date);\n            });\n        },\n\n        datetimeChanged: function () {\n            // get model datetime\n            var modelDatetime = this.get('datetime');\n            // get picker datetime\n            var picker = this.get('pickerData');\n            var pickerDatetime = picker.getDate();\n            // if not the same the overwrite model over picker\n            if (modelDatetime != pickerDatetime) {\n                picker.setDate(modelDatetime);\n            }\n            picker.hide();\n        }.observes('datetime')\n    });\n\n    function createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        // labelClass is a CSS class name for control labels\n        // fieldClass is a CSS class name applied to controls themselves\n        // subLabelClass is a CSS class name applied to the label for a subCategory - will likely provide a bolding\n        // subClass is a CSS class name applied to the inner div for a subCategory - will likely provide a nested view\n        // fieldId is the control id value\n        // fieldLabel is the Label value\n        // opts is an object which is expected to have optional properties {value, inputtype, options, results}\n        var returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><strong>' + fieldLabel + '</strong></label>';\n        returnHTML = returnHTML + '<div class=\"controls\">';\n        // var tvalue = \"\";\n        // console.log(opts.value);\n        // if(opts.value !== null)\n        // {\n        //     tvalue = opts.value;\n        // }\n        // else {\n        //     tvalue = \"\";\n        // }\n        if (typeof opts.inputtype === \"undefined\") opts.inputtype=\"default\";\n        switch (opts.inputtype)\n        {\n            case 'string':\n            case 'long':\n                //Basic Input\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'date':\n                // returnHTML = returnHTML + \"\";\n                break;\n            case 'image':\n                returnHTML = returnHTML + \"<div class='show-image' style='width:35%'><img src='\" + opts.value + \"' style='width:100%; height:300px' /><input class='\" + fieldClass +\" update' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"' style='width: 100%'></div>\";\n                break;\n            case 'password':\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='password' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'enum':\n                //Basic Select Return\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                for (i = 0; i < opts.options.length; i++) {\n                    var selected = \"\";\n                    if (opts.options[i].id == opts.value)\n                    {\n                        selected = \"selected\";\n                    }\n                    returnHTML = returnHTML + \"<option \" + selected +\" value='\" + opts.options[i].id +  \"'>\" + opts.options[i].label + \"</option>\";\n                }\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'boolean':\n                //Basic boolean...\n                var isTrue = \"\";\n                var isFalse = \"\";\n                if((opts.value == 'true') || (opts.value === true))\n                {\n                    isTrue = \"selected\"; //checked old way\n                }else{\n                    isFalse = \"selected\"; //checked old way\n                }\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                returnHTML = returnHTML + \"<option \" + isTrue +\" value='True'>True</option>\";\n                returnHTML = returnHTML + \"<option \" + isFalse +\" value='False'>False</option>\";\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'category':\n                // returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><h3>' + fieldLabel + '</h3></label>';\n                // returnHTML = returnHTML + '<div class=\"' + subClass + '\">';\n                returnHTML = \"<div class='white-text' id='collapseToggle'>\";\n                returnHTML = returnHTML + \"<h3 href='#\" + fieldId + \"' style='cursor:pointer;' data-toggle='collapse' class='collapsed' aria-expanded='false'>\" + fieldLabel + \"</h3>\";\n                returnHTML = returnHTML + \"<div id=\" + fieldId + \" aria-expanded='false' class='\" + subClass + \" collapse'>\";\n                opts.fields.forEach(function(opt) {\n                    returnHTML = returnHTML + createInput(labelClass, fieldClass, subLabelClass, subClass, opt.id, opt.label, opt);\n                });\n                returnHTML = returnHTML + \"</div>\";\n                break;\n            default:\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' disabled=true value='\" + opts.value + \"'>\";\n                break;\n        }\n        returnHTML = returnHTML + '</div>';\n        return new Handlebars.SafeString(returnHTML);\n    };\n    Ember.Handlebars.registerBoundHelper('createInput', function(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        //expects opts: {id, label, value, inputtype, options}\n        return createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts);\n    });\n</script>\n\n\n<script type=\"text/x-handlebars\" data-template-name=\"auto\">\n    <div class=\"panel panel-info\">\n        <div class=\"panel-heading\" style=\"font-weight:bolder;\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accord\" href=\"#collapseB\">{{params.title}}</a>\n            </h4>\n        </div>\n        <div id=\"collapseB\" class=\"panel-collapse collapse in\">\n            <div id=\"body\" class=\"panel-body content\" id='accord'>\n                {{#if isAdmin}}\n                <div class=\"text-right\" style=\"margin-bottom: 5px;\">\n                    <button id=\"insert\" class=\"btn btn-warning\" {{action 'insertAction' target=\"controller\"}}>{{controller.buttonText}}</button>\n                    {{#if controller.isCancelable}}<button id=\"insert\" class=\"btn btn-danger\" {{action 'cancelAction' target=\"controller\"}}>Cancel</button>{{/if}}\n                </div>\n                {{#if controller.isInserting}}\n                <div style=\"outline: 1px solid darkorange; background: orange;\">\n                    {{partial \"newfield\"}}\n                    <div align=\"center\" style=\"padding: 15px;\">\n                        {{#if hasTemplateChanges}}\n                        <button id=\"save\" class=\"btn btn-primary\" {{action 'templateUpdateAction' target=\"controller\"}}>Save Template</button>\n                        {{/if}}\n                    </div>\n                </div>\n                {{/if}}\n                {{/if}}\n                <form id=\"dossier_form\">\n                    {{#each field in controller.mergedArray}}\n                    <div class=\"control-group\">\n                        {{createInput \"control-label\" \"form-control\" \"h2\" \"panel-body\" field.id field.label field}}\n                    </div>\n                    {{/each}}\n                    <div class=\"control-group\">\n                        {{my-modals}}\n                    </div>\n                </form>\n                <div align=\"center\">\n                    <button id=\"save\" class=\"btn btn-primary\" {{action 'userUpdateAction' target=\"controller\"}}>Save</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"_newfield\">\n    <div style=\"padding: 10px;\">\n        <label class=\"control-label\" for=\"newLocation\"><h3>Field Location</h3></label>\n        {{{view \"select\" content=controller.locations class=\"form-control\" id=\"newLocation\"\n        value=controller.newLocation optionValuePath=\"content.reference\" optionLabelPath=\"content.label\"}}}\n        <label class=\"control-label\" for=\"newLabel\"><h3>Field Label</h3></label>\n        {{input class=\"form-control\" id=\"newLabel\" value=controller.newLabel}}\n        <label class=\"control-label\" for=\"newId\"><h3>Unique Field Id</h3></label>\n        {{input class=\"form-control\" id=\"newId\" value=controller.newId}}\n        <label class=\"control-label\" for=\"newType\"><h3>Field Type</h3></label>\n        {{{view \"select\" content=controller.selectableTypes class=\"form-control\" id=\"newType\"\n        value=controller.newType optionValuePath=\"content.id\" optionLabelPath=\"content.label\"}}}\n        {{#if isEnum}}\n        <div class=\"panel-body\">\n            <h4>New Dropdown Options</h4><br>\n            <ul>\n                {{#each option in controller.newEnumOptions}}\n                <li>{{option.id}} - {{option.label}}</li>\n                {{/each}}\n            </ul>\n            <label class=\"control-label\" for=\"newOptionLabel\"><h3>Option Label</h3></label>\n            {{input class=\"form-control\" id=\"newOptionLabel\" value=controller.newOptionLabel}}\n            <label class=\"control-label\" for=\"newOptionId\"><h3>Unique Option Id</h3></label>\n            {{input class=\"form-control\" id=\"newOptionId\" value=controller.newOptionId}}\n            <div align=\"center\">\n                <button id=\"add\" class=\"btn btn-primary\" {{action 'addAction' controller.newOptionId controller.newOptionLabel controller.newEnumOptions target=\"controller\"}}>Add</button>\n            </div>\n        </div>\n        {{/if}}\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"components/picker-modal\">\n    <div class=\"form-group\">\n        <div class='input-group date'>\n            {{#if iconOnRight}}\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            {{else}}\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            {{/if}}\n        </div>\n    </div>\n</script>","facts":{}},"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},{"_id":{"$oid":"566dbecd1a30ff0918931759"},"id":"566dbecd1a30ff0918931759","owner":{},"recType":"app","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032845410,"createDate":{"$date":1450032845410},"origin":{"id":"5665f0553800005601c7b791","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","createDate":1450032845410,"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},"data":{"form":"<script type='text/javascript'>\n    App.AutoController = Ember.Controller.extend({\n        modals: Ember.inject.service(),\n        facts: jsonTask.FACTS,\n        isInserting: false,\n        flipbit: true,\n        changeFlag: false,\n        newId: function() {\n            return this.get(\"newLabel\").replace(/\\s+/g, '');\n        }.property(\"newLabel\"),\n        newLabel: \"\",\n        newType: \"string\",\n        newOptionLabel: \"\",\n        newOptionId: function() {\n            return this.get(\"newOptionLabel\").replace(/\\s+/g, '');\n        }.property(\"newOptionLabel\"),\n        newEnumOptions: [],\n        hasTemplateChanges: false,\n        hasUserChanges: false,\n        init: function() {\n            var facts = this.get(\"facts\");\n            // var modals = this.get('modals');\n            if(facts.data != null) {\n                this.set(\"dossier_exists\", true);\n            }\n            else {\n                this.set(\"dossier_exists\", false);\n                var objType = this.get('params.objTypeId');\n                var type = {\"recordType\":objType};\n//                var type = {\"recordType\":\"com.comcast.dossier_data\"};\n                var objid = {\n                    \"user\":facts.objId\n                }\n                Ember.set(facts, \"data\", type);\n                Ember.set(facts.data, \"vars\", objid);\n            }\n            console.log(facts);\n            // console.log(modals);\n        },\n        newLocation: function() {\n            return this.get(\"templateData\");\n        }.property(),\n        isEnum: function() {\n            return (this.get(\"newType\") === \"enum\");\n        }.property(\"newType\"),\n        isAdmin: function() {\n            return ($.inArray(this.get(\"facts.wf_currentAssignee\"), this.get(\"facts.admins\")) > 0);\n        }.property(),\n        newObject: function() {\n            var obj = {\n                id: this.get(\"newId\"),\n                label: this.get(\"newLabel\"),\n                value: \"\",\n                inputtype: this.get(\"newType\"),\n                fields:[],\n                options:this.get(\"newEnumOptions\")\n            };\n            return obj;\n        }.property(\"newId\",\"newLabel\",\"newType\",\"newLocation\"),\n        selectableTypes: [\n            {\"id\":\"string\",\"label\":\"Textbox\"},\n            {\"id\":\"enum\",\"label\":\"Dropdown\"},\n            {\"id\":\"boolean\",\"label\":\"True/False\"},\n            {\"id\":\"category\",\"label\":\"Category\"},\n            {\"id\":\"image\",\"label\":\"Image\"},\n            {\"id\":\"date\",\"label\":\"Date\"},\n            {\"id\":\"password\",\"label\":\"Password\"}\n        ],\n        locations: function() {\n            console.log(\"triggered locations\");\n            var locArray = Ember.A();\n            locArray.pushObject({\n                id: \"top\",\n                label: \"Top Level\",\n                reference: this.get(\"templateData\")\n            });\n            this.locationFinder(this.get(\"mergedArray\"), locArray, \"-\");\n            return locArray;\n        }.property(\"templateData.@each.inputtype\",\"flipbit\"),\n        locationFinder: function(fields, locArray, dashes) {\n            var self = this;\n            fields.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    locArray.pushObject({\n                        id: item.id,\n                        label: dashes + ' ' + item.label,\n                        reference: item.fields\n                    });\n                    self.locationFinder(item.fields, locArray, dashes + '-');\n                }\n            });\n        },\n        templateData: function() {\n            // getter\n            console.log(\"triggered template read\");\n            var templateObject = Ember.A();\n            var self = this;\n            var templateName = this.get('params.template');\n            var params = '&q={\"data.recordType\":\"' + templateName + '\"}&f={\"_id\":1,\"tstamp\":1,\"data\":1}';\n            Ember.$.ajax({\n                url: flowURL + '/objectstore?Authorization=' + sessionKey + params,\n                async: false,\n                success: function(data) {\n                    console.log(\"read success\");\n                    console.log(data);\n                    templateObject = data.RESPONSE.objs[0].data.vars.fields;\n                    self.templateId = data.RESPONSE.objs[0]._id;\n                    self.templateVars = data.RESPONSE.objs[0].data.vars;\n                    self.templateRecType = data.RESPONSE.objs[0].data.recordType;\n                }\n            });\n            return templateObject;\n        }.property(),\n        mergedArray: function() {\n            console.log(\"triggered mergedArray\");\n            var mergedArray = Ember.A();\n            if (!this.get(\"facts.data.vars.fields\")) {\n                console.log(\"facts.data.vars.fields does NOT exist.\");\n                var userFieldsArray = Ember.A();\n            }\n            else {\n                console.log(\"facts.data.vars.fields DOES exist.\");\n                var userFieldsArray = this.get(\"facts.data.vars.fields\");\n            }\n            var fieldsArray = this.get(\"templateData\");\n            if (fieldsArray) {\n                this.arrayMerger(fieldsArray, userFieldsArray, mergedArray);\n            }\n            return mergedArray;\n        }.property(\"templateData.[]\", \"flipbit\"),\n        // Recursive function helper for mergedArray property\n        arrayMerger: function(fieldsArray, userFieldsArray, mergedArray) {\n            var self = this;\n            fieldsArray.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    var arr = $.grep(userFieldsArray, function(n, i) {\n                        return (n.id === item.id);\n                    });\n                    if (arr.length > 0) {\n                        var subMergedArray = Ember.A();\n                        self.arrayMerger(item.fields, arr[0].fields, subMergedArray);\n                        item.fields.set(subMergedArray);\n//                        item.fields = subMergedArray;\n                    }\n                    mergedArray.pushObject(item);\n                }\n                else {\n                    if (!item.value) {\n                        var arr = $.grep(userFieldsArray, function(n, i) {\n                            return (n.id === item.id)\n                        });\n                        if ((arr.length > 0) && arr[0].value) {\n                            item.value = arr[0].value;\n                        } else\n                            item.value = \"\";\n                    }\n                    mergedArray.pushObject(item);\n                }\n            });\n        },\n        updateValue: function(fields, name, value) {\n            var self = this;\n            var arr = $.grep(fields, function(n, i) {\n                return (n.id === name);\n            });\n            if (arr.length > 0) {\n                arr[0].value = value;\n                return true;\n            }\n            else {\n                fields.some(function(item) {\n                    if (item.inputtype === \"category\") {\n                        //recurse through subFields\n                        self.updateValue(item.fields, name, value);\n                    }\n                });\n            }\n            return false;\n        },\n        clearValue: function(fields) {\n            var self = this;\n            fields.forEach(function(item) {\n                delete item.value;\n                if (item.inputtype === \"category\") {\n                    //recurse through subFields\n                    self.clearValue(item.fields);\n                }\n            });\n        },\n        isCancelable: function() {\n            return (this.get(\"isInserting\"));\n        }.property(\"isInserting\"),\n        buttonText: function() {\n            if (this.get(\"isInserting\"))\n                return \"Save\";\n            else\n                return\"Edit\";\n        }.property(\"isInserting\", \"isEnum\"),\n        actions: {\n            openModal: function(name) {\n                this.get('modals').open(name);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('submit');\n                this.set(\"isSubmitting\", true );\n//                if (this.get(\"hasTemplateChanges\"))\n//                    this.updateTemplate();\n                this.send('userUpdateAction');\n                // here you could perform your actions like persisting to the server or so\n//                $('#emberForm').submit();\n                return true;\n            },\n            insertAction: function () {\n                console.log(\"insertAction\");\n                if (this.get(\"isInserting\")) {\n                    this.set(\"isInserting\", false);\n                    var loc = this.get(\"newLocation\");\n                    loc.pushObject(this.get(\"newObject\"));\n                    // This is here to trigger computed properties when there is a change to a subfield array\n                    if (loc != this.get(\"templateData\"))\n                        this.set(\"flipbit\", !this.get(\"flipbit\"));\n                    this.set(\"hasTemplateChanges\", true);\n                    this.send('templateUpdateAction');\n                }\n                else {\n                    this.set(\"isInserting\", true);\n                }\n            },\n            cancelAction: function() {\n                this.set(\"isInserting\", false);\n            },\n            addAction: function(id, label, array) {\n                array.pushObject({\n                    id: id,\n                    label: label\n                });\n            },\n            templateUpdateAction: function() {\n                var vars = this.get(\"templateVars\");\n                var fields = this.get(\"templateData\");\n                var self = this;\n                this.clearValue(fields);\n                vars.fields.set(fields);\n                var updateObjStore = {\n                    recordType: this.get(\"templateRecType\"),\n                    vars: vars\n                };\n                var self = this;\n                Ember.$.ajax(flowURL + '/objectstore/' + this.get('templateId') + '?Authorization=' + sessionKey, {\n                    type: 'PATCH',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        self.set(\"hasTemplateChanges\", false);\n                        console.log(self);\n                        // this.get('modals').open('picker');\n                        alert(\"Template Update Success\");\n                    },\n                    error: function(data) {\n                        alert(\"Template Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            },\n            userUpdateAction: function() {\n                if (this.get(\"dossier_exists\")) {\n                    console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                    var self = this;\n                    var vars = this.get(\"facts.data.vars\");\n                    var fields = this.get(\"templateData\");\n//                var fields = this.get(\"mergedArray\");\n                    // Sync the values from the form with the values in mergedArray\n                    var fieldValuePairs = $('#dossier_form').serializeArray();\n                    $.each(fieldValuePairs, function(index, fieldValuePair) {\n                        self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                        console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                    });\n                    var updateObjStore = {\n                        recordType: this.get(\"facts.data.recordType\"),\n                        vars: {\n                            fields: fields,\n                            user: this.get(\"facts.data.vars.user\")\n                        }\n                    };\n                    console.log(updateObjStore);\n                    Ember.$.ajax(flowURL + '/objectstore/' + this.get(\"facts.apidata_data._id\") + '?Authorization=' + sessionKey, {\n                        type: 'PATCH',\n                        async: false,\n                        data:  JSON.stringify(updateObjStore),\n                        dataType: 'json',\n                        contentType: 'application/json',\n                        context: this,\n                        success: function(data) {\n                            alert(\"User Update Success\");\n                        },\n                        error: function(data) {\n                            alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                        }\n                    });\n                }\n                else {\n                    this.send(\"userCreateAction\");\n                }\n            },\n            userCreateAction: function() {\n                console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                var self = this;\n                var vars = this.get(\"facts.data.vars\");\n                var fields = this.get(\"templateData\");\n                var facts = this.get(\"facts\");\n//                var fields = this.get(\"mergedArray\");\n                // Sync the values from the form with the values in mergedArray\n                var fieldValuePairs = $('#dossier_form').serializeArray();\n                $.each(fieldValuePairs, function(index, fieldValuePair) {\n                    self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                    console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                });\n                var updateObjStore = {\n                    recordType: this.get(\"facts.data.recordType\"),\n                    vars: {\n                        fields: fields,\n                        user: this.get(\"facts.objId\")\n                    }\n                };\n                console.log(updateObjStore);\n                Ember.$.ajax(flowURL + '/objectstore?Authorization=' + sessionKey, {\n                    type: 'POST',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        alert(\"User Saved Success\");\n                        console.log(data);\n                        this.set(\"dossier_exists\", true);\n                        var id = {\n                            \"_id\": data.RESPONSE.objId\n                        }\n                        Ember.set(facts, \"apidata_data\", id);\n                    },\n                    error: function(data) {\n                        alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            }\n        }\n    });\n    App.ModalsService = Ember.Service.extend({\n        containerView: null,\n        open: function(name) {\n            var Modal = this.container.lookupFactory('component:'+name+'-modal');\n            var modal = Modal.create();\n            this.get('containerView').pushObject(modal);\n        },\n        close: function() {\n            this.get('containerView').popObject();\n        }\n    });\n\n    App.MyModalsComponent = Ember.ContainerView.extend({\n        elementId: 'my-modals',\n        modals: Ember.inject.service(),\n        didInsertElement: function() {\n            this.set('modals.containerView', this);\n        }\n    });\n\n    App.BaseModalComponent = Ember.Component.extend({\n        modals: Ember.inject.service(),\n        actions: {\n            close: function() {\n                this.get('modals').close();\n            }\n        }\n    });\n\n    App.PickerModalComponent = App.BaseModalComponent.extend({\n        layoutName: 'components/picker-modal',\n        pickerWrapper: null,\n        pickerData: null,\n        classNames: ['input-small'],\n        format: \"l\",\n        placeholder: Ember.computed.alias('format'),\n        iconOnRight: true,\n\n        didInsertElement: function () {\n            var self = this;\n            var format = this.get('format');\n\n            var pickerWrapper = this.$().datetimepicker({\n                format: 'l'\n                //viewMode: 'years'\n                //minDate: \"1/1/\" + (moment().year() - 2).toString()\n            });\n            this.set('pickerWrapper', pickerWrapper);\n\n            var pickerData = pickerWrapper.data(\"DateTimePicker\");\n            this.set('pickerData', pickerData);\n\n            if(this.get('datetime'))\n                pickerData.setDate(this.get('datetime'));\n\n            pickerWrapper.on('dp.change', function (ev) {\n                //self.sendAction('action', ev.format());\n                self.set('datetime', ev.date);\n            });\n        },\n\n        datetimeChanged: function () {\n            // get model datetime\n            var modelDatetime = this.get('datetime');\n            // get picker datetime\n            var picker = this.get('pickerData');\n            var pickerDatetime = picker.getDate();\n            // if not the same the overwrite model over picker\n            if (modelDatetime != pickerDatetime) {\n                picker.setDate(modelDatetime);\n            }\n            picker.hide();\n        }.observes('datetime')\n    });\n\n    function createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        // labelClass is a CSS class name for control labels\n        // fieldClass is a CSS class name applied to controls themselves\n        // subLabelClass is a CSS class name applied to the label for a subCategory - will likely provide a bolding\n        // subClass is a CSS class name applied to the inner div for a subCategory - will likely provide a nested view\n        // fieldId is the control id value\n        // fieldLabel is the Label value\n        // opts is an object which is expected to have optional properties {value, inputtype, options, results}\n        var returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><strong>' + fieldLabel + '</strong></label>';\n        returnHTML = returnHTML + '<div class=\"controls\">';\n        // var tvalue = \"\";\n        // console.log(opts.value);\n        // if(opts.value !== null)\n        // {\n        //     tvalue = opts.value;\n        // }\n        // else {\n        //     tvalue = \"\";\n        // }\n        if (typeof opts.inputtype === \"undefined\") opts.inputtype=\"default\";\n        switch (opts.inputtype)\n        {\n            case 'string':\n            case 'long':\n                //Basic Input\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'date':\n                // returnHTML = returnHTML + \"\";\n                break;\n            case 'image':\n                returnHTML = returnHTML + \"<div class='show-image' style='width:35%'><img src='\" + opts.value + \"' style='width:100%; height:300px' /><input class='\" + fieldClass +\" update' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"' style='width: 100%'></div>\";\n                break;\n            case 'password':\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='password' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'enum':\n                //Basic Select Return\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                for (i = 0; i < opts.options.length; i++) {\n                    var selected = \"\";\n                    if (opts.options[i].id == opts.value)\n                    {\n                        selected = \"selected\";\n                    }\n                    returnHTML = returnHTML + \"<option \" + selected +\" value='\" + opts.options[i].id +  \"'>\" + opts.options[i].label + \"</option>\";\n                }\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'boolean':\n                //Basic boolean...\n                var isTrue = \"\";\n                var isFalse = \"\";\n                if((opts.value == 'true') || (opts.value === true))\n                {\n                    isTrue = \"selected\"; //checked old way\n                }else{\n                    isFalse = \"selected\"; //checked old way\n                }\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                returnHTML = returnHTML + \"<option \" + isTrue +\" value='True'>True</option>\";\n                returnHTML = returnHTML + \"<option \" + isFalse +\" value='False'>False</option>\";\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'category':\n                // returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><h3>' + fieldLabel + '</h3></label>';\n                // returnHTML = returnHTML + '<div class=\"' + subClass + '\">';\n                returnHTML = \"<div class='white-text' id='collapseToggle'>\";\n                returnHTML = returnHTML + \"<h3 href='#\" + fieldId + \"' style='cursor:pointer;' data-toggle='collapse' class='collapsed' aria-expanded='false'>\" + fieldLabel + \"</h3>\";\n                returnHTML = returnHTML + \"<div id=\" + fieldId + \" aria-expanded='false' class='\" + subClass + \" collapse'>\";\n                opts.fields.forEach(function(opt) {\n                    returnHTML = returnHTML + createInput(labelClass, fieldClass, subLabelClass, subClass, opt.id, opt.label, opt);\n                });\n                returnHTML = returnHTML + \"</div>\";\n                break;\n            default:\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' disabled=true value='\" + opts.value + \"'>\";\n                break;\n        }\n        returnHTML = returnHTML + '</div>';\n        return new Handlebars.SafeString(returnHTML);\n    };\n    Ember.Handlebars.registerBoundHelper('createInput', function(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        //expects opts: {id, label, value, inputtype, options}\n        return createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts);\n    });\n</script>\n\n\n<script type=\"text/x-handlebars\" data-template-name=\"auto\">\n    <div class=\"panel panel-info\">\n        <div class=\"panel-heading\" style=\"font-weight:bolder;\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accord\" href=\"#collapseB\">{{params.title}}</a>\n            </h4>\n        </div>\n        <div id=\"collapseB\" class=\"panel-collapse collapse in\">\n            <div id=\"body\" class=\"panel-body content\" id='accord'>\n                {{#if isAdmin}}\n                <div class=\"text-right\" style=\"margin-bottom: 5px;\">\n                    <button id=\"insert\" class=\"btn btn-warning\" {{action 'insertAction' target=\"controller\"}}>{{controller.buttonText}}</button>\n                    {{#if controller.isCancelable}}<button id=\"insert\" class=\"btn btn-danger\" {{action 'cancelAction' target=\"controller\"}}>Cancel</button>{{/if}}\n                </div>\n                {{#if controller.isInserting}}\n                <div style=\"outline: 1px solid darkorange; background: orange;\">\n                    {{partial \"newfield\"}}\n                    <div align=\"center\" style=\"padding: 15px;\">\n                        {{#if hasTemplateChanges}}\n                        <button id=\"save\" class=\"btn btn-primary\" {{action 'templateUpdateAction' target=\"controller\"}}>Save Template</button>\n                        {{/if}}\n                    </div>\n                </div>\n                {{/if}}\n                {{/if}}\n                <form id=\"dossier_form\">\n                    {{#each field in controller.mergedArray}}\n                    <div class=\"control-group\">\n                        {{createInput \"control-label\" \"form-control\" \"h2\" \"panel-body\" field.id field.label field}}\n                    </div>\n                    {{/each}}\n                    <div class=\"control-group\">\n                        {{my-modals}}\n                    </div>\n                </form>\n                <div align=\"center\">\n                    <button id=\"save\" class=\"btn btn-primary\" {{action 'userUpdateAction' target=\"controller\"}}>Save</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"_newfield\">\n    <div style=\"padding: 10px;\">\n        <label class=\"control-label\" for=\"newLocation\"><h3>Field Location</h3></label>\n        {{{view \"select\" content=controller.locations class=\"form-control\" id=\"newLocation\"\n        value=controller.newLocation optionValuePath=\"content.reference\" optionLabelPath=\"content.label\"}}}\n        <label class=\"control-label\" for=\"newLabel\"><h3>Field Label</h3></label>\n        {{input class=\"form-control\" id=\"newLabel\" value=controller.newLabel}}\n        <label class=\"control-label\" for=\"newId\"><h3>Unique Field Id</h3></label>\n        {{input class=\"form-control\" id=\"newId\" value=controller.newId}}\n        <label class=\"control-label\" for=\"newType\"><h3>Field Type</h3></label>\n        {{{view \"select\" content=controller.selectableTypes class=\"form-control\" id=\"newType\"\n        value=controller.newType optionValuePath=\"content.id\" optionLabelPath=\"content.label\"}}}\n        {{#if isEnum}}\n        <div class=\"panel-body\">\n            <h4>New Dropdown Options</h4><br>\n            <ul>\n                {{#each option in controller.newEnumOptions}}\n                <li>{{option.id}} - {{option.label}}</li>\n                {{/each}}\n            </ul>\n            <label class=\"control-label\" for=\"newOptionLabel\"><h3>Option Label</h3></label>\n            {{input class=\"form-control\" id=\"newOptionLabel\" value=controller.newOptionLabel}}\n            <label class=\"control-label\" for=\"newOptionId\"><h3>Unique Option Id</h3></label>\n            {{input class=\"form-control\" id=\"newOptionId\" value=controller.newOptionId}}\n            <div align=\"center\">\n                <button id=\"add\" class=\"btn btn-primary\" {{action 'addAction' controller.newOptionId controller.newOptionLabel controller.newEnumOptions target=\"controller\"}}>Add</button>\n            </div>\n        </div>\n        {{/if}}\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"components/picker-modal\">\n    <div class=\"form-group\">\n        <div class='input-group date'>\n            {{#if iconOnRight}}\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            {{else}}\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            {{/if}}\n        </div>\n    </div>\n</script>","facts":{}},"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},{"_id":{"$oid":"566dbecd1a30ff0918931759"},"id":"566dbecd1a30ff0918931759","owner":{},"recType":"app","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032845410,"createDate":{"$date":1450032845410},"origin":{"id":"5665f0553800005601c7b791","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","createDate":1450032845410,"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},"data":{"form":"<script type='text/javascript'>\n    App.AutoController = Ember.Controller.extend({\n        modals: Ember.inject.service(),\n        facts: jsonTask.FACTS,\n        isInserting: false,\n        flipbit: true,\n        changeFlag: false,\n        newId: function() {\n            return this.get(\"newLabel\").replace(/\\s+/g, '');\n        }.property(\"newLabel\"),\n        newLabel: \"\",\n        newType: \"string\",\n        newOptionLabel: \"\",\n        newOptionId: function() {\n            return this.get(\"newOptionLabel\").replace(/\\s+/g, '');\n        }.property(\"newOptionLabel\"),\n        newEnumOptions: [],\n        hasTemplateChanges: false,\n        hasUserChanges: false,\n        init: function() {\n            var facts = this.get(\"facts\");\n            // var modals = this.get('modals');\n            if(facts.data != null) {\n                this.set(\"dossier_exists\", true);\n            }\n            else {\n                this.set(\"dossier_exists\", false);\n                var objType = this.get('params.objTypeId');\n                var type = {\"recordType\":objType};\n//                var type = {\"recordType\":\"com.comcast.dossier_data\"};\n                var objid = {\n                    \"user\":facts.objId\n                }\n                Ember.set(facts, \"data\", type);\n                Ember.set(facts.data, \"vars\", objid);\n            }\n            console.log(facts);\n            // console.log(modals);\n        },\n        newLocation: function() {\n            return this.get(\"templateData\");\n        }.property(),\n        isEnum: function() {\n            return (this.get(\"newType\") === \"enum\");\n        }.property(\"newType\"),\n        isAdmin: function() {\n            return ($.inArray(this.get(\"facts.wf_currentAssignee\"), this.get(\"facts.admins\")) > 0);\n        }.property(),\n        newObject: function() {\n            var obj = {\n                id: this.get(\"newId\"),\n                label: this.get(\"newLabel\"),\n                value: \"\",\n                inputtype: this.get(\"newType\"),\n                fields:[],\n                options:this.get(\"newEnumOptions\")\n            };\n            return obj;\n        }.property(\"newId\",\"newLabel\",\"newType\",\"newLocation\"),\n        selectableTypes: [\n            {\"id\":\"string\",\"label\":\"Textbox\"},\n            {\"id\":\"enum\",\"label\":\"Dropdown\"},\n            {\"id\":\"boolean\",\"label\":\"True/False\"},\n            {\"id\":\"category\",\"label\":\"Category\"},\n            {\"id\":\"image\",\"label\":\"Image\"},\n            {\"id\":\"date\",\"label\":\"Date\"},\n            {\"id\":\"password\",\"label\":\"Password\"}\n        ],\n        locations: function() {\n            console.log(\"triggered locations\");\n            var locArray = Ember.A();\n            locArray.pushObject({\n                id: \"top\",\n                label: \"Top Level\",\n                reference: this.get(\"templateData\")\n            });\n            this.locationFinder(this.get(\"mergedArray\"), locArray, \"-\");\n            return locArray;\n        }.property(\"templateData.@each.inputtype\",\"flipbit\"),\n        locationFinder: function(fields, locArray, dashes) {\n            var self = this;\n            fields.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    locArray.pushObject({\n                        id: item.id,\n                        label: dashes + ' ' + item.label,\n                        reference: item.fields\n                    });\n                    self.locationFinder(item.fields, locArray, dashes + '-');\n                }\n            });\n        },\n        templateData: function() {\n            // getter\n            console.log(\"triggered template read\");\n            var templateObject = Ember.A();\n            var self = this;\n            var templateName = this.get('params.template');\n            var params = '&q={\"data.recordType\":\"' + templateName + '\"}&f={\"_id\":1,\"tstamp\":1,\"data\":1}';\n            Ember.$.ajax({\n                url: flowURL + '/objectstore?Authorization=' + sessionKey + params,\n                async: false,\n                success: function(data) {\n                    console.log(\"read success\");\n                    console.log(data);\n                    templateObject = data.RESPONSE.objs[0].data.vars.fields;\n                    self.templateId = data.RESPONSE.objs[0]._id;\n                    self.templateVars = data.RESPONSE.objs[0].data.vars;\n                    self.templateRecType = data.RESPONSE.objs[0].data.recordType;\n                }\n            });\n            return templateObject;\n        }.property(),\n        mergedArray: function() {\n            console.log(\"triggered mergedArray\");\n            var mergedArray = Ember.A();\n            if (!this.get(\"facts.data.vars.fields\")) {\n                console.log(\"facts.data.vars.fields does NOT exist.\");\n                var userFieldsArray = Ember.A();\n            }\n            else {\n                console.log(\"facts.data.vars.fields DOES exist.\");\n                var userFieldsArray = this.get(\"facts.data.vars.fields\");\n            }\n            var fieldsArray = this.get(\"templateData\");\n            if (fieldsArray) {\n                this.arrayMerger(fieldsArray, userFieldsArray, mergedArray);\n            }\n            return mergedArray;\n        }.property(\"templateData.[]\", \"flipbit\"),\n        // Recursive function helper for mergedArray property\n        arrayMerger: function(fieldsArray, userFieldsArray, mergedArray) {\n            var self = this;\n            fieldsArray.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    var arr = $.grep(userFieldsArray, function(n, i) {\n                        return (n.id === item.id);\n                    });\n                    if (arr.length > 0) {\n                        var subMergedArray = Ember.A();\n                        self.arrayMerger(item.fields, arr[0].fields, subMergedArray);\n                        item.fields.set(subMergedArray);\n//                        item.fields = subMergedArray;\n                    }\n                    mergedArray.pushObject(item);\n                }\n                else {\n                    if (!item.value) {\n                        var arr = $.grep(userFieldsArray, function(n, i) {\n                            return (n.id === item.id)\n                        });\n                        if ((arr.length > 0) && arr[0].value) {\n                            item.value = arr[0].value;\n                        } else\n                            item.value = \"\";\n                    }\n                    mergedArray.pushObject(item);\n                }\n            });\n        },\n        updateValue: function(fields, name, value) {\n            var self = this;\n            var arr = $.grep(fields, function(n, i) {\n                return (n.id === name);\n            });\n            if (arr.length > 0) {\n                arr[0].value = value;\n                return true;\n            }\n            else {\n                fields.some(function(item) {\n                    if (item.inputtype === \"category\") {\n                        //recurse through subFields\n                        self.updateValue(item.fields, name, value);\n                    }\n                });\n            }\n            return false;\n        },\n        clearValue: function(fields) {\n            var self = this;\n            fields.forEach(function(item) {\n                delete item.value;\n                if (item.inputtype === \"category\") {\n                    //recurse through subFields\n                    self.clearValue(item.fields);\n                }\n            });\n        },\n        isCancelable: function() {\n            return (this.get(\"isInserting\"));\n        }.property(\"isInserting\"),\n        buttonText: function() {\n            if (this.get(\"isInserting\"))\n                return \"Save\";\n            else\n                return\"Edit\";\n        }.property(\"isInserting\", \"isEnum\"),\n        actions: {\n            openModal: function(name) {\n                this.get('modals').open(name);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('submit');\n                this.set(\"isSubmitting\", true );\n//                if (this.get(\"hasTemplateChanges\"))\n//                    this.updateTemplate();\n                this.send('userUpdateAction');\n                // here you could perform your actions like persisting to the server or so\n//                $('#emberForm').submit();\n                return true;\n            },\n            insertAction: function () {\n                console.log(\"insertAction\");\n                if (this.get(\"isInserting\")) {\n                    this.set(\"isInserting\", false);\n                    var loc = this.get(\"newLocation\");\n                    loc.pushObject(this.get(\"newObject\"));\n                    // This is here to trigger computed properties when there is a change to a subfield array\n                    if (loc != this.get(\"templateData\"))\n                        this.set(\"flipbit\", !this.get(\"flipbit\"));\n                    this.set(\"hasTemplateChanges\", true);\n                    this.send('templateUpdateAction');\n                }\n                else {\n                    this.set(\"isInserting\", true);\n                }\n            },\n            cancelAction: function() {\n                this.set(\"isInserting\", false);\n            },\n            addAction: function(id, label, array) {\n                array.pushObject({\n                    id: id,\n                    label: label\n                });\n            },\n            templateUpdateAction: function() {\n                var vars = this.get(\"templateVars\");\n                var fields = this.get(\"templateData\");\n                var self = this;\n                this.clearValue(fields);\n                vars.fields.set(fields);\n                var updateObjStore = {\n                    recordType: this.get(\"templateRecType\"),\n                    vars: vars\n                };\n                var self = this;\n                Ember.$.ajax(flowURL + '/objectstore/' + this.get('templateId') + '?Authorization=' + sessionKey, {\n                    type: 'PATCH',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        self.set(\"hasTemplateChanges\", false);\n                        console.log(self);\n                        // this.get('modals').open('picker');\n                        alert(\"Template Update Success\");\n                    },\n                    error: function(data) {\n                        alert(\"Template Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            },\n            userUpdateAction: function() {\n                if (this.get(\"dossier_exists\")) {\n                    console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                    var self = this;\n                    var vars = this.get(\"facts.data.vars\");\n                    var fields = this.get(\"templateData\");\n//                var fields = this.get(\"mergedArray\");\n                    // Sync the values from the form with the values in mergedArray\n                    var fieldValuePairs = $('#dossier_form').serializeArray();\n                    $.each(fieldValuePairs, function(index, fieldValuePair) {\n                        self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                        console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                    });\n                    var updateObjStore = {\n                        recordType: this.get(\"facts.data.recordType\"),\n                        vars: {\n                            fields: fields,\n                            user: this.get(\"facts.data.vars.user\")\n                        }\n                    };\n                    console.log(updateObjStore);\n                    Ember.$.ajax(flowURL + '/objectstore/' + this.get(\"facts.apidata_data._id\") + '?Authorization=' + sessionKey, {\n                        type: 'PATCH',\n                        async: false,\n                        data:  JSON.stringify(updateObjStore),\n                        dataType: 'json',\n                        contentType: 'application/json',\n                        context: this,\n                        success: function(data) {\n                            alert(\"User Update Success\");\n                        },\n                        error: function(data) {\n                            alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                        }\n                    });\n                }\n                else {\n                    this.send(\"userCreateAction\");\n                }\n            },\n            userCreateAction: function() {\n                console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                var self = this;\n                var vars = this.get(\"facts.data.vars\");\n                var fields = this.get(\"templateData\");\n                var facts = this.get(\"facts\");\n//                var fields = this.get(\"mergedArray\");\n                // Sync the values from the form with the values in mergedArray\n                var fieldValuePairs = $('#dossier_form').serializeArray();\n                $.each(fieldValuePairs, function(index, fieldValuePair) {\n                    self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                    console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                });\n                var updateObjStore = {\n                    recordType: this.get(\"facts.data.recordType\"),\n                    vars: {\n                        fields: fields,\n                        user: this.get(\"facts.objId\")\n                    }\n                };\n                console.log(updateObjStore);\n                Ember.$.ajax(flowURL + '/objectstore?Authorization=' + sessionKey, {\n                    type: 'POST',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        alert(\"User Saved Success\");\n                        console.log(data);\n                        this.set(\"dossier_exists\", true);\n                        var id = {\n                            \"_id\": data.RESPONSE.objId\n                        }\n                        Ember.set(facts, \"apidata_data\", id);\n                    },\n                    error: function(data) {\n                        alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            }\n        }\n    });\n    App.ModalsService = Ember.Service.extend({\n        containerView: null,\n        open: function(name) {\n            var Modal = this.container.lookupFactory('component:'+name+'-modal');\n            var modal = Modal.create();\n            this.get('containerView').pushObject(modal);\n        },\n        close: function() {\n            this.get('containerView').popObject();\n        }\n    });\n\n    App.MyModalsComponent = Ember.ContainerView.extend({\n        elementId: 'my-modals',\n        modals: Ember.inject.service(),\n        didInsertElement: function() {\n            this.set('modals.containerView', this);\n        }\n    });\n\n    App.BaseModalComponent = Ember.Component.extend({\n        modals: Ember.inject.service(),\n        actions: {\n            close: function() {\n                this.get('modals').close();\n            }\n        }\n    });\n\n    App.PickerModalComponent = App.BaseModalComponent.extend({\n        layoutName: 'components/picker-modal',\n        pickerWrapper: null,\n        pickerData: null,\n        classNames: ['input-small'],\n        format: \"l\",\n        placeholder: Ember.computed.alias('format'),\n        iconOnRight: true,\n\n        didInsertElement: function () {\n            var self = this;\n            var format = this.get('format');\n\n            var pickerWrapper = this.$().datetimepicker({\n                format: 'l'\n                //viewMode: 'years'\n                //minDate: \"1/1/\" + (moment().year() - 2).toString()\n            });\n            this.set('pickerWrapper', pickerWrapper);\n\n            var pickerData = pickerWrapper.data(\"DateTimePicker\");\n            this.set('pickerData', pickerData);\n\n            if(this.get('datetime'))\n                pickerData.setDate(this.get('datetime'));\n\n            pickerWrapper.on('dp.change', function (ev) {\n                //self.sendAction('action', ev.format());\n                self.set('datetime', ev.date);\n            });\n        },\n\n        datetimeChanged: function () {\n            // get model datetime\n            var modelDatetime = this.get('datetime');\n            // get picker datetime\n            var picker = this.get('pickerData');\n            var pickerDatetime = picker.getDate();\n            // if not the same the overwrite model over picker\n            if (modelDatetime != pickerDatetime) {\n                picker.setDate(modelDatetime);\n            }\n            picker.hide();\n        }.observes('datetime')\n    });\n\n    function createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        // labelClass is a CSS class name for control labels\n        // fieldClass is a CSS class name applied to controls themselves\n        // subLabelClass is a CSS class name applied to the label for a subCategory - will likely provide a bolding\n        // subClass is a CSS class name applied to the inner div for a subCategory - will likely provide a nested view\n        // fieldId is the control id value\n        // fieldLabel is the Label value\n        // opts is an object which is expected to have optional properties {value, inputtype, options, results}\n        var returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><strong>' + fieldLabel + '</strong></label>';\n        returnHTML = returnHTML + '<div class=\"controls\">';\n        // var tvalue = \"\";\n        // console.log(opts.value);\n        // if(opts.value !== null)\n        // {\n        //     tvalue = opts.value;\n        // }\n        // else {\n        //     tvalue = \"\";\n        // }\n        if (typeof opts.inputtype === \"undefined\") opts.inputtype=\"default\";\n        switch (opts.inputtype)\n        {\n            case 'string':\n            case 'long':\n                //Basic Input\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'date':\n                // returnHTML = returnHTML + \"\";\n                break;\n            case 'image':\n                returnHTML = returnHTML + \"<div class='show-image' style='width:35%'><img src='\" + opts.value + \"' style='width:100%; height:300px' /><input class='\" + fieldClass +\" update' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"' style='width: 100%'></div>\";\n                break;\n            case 'password':\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='password' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'enum':\n                //Basic Select Return\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                for (i = 0; i < opts.options.length; i++) {\n                    var selected = \"\";\n                    if (opts.options[i].id == opts.value)\n                    {\n                        selected = \"selected\";\n                    }\n                    returnHTML = returnHTML + \"<option \" + selected +\" value='\" + opts.options[i].id +  \"'>\" + opts.options[i].label + \"</option>\";\n                }\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'boolean':\n                //Basic boolean...\n                var isTrue = \"\";\n                var isFalse = \"\";\n                if((opts.value == 'true') || (opts.value === true))\n                {\n                    isTrue = \"selected\"; //checked old way\n                }else{\n                    isFalse = \"selected\"; //checked old way\n                }\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                returnHTML = returnHTML + \"<option \" + isTrue +\" value='True'>True</option>\";\n                returnHTML = returnHTML + \"<option \" + isFalse +\" value='False'>False</option>\";\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'category':\n                // returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><h3>' + fieldLabel + '</h3></label>';\n                // returnHTML = returnHTML + '<div class=\"' + subClass + '\">';\n                returnHTML = \"<div class='white-text' id='collapseToggle'>\";\n                returnHTML = returnHTML + \"<h3 href='#\" + fieldId + \"' style='cursor:pointer;' data-toggle='collapse' class='collapsed' aria-expanded='false'>\" + fieldLabel + \"</h3>\";\n                returnHTML = returnHTML + \"<div id=\" + fieldId + \" aria-expanded='false' class='\" + subClass + \" collapse'>\";\n                opts.fields.forEach(function(opt) {\n                    returnHTML = returnHTML + createInput(labelClass, fieldClass, subLabelClass, subClass, opt.id, opt.label, opt);\n                });\n                returnHTML = returnHTML + \"</div>\";\n                break;\n            default:\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' disabled=true value='\" + opts.value + \"'>\";\n                break;\n        }\n        returnHTML = returnHTML + '</div>';\n        return new Handlebars.SafeString(returnHTML);\n    };\n    Ember.Handlebars.registerBoundHelper('createInput', function(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        //expects opts: {id, label, value, inputtype, options}\n        return createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts);\n    });\n</script>\n\n\n<script type=\"text/x-handlebars\" data-template-name=\"auto\">\n    <div class=\"panel panel-info\">\n        <div class=\"panel-heading\" style=\"font-weight:bolder;\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accord\" href=\"#collapseB\">{{params.title}}</a>\n            </h4>\n        </div>\n        <div id=\"collapseB\" class=\"panel-collapse collapse in\">\n            <div id=\"body\" class=\"panel-body content\" id='accord'>\n                {{#if isAdmin}}\n                <div class=\"text-right\" style=\"margin-bottom: 5px;\">\n                    <button id=\"insert\" class=\"btn btn-warning\" {{action 'insertAction' target=\"controller\"}}>{{controller.buttonText}}</button>\n                    {{#if controller.isCancelable}}<button id=\"insert\" class=\"btn btn-danger\" {{action 'cancelAction' target=\"controller\"}}>Cancel</button>{{/if}}\n                </div>\n                {{#if controller.isInserting}}\n                <div style=\"outline: 1px solid darkorange; background: orange;\">\n                    {{partial \"newfield\"}}\n                    <div align=\"center\" style=\"padding: 15px;\">\n                        {{#if hasTemplateChanges}}\n                        <button id=\"save\" class=\"btn btn-primary\" {{action 'templateUpdateAction' target=\"controller\"}}>Save Template</button>\n                        {{/if}}\n                    </div>\n                </div>\n                {{/if}}\n                {{/if}}\n                <form id=\"dossier_form\">\n                    {{#each field in controller.mergedArray}}\n                    <div class=\"control-group\">\n                        {{createInput \"control-label\" \"form-control\" \"h2\" \"panel-body\" field.id field.label field}}\n                    </div>\n                    {{/each}}\n                    <div class=\"control-group\">\n                        {{my-modals}}\n                    </div>\n                </form>\n                <div align=\"center\">\n                    <button id=\"save\" class=\"btn btn-primary\" {{action 'userUpdateAction' target=\"controller\"}}>Save</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"_newfield\">\n    <div style=\"padding: 10px;\">\n        <label class=\"control-label\" for=\"newLocation\"><h3>Field Location</h3></label>\n        {{{view \"select\" content=controller.locations class=\"form-control\" id=\"newLocation\"\n        value=controller.newLocation optionValuePath=\"content.reference\" optionLabelPath=\"content.label\"}}}\n        <label class=\"control-label\" for=\"newLabel\"><h3>Field Label</h3></label>\n        {{input class=\"form-control\" id=\"newLabel\" value=controller.newLabel}}\n        <label class=\"control-label\" for=\"newId\"><h3>Unique Field Id</h3></label>\n        {{input class=\"form-control\" id=\"newId\" value=controller.newId}}\n        <label class=\"control-label\" for=\"newType\"><h3>Field Type</h3></label>\n        {{{view \"select\" content=controller.selectableTypes class=\"form-control\" id=\"newType\"\n        value=controller.newType optionValuePath=\"content.id\" optionLabelPath=\"content.label\"}}}\n        {{#if isEnum}}\n        <div class=\"panel-body\">\n            <h4>New Dropdown Options</h4><br>\n            <ul>\n                {{#each option in controller.newEnumOptions}}\n                <li>{{option.id}} - {{option.label}}</li>\n                {{/each}}\n            </ul>\n            <label class=\"control-label\" for=\"newOptionLabel\"><h3>Option Label</h3></label>\n            {{input class=\"form-control\" id=\"newOptionLabel\" value=controller.newOptionLabel}}\n            <label class=\"control-label\" for=\"newOptionId\"><h3>Unique Option Id</h3></label>\n            {{input class=\"form-control\" id=\"newOptionId\" value=controller.newOptionId}}\n            <div align=\"center\">\n                <button id=\"add\" class=\"btn btn-primary\" {{action 'addAction' controller.newOptionId controller.newOptionLabel controller.newEnumOptions target=\"controller\"}}>Add</button>\n            </div>\n        </div>\n        {{/if}}\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"components/picker-modal\">\n    <div class=\"form-group\">\n        <div class='input-group date'>\n            {{#if iconOnRight}}\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            {{else}}\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            {{/if}}\n        </div>\n    </div>\n</script>","facts":{}},"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},{"_id":{"$oid":"566dbecd1a30ff0918931759"},"id":"566dbecd1a30ff0918931759","owner":{},"recType":"app","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032845410,"createDate":{"$date":1450032845410},"origin":{"id":"5665f0553800005601c7b791","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","createDate":1450032845410,"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},"data":{"form":"<script type='text/javascript'>\n    App.AutoController = Ember.Controller.extend({\n        modals: Ember.inject.service(),\n        facts: jsonTask.FACTS,\n        isInserting: false,\n        flipbit: true,\n        changeFlag: false,\n        newId: function() {\n            return this.get(\"newLabel\").replace(/\\s+/g, '');\n        }.property(\"newLabel\"),\n        newLabel: \"\",\n        newType: \"string\",\n        newOptionLabel: \"\",\n        newOptionId: function() {\n            return this.get(\"newOptionLabel\").replace(/\\s+/g, '');\n        }.property(\"newOptionLabel\"),\n        newEnumOptions: [],\n        hasTemplateChanges: false,\n        hasUserChanges: false,\n        init: function() {\n            var facts = this.get(\"facts\");\n            // var modals = this.get('modals');\n            if(facts.data != null) {\n                this.set(\"dossier_exists\", true);\n            }\n            else {\n                this.set(\"dossier_exists\", false);\n                var objType = this.get('params.objTypeId');\n                var type = {\"recordType\":objType};\n//                var type = {\"recordType\":\"com.comcast.dossier_data\"};\n                var objid = {\n                    \"user\":facts.objId\n                }\n                Ember.set(facts, \"data\", type);\n                Ember.set(facts.data, \"vars\", objid);\n            }\n            console.log(facts);\n            // console.log(modals);\n        },\n        newLocation: function() {\n            return this.get(\"templateData\");\n        }.property(),\n        isEnum: function() {\n            return (this.get(\"newType\") === \"enum\");\n        }.property(\"newType\"),\n        isAdmin: function() {\n            return ($.inArray(this.get(\"facts.wf_currentAssignee\"), this.get(\"facts.admins\")) > 0);\n        }.property(),\n        newObject: function() {\n            var obj = {\n                id: this.get(\"newId\"),\n                label: this.get(\"newLabel\"),\n                value: \"\",\n                inputtype: this.get(\"newType\"),\n                fields:[],\n                options:this.get(\"newEnumOptions\")\n            };\n            return obj;\n        }.property(\"newId\",\"newLabel\",\"newType\",\"newLocation\"),\n        selectableTypes: [\n            {\"id\":\"string\",\"label\":\"Textbox\"},\n            {\"id\":\"enum\",\"label\":\"Dropdown\"},\n            {\"id\":\"boolean\",\"label\":\"True/False\"},\n            {\"id\":\"category\",\"label\":\"Category\"},\n            {\"id\":\"image\",\"label\":\"Image\"},\n            {\"id\":\"date\",\"label\":\"Date\"},\n            {\"id\":\"password\",\"label\":\"Password\"}\n        ],\n        locations: function() {\n            console.log(\"triggered locations\");\n            var locArray = Ember.A();\n            locArray.pushObject({\n                id: \"top\",\n                label: \"Top Level\",\n                reference: this.get(\"templateData\")\n            });\n            this.locationFinder(this.get(\"mergedArray\"), locArray, \"-\");\n            return locArray;\n        }.property(\"templateData.@each.inputtype\",\"flipbit\"),\n        locationFinder: function(fields, locArray, dashes) {\n            var self = this;\n            fields.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    locArray.pushObject({\n                        id: item.id,\n                        label: dashes + ' ' + item.label,\n                        reference: item.fields\n                    });\n                    self.locationFinder(item.fields, locArray, dashes + '-');\n                }\n            });\n        },\n        templateData: function() {\n            // getter\n            console.log(\"triggered template read\");\n            var templateObject = Ember.A();\n            var self = this;\n            var templateName = this.get('params.template');\n            var params = '&q={\"data.recordType\":\"' + templateName + '\"}&f={\"_id\":1,\"tstamp\":1,\"data\":1}';\n            Ember.$.ajax({\n                url: flowURL + '/objectstore?Authorization=' + sessionKey + params,\n                async: false,\n                success: function(data) {\n                    console.log(\"read success\");\n                    console.log(data);\n                    templateObject = data.RESPONSE.objs[0].data.vars.fields;\n                    self.templateId = data.RESPONSE.objs[0]._id;\n                    self.templateVars = data.RESPONSE.objs[0].data.vars;\n                    self.templateRecType = data.RESPONSE.objs[0].data.recordType;\n                }\n            });\n            return templateObject;\n        }.property(),\n        mergedArray: function() {\n            console.log(\"triggered mergedArray\");\n            var mergedArray = Ember.A();\n            if (!this.get(\"facts.data.vars.fields\")) {\n                console.log(\"facts.data.vars.fields does NOT exist.\");\n                var userFieldsArray = Ember.A();\n            }\n            else {\n                console.log(\"facts.data.vars.fields DOES exist.\");\n                var userFieldsArray = this.get(\"facts.data.vars.fields\");\n            }\n            var fieldsArray = this.get(\"templateData\");\n            if (fieldsArray) {\n                this.arrayMerger(fieldsArray, userFieldsArray, mergedArray);\n            }\n            return mergedArray;\n        }.property(\"templateData.[]\", \"flipbit\"),\n        // Recursive function helper for mergedArray property\n        arrayMerger: function(fieldsArray, userFieldsArray, mergedArray) {\n            var self = this;\n            fieldsArray.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    var arr = $.grep(userFieldsArray, function(n, i) {\n                        return (n.id === item.id);\n                    });\n                    if (arr.length > 0) {\n                        var subMergedArray = Ember.A();\n                        self.arrayMerger(item.fields, arr[0].fields, subMergedArray);\n                        item.fields.set(subMergedArray);\n//                        item.fields = subMergedArray;\n                    }\n                    mergedArray.pushObject(item);\n                }\n                else {\n                    if (!item.value) {\n                        var arr = $.grep(userFieldsArray, function(n, i) {\n                            return (n.id === item.id)\n                        });\n                        if ((arr.length > 0) && arr[0].value) {\n                            item.value = arr[0].value;\n                        } else\n                            item.value = \"\";\n                    }\n                    mergedArray.pushObject(item);\n                }\n            });\n        },\n        updateValue: function(fields, name, value) {\n            var self = this;\n            var arr = $.grep(fields, function(n, i) {\n                return (n.id === name);\n            });\n            if (arr.length > 0) {\n                arr[0].value = value;\n                return true;\n            }\n            else {\n                fields.some(function(item) {\n                    if (item.inputtype === \"category\") {\n                        //recurse through subFields\n                        self.updateValue(item.fields, name, value);\n                    }\n                });\n            }\n            return false;\n        },\n        clearValue: function(fields) {\n            var self = this;\n            fields.forEach(function(item) {\n                delete item.value;\n                if (item.inputtype === \"category\") {\n                    //recurse through subFields\n                    self.clearValue(item.fields);\n                }\n            });\n        },\n        isCancelable: function() {\n            return (this.get(\"isInserting\"));\n        }.property(\"isInserting\"),\n        buttonText: function() {\n            if (this.get(\"isInserting\"))\n                return \"Save\";\n            else\n                return\"Edit\";\n        }.property(\"isInserting\", \"isEnum\"),\n        actions: {\n            openModal: function(name) {\n                this.get('modals').open(name);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('submit');\n                this.set(\"isSubmitting\", true );\n//                if (this.get(\"hasTemplateChanges\"))\n//                    this.updateTemplate();\n                this.send('userUpdateAction');\n                // here you could perform your actions like persisting to the server or so\n//                $('#emberForm').submit();\n                return true;\n            },\n            insertAction: function () {\n                console.log(\"insertAction\");\n                if (this.get(\"isInserting\")) {\n                    this.set(\"isInserting\", false);\n                    var loc = this.get(\"newLocation\");\n                    loc.pushObject(this.get(\"newObject\"));\n                    // This is here to trigger computed properties when there is a change to a subfield array\n                    if (loc != this.get(\"templateData\"))\n                        this.set(\"flipbit\", !this.get(\"flipbit\"));\n                    this.set(\"hasTemplateChanges\", true);\n                    this.send('templateUpdateAction');\n                }\n                else {\n                    this.set(\"isInserting\", true);\n                }\n            },\n            cancelAction: function() {\n                this.set(\"isInserting\", false);\n            },\n            addAction: function(id, label, array) {\n                array.pushObject({\n                    id: id,\n                    label: label\n                });\n            },\n            templateUpdateAction: function() {\n                var vars = this.get(\"templateVars\");\n                var fields = this.get(\"templateData\");\n                var self = this;\n                this.clearValue(fields);\n                vars.fields.set(fields);\n                var updateObjStore = {\n                    recordType: this.get(\"templateRecType\"),\n                    vars: vars\n                };\n                var self = this;\n                Ember.$.ajax(flowURL + '/objectstore/' + this.get('templateId') + '?Authorization=' + sessionKey, {\n                    type: 'PATCH',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        self.set(\"hasTemplateChanges\", false);\n                        console.log(self);\n                        // this.get('modals').open('picker');\n                        alert(\"Template Update Success\");\n                    },\n                    error: function(data) {\n                        alert(\"Template Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            },\n            userUpdateAction: function() {\n                if (this.get(\"dossier_exists\")) {\n                    console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                    var self = this;\n                    var vars = this.get(\"facts.data.vars\");\n                    var fields = this.get(\"templateData\");\n//                var fields = this.get(\"mergedArray\");\n                    // Sync the values from the form with the values in mergedArray\n                    var fieldValuePairs = $('#dossier_form').serializeArray();\n                    $.each(fieldValuePairs, function(index, fieldValuePair) {\n                        self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                        console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                    });\n                    var updateObjStore = {\n                        recordType: this.get(\"facts.data.recordType\"),\n                        vars: {\n                            fields: fields,\n                            user: this.get(\"facts.data.vars.user\")\n                        }\n                    };\n                    console.log(updateObjStore);\n                    Ember.$.ajax(flowURL + '/objectstore/' + this.get(\"facts.apidata_data._id\") + '?Authorization=' + sessionKey, {\n                        type: 'PATCH',\n                        async: false,\n                        data:  JSON.stringify(updateObjStore),\n                        dataType: 'json',\n                        contentType: 'application/json',\n                        context: this,\n                        success: function(data) {\n                            alert(\"User Update Success\");\n                        },\n                        error: function(data) {\n                            alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                        }\n                    });\n                }\n                else {\n                    this.send(\"userCreateAction\");\n                }\n            },\n            userCreateAction: function() {\n                console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                var self = this;\n                var vars = this.get(\"facts.data.vars\");\n                var fields = this.get(\"templateData\");\n                var facts = this.get(\"facts\");\n//                var fields = this.get(\"mergedArray\");\n                // Sync the values from the form with the values in mergedArray\n                var fieldValuePairs = $('#dossier_form').serializeArray();\n                $.each(fieldValuePairs, function(index, fieldValuePair) {\n                    self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                    console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                });\n                var updateObjStore = {\n                    recordType: this.get(\"facts.data.recordType\"),\n                    vars: {\n                        fields: fields,\n                        user: this.get(\"facts.objId\")\n                    }\n                };\n                console.log(updateObjStore);\n                Ember.$.ajax(flowURL + '/objectstore?Authorization=' + sessionKey, {\n                    type: 'POST',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        alert(\"User Saved Success\");\n                        console.log(data);\n                        this.set(\"dossier_exists\", true);\n                        var id = {\n                            \"_id\": data.RESPONSE.objId\n                        }\n                        Ember.set(facts, \"apidata_data\", id);\n                    },\n                    error: function(data) {\n                        alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            }\n        }\n    });\n    App.ModalsService = Ember.Service.extend({\n        containerView: null,\n        open: function(name) {\n            var Modal = this.container.lookupFactory('component:'+name+'-modal');\n            var modal = Modal.create();\n            this.get('containerView').pushObject(modal);\n        },\n        close: function() {\n            this.get('containerView').popObject();\n        }\n    });\n\n    App.MyModalsComponent = Ember.ContainerView.extend({\n        elementId: 'my-modals',\n        modals: Ember.inject.service(),\n        didInsertElement: function() {\n            this.set('modals.containerView', this);\n        }\n    });\n\n    App.BaseModalComponent = Ember.Component.extend({\n        modals: Ember.inject.service(),\n        actions: {\n            close: function() {\n                this.get('modals').close();\n            }\n        }\n    });\n\n    App.PickerModalComponent = App.BaseModalComponent.extend({\n        layoutName: 'components/picker-modal',\n        pickerWrapper: null,\n        pickerData: null,\n        classNames: ['input-small'],\n        format: \"l\",\n        placeholder: Ember.computed.alias('format'),\n        iconOnRight: true,\n\n        didInsertElement: function () {\n            var self = this;\n            var format = this.get('format');\n\n            var pickerWrapper = this.$().datetimepicker({\n                format: 'l'\n                //viewMode: 'years'\n                //minDate: \"1/1/\" + (moment().year() - 2).toString()\n            });\n            this.set('pickerWrapper', pickerWrapper);\n\n            var pickerData = pickerWrapper.data(\"DateTimePicker\");\n            this.set('pickerData', pickerData);\n\n            if(this.get('datetime'))\n                pickerData.setDate(this.get('datetime'));\n\n            pickerWrapper.on('dp.change', function (ev) {\n                //self.sendAction('action', ev.format());\n                self.set('datetime', ev.date);\n            });\n        },\n\n        datetimeChanged: function () {\n            // get model datetime\n            var modelDatetime = this.get('datetime');\n            // get picker datetime\n            var picker = this.get('pickerData');\n            var pickerDatetime = picker.getDate();\n            // if not the same the overwrite model over picker\n            if (modelDatetime != pickerDatetime) {\n                picker.setDate(modelDatetime);\n            }\n            picker.hide();\n        }.observes('datetime')\n    });\n\n    function createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        // labelClass is a CSS class name for control labels\n        // fieldClass is a CSS class name applied to controls themselves\n        // subLabelClass is a CSS class name applied to the label for a subCategory - will likely provide a bolding\n        // subClass is a CSS class name applied to the inner div for a subCategory - will likely provide a nested view\n        // fieldId is the control id value\n        // fieldLabel is the Label value\n        // opts is an object which is expected to have optional properties {value, inputtype, options, results}\n        var returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><strong>' + fieldLabel + '</strong></label>';\n        returnHTML = returnHTML + '<div class=\"controls\">';\n        // var tvalue = \"\";\n        // console.log(opts.value);\n        // if(opts.value !== null)\n        // {\n        //     tvalue = opts.value;\n        // }\n        // else {\n        //     tvalue = \"\";\n        // }\n        if (typeof opts.inputtype === \"undefined\") opts.inputtype=\"default\";\n        switch (opts.inputtype)\n        {\n            case 'string':\n            case 'long':\n                //Basic Input\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'date':\n                // returnHTML = returnHTML + \"\";\n                break;\n            case 'image':\n                returnHTML = returnHTML + \"<div class='show-image' style='width:35%'><img src='\" + opts.value + \"' style='width:100%; height:300px' /><input class='\" + fieldClass +\" update' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"' style='width: 100%'></div>\";\n                break;\n            case 'password':\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='password' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'enum':\n                //Basic Select Return\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                for (i = 0; i < opts.options.length; i++) {\n                    var selected = \"\";\n                    if (opts.options[i].id == opts.value)\n                    {\n                        selected = \"selected\";\n                    }\n                    returnHTML = returnHTML + \"<option \" + selected +\" value='\" + opts.options[i].id +  \"'>\" + opts.options[i].label + \"</option>\";\n                }\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'boolean':\n                //Basic boolean...\n                var isTrue = \"\";\n                var isFalse = \"\";\n                if((opts.value == 'true') || (opts.value === true))\n                {\n                    isTrue = \"selected\"; //checked old way\n                }else{\n                    isFalse = \"selected\"; //checked old way\n                }\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                returnHTML = returnHTML + \"<option \" + isTrue +\" value='True'>True</option>\";\n                returnHTML = returnHTML + \"<option \" + isFalse +\" value='False'>False</option>\";\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'category':\n                // returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><h3>' + fieldLabel + '</h3></label>';\n                // returnHTML = returnHTML + '<div class=\"' + subClass + '\">';\n                returnHTML = \"<div class='white-text' id='collapseToggle'>\";\n                returnHTML = returnHTML + \"<h3 href='#\" + fieldId + \"' style='cursor:pointer;' data-toggle='collapse' class='collapsed' aria-expanded='false'>\" + fieldLabel + \"</h3>\";\n                returnHTML = returnHTML + \"<div id=\" + fieldId + \" aria-expanded='false' class='\" + subClass + \" collapse'>\";\n                opts.fields.forEach(function(opt) {\n                    returnHTML = returnHTML + createInput(labelClass, fieldClass, subLabelClass, subClass, opt.id, opt.label, opt);\n                });\n                returnHTML = returnHTML + \"</div>\";\n                break;\n            default:\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' disabled=true value='\" + opts.value + \"'>\";\n                break;\n        }\n        returnHTML = returnHTML + '</div>';\n        return new Handlebars.SafeString(returnHTML);\n    };\n    Ember.Handlebars.registerBoundHelper('createInput', function(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        //expects opts: {id, label, value, inputtype, options}\n        return createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts);\n    });\n</script>\n\n\n<script type=\"text/x-handlebars\" data-template-name=\"auto\">\n    <div class=\"panel panel-info\">\n        <div class=\"panel-heading\" style=\"font-weight:bolder;\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accord\" href=\"#collapseB\">{{params.title}}</a>\n            </h4>\n        </div>\n        <div id=\"collapseB\" class=\"panel-collapse collapse in\">\n            <div id=\"body\" class=\"panel-body content\" id='accord'>\n                {{#if isAdmin}}\n                <div class=\"text-right\" style=\"margin-bottom: 5px;\">\n                    <button id=\"insert\" class=\"btn btn-warning\" {{action 'insertAction' target=\"controller\"}}>{{controller.buttonText}}</button>\n                    {{#if controller.isCancelable}}<button id=\"insert\" class=\"btn btn-danger\" {{action 'cancelAction' target=\"controller\"}}>Cancel</button>{{/if}}\n                </div>\n                {{#if controller.isInserting}}\n                <div style=\"outline: 1px solid darkorange; background: orange;\">\n                    {{partial \"newfield\"}}\n                    <div align=\"center\" style=\"padding: 15px;\">\n                        {{#if hasTemplateChanges}}\n                        <button id=\"save\" class=\"btn btn-primary\" {{action 'templateUpdateAction' target=\"controller\"}}>Save Template</button>\n                        {{/if}}\n                    </div>\n                </div>\n                {{/if}}\n                {{/if}}\n                <form id=\"dossier_form\">\n                    {{#each field in controller.mergedArray}}\n                    <div class=\"control-group\">\n                        {{createInput \"control-label\" \"form-control\" \"h2\" \"panel-body\" field.id field.label field}}\n                    </div>\n                    {{/each}}\n                    <div class=\"control-group\">\n                        {{my-modals}}\n                    </div>\n                </form>\n                <div align=\"center\">\n                    <button id=\"save\" class=\"btn btn-primary\" {{action 'userUpdateAction' target=\"controller\"}}>Save</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"_newfield\">\n    <div style=\"padding: 10px;\">\n        <label class=\"control-label\" for=\"newLocation\"><h3>Field Location</h3></label>\n        {{{view \"select\" content=controller.locations class=\"form-control\" id=\"newLocation\"\n        value=controller.newLocation optionValuePath=\"content.reference\" optionLabelPath=\"content.label\"}}}\n        <label class=\"control-label\" for=\"newLabel\"><h3>Field Label</h3></label>\n        {{input class=\"form-control\" id=\"newLabel\" value=controller.newLabel}}\n        <label class=\"control-label\" for=\"newId\"><h3>Unique Field Id</h3></label>\n        {{input class=\"form-control\" id=\"newId\" value=controller.newId}}\n        <label class=\"control-label\" for=\"newType\"><h3>Field Type</h3></label>\n        {{{view \"select\" content=controller.selectableTypes class=\"form-control\" id=\"newType\"\n        value=controller.newType optionValuePath=\"content.id\" optionLabelPath=\"content.label\"}}}\n        {{#if isEnum}}\n        <div class=\"panel-body\">\n            <h4>New Dropdown Options</h4><br>\n            <ul>\n                {{#each option in controller.newEnumOptions}}\n                <li>{{option.id}} - {{option.label}}</li>\n                {{/each}}\n            </ul>\n            <label class=\"control-label\" for=\"newOptionLabel\"><h3>Option Label</h3></label>\n            {{input class=\"form-control\" id=\"newOptionLabel\" value=controller.newOptionLabel}}\n            <label class=\"control-label\" for=\"newOptionId\"><h3>Unique Option Id</h3></label>\n            {{input class=\"form-control\" id=\"newOptionId\" value=controller.newOptionId}}\n            <div align=\"center\">\n                <button id=\"add\" class=\"btn btn-primary\" {{action 'addAction' controller.newOptionId controller.newOptionLabel controller.newEnumOptions target=\"controller\"}}>Add</button>\n            </div>\n        </div>\n        {{/if}}\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"components/picker-modal\">\n    <div class=\"form-group\">\n        <div class='input-group date'>\n            {{#if iconOnRight}}\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            {{else}}\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            {{/if}}\n        </div>\n    </div>\n</script>","facts":{}},"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},{"_id":{"$oid":"566dbecd1a30ff0918931759"},"id":"566dbecd1a30ff0918931759","owner":{},"recType":"app","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032845410,"createDate":{"$date":1450032845410},"origin":{"id":"5665f0553800005601c7b791","name":"AutoView 2.0","desc":"Comcast User Profile Version for a Fact Provider View","creatorId":"tpanagos@point.io","createDate":1450032845410,"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},"data":{"form":"<script type='text/javascript'>\n    App.AutoController = Ember.Controller.extend({\n        modals: Ember.inject.service(),\n        facts: jsonTask.FACTS,\n        isInserting: false,\n        flipbit: true,\n        changeFlag: false,\n        newId: function() {\n            return this.get(\"newLabel\").replace(/\\s+/g, '');\n        }.property(\"newLabel\"),\n        newLabel: \"\",\n        newType: \"string\",\n        newOptionLabel: \"\",\n        newOptionId: function() {\n            return this.get(\"newOptionLabel\").replace(/\\s+/g, '');\n        }.property(\"newOptionLabel\"),\n        newEnumOptions: [],\n        hasTemplateChanges: false,\n        hasUserChanges: false,\n        init: function() {\n            var facts = this.get(\"facts\");\n            // var modals = this.get('modals');\n            if(facts.data != null) {\n                this.set(\"dossier_exists\", true);\n            }\n            else {\n                this.set(\"dossier_exists\", false);\n                var objType = this.get('params.objTypeId');\n                var type = {\"recordType\":objType};\n//                var type = {\"recordType\":\"com.comcast.dossier_data\"};\n                var objid = {\n                    \"user\":facts.objId\n                }\n                Ember.set(facts, \"data\", type);\n                Ember.set(facts.data, \"vars\", objid);\n            }\n            console.log(facts);\n            // console.log(modals);\n        },\n        newLocation: function() {\n            return this.get(\"templateData\");\n        }.property(),\n        isEnum: function() {\n            return (this.get(\"newType\") === \"enum\");\n        }.property(\"newType\"),\n        isAdmin: function() {\n            return ($.inArray(this.get(\"facts.wf_currentAssignee\"), this.get(\"facts.admins\")) > 0);\n        }.property(),\n        newObject: function() {\n            var obj = {\n                id: this.get(\"newId\"),\n                label: this.get(\"newLabel\"),\n                value: \"\",\n                inputtype: this.get(\"newType\"),\n                fields:[],\n                options:this.get(\"newEnumOptions\")\n            };\n            return obj;\n        }.property(\"newId\",\"newLabel\",\"newType\",\"newLocation\"),\n        selectableTypes: [\n            {\"id\":\"string\",\"label\":\"Textbox\"},\n            {\"id\":\"enum\",\"label\":\"Dropdown\"},\n            {\"id\":\"boolean\",\"label\":\"True/False\"},\n            {\"id\":\"category\",\"label\":\"Category\"},\n            {\"id\":\"image\",\"label\":\"Image\"},\n            {\"id\":\"date\",\"label\":\"Date\"},\n            {\"id\":\"password\",\"label\":\"Password\"}\n        ],\n        locations: function() {\n            console.log(\"triggered locations\");\n            var locArray = Ember.A();\n            locArray.pushObject({\n                id: \"top\",\n                label: \"Top Level\",\n                reference: this.get(\"templateData\")\n            });\n            this.locationFinder(this.get(\"mergedArray\"), locArray, \"-\");\n            return locArray;\n        }.property(\"templateData.@each.inputtype\",\"flipbit\"),\n        locationFinder: function(fields, locArray, dashes) {\n            var self = this;\n            fields.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    locArray.pushObject({\n                        id: item.id,\n                        label: dashes + ' ' + item.label,\n                        reference: item.fields\n                    });\n                    self.locationFinder(item.fields, locArray, dashes + '-');\n                }\n            });\n        },\n        templateData: function() {\n            // getter\n            console.log(\"triggered template read\");\n            var templateObject = Ember.A();\n            var self = this;\n            var templateName = this.get('params.template');\n            var params = '&q={\"data.recordType\":\"' + templateName + '\"}&f={\"_id\":1,\"tstamp\":1,\"data\":1}';\n            Ember.$.ajax({\n                url: flowURL + '/objectstore?Authorization=' + sessionKey + params,\n                async: false,\n                success: function(data) {\n                    console.log(\"read success\");\n                    console.log(data);\n                    templateObject = data.RESPONSE.objs[0].data.vars.fields;\n                    self.templateId = data.RESPONSE.objs[0]._id;\n                    self.templateVars = data.RESPONSE.objs[0].data.vars;\n                    self.templateRecType = data.RESPONSE.objs[0].data.recordType;\n                }\n            });\n            return templateObject;\n        }.property(),\n        mergedArray: function() {\n            console.log(\"triggered mergedArray\");\n            var mergedArray = Ember.A();\n            if (!this.get(\"facts.data.vars.fields\")) {\n                console.log(\"facts.data.vars.fields does NOT exist.\");\n                var userFieldsArray = Ember.A();\n            }\n            else {\n                console.log(\"facts.data.vars.fields DOES exist.\");\n                var userFieldsArray = this.get(\"facts.data.vars.fields\");\n            }\n            var fieldsArray = this.get(\"templateData\");\n            if (fieldsArray) {\n                this.arrayMerger(fieldsArray, userFieldsArray, mergedArray);\n            }\n            return mergedArray;\n        }.property(\"templateData.[]\", \"flipbit\"),\n        // Recursive function helper for mergedArray property\n        arrayMerger: function(fieldsArray, userFieldsArray, mergedArray) {\n            var self = this;\n            fieldsArray.forEach(function(item) {\n                if (item.inputtype === \"category\") {\n                    var arr = $.grep(userFieldsArray, function(n, i) {\n                        return (n.id === item.id);\n                    });\n                    if (arr.length > 0) {\n                        var subMergedArray = Ember.A();\n                        self.arrayMerger(item.fields, arr[0].fields, subMergedArray);\n                        item.fields.set(subMergedArray);\n//                        item.fields = subMergedArray;\n                    }\n                    mergedArray.pushObject(item);\n                }\n                else {\n                    if (!item.value) {\n                        var arr = $.grep(userFieldsArray, function(n, i) {\n                            return (n.id === item.id)\n                        });\n                        if ((arr.length > 0) && arr[0].value) {\n                            item.value = arr[0].value;\n                        } else\n                            item.value = \"\";\n                    }\n                    mergedArray.pushObject(item);\n                }\n            });\n        },\n        updateValue: function(fields, name, value) {\n            var self = this;\n            var arr = $.grep(fields, function(n, i) {\n                return (n.id === name);\n            });\n            if (arr.length > 0) {\n                arr[0].value = value;\n                return true;\n            }\n            else {\n                fields.some(function(item) {\n                    if (item.inputtype === \"category\") {\n                        //recurse through subFields\n                        self.updateValue(item.fields, name, value);\n                    }\n                });\n            }\n            return false;\n        },\n        clearValue: function(fields) {\n            var self = this;\n            fields.forEach(function(item) {\n                delete item.value;\n                if (item.inputtype === \"category\") {\n                    //recurse through subFields\n                    self.clearValue(item.fields);\n                }\n            });\n        },\n        isCancelable: function() {\n            return (this.get(\"isInserting\"));\n        }.property(\"isInserting\"),\n        buttonText: function() {\n            if (this.get(\"isInserting\"))\n                return \"Save\";\n            else\n                return\"Edit\";\n        }.property(\"isInserting\", \"isEnum\"),\n        actions: {\n            openModal: function(name) {\n                this.get('modals').open(name);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('submit');\n                this.set(\"isSubmitting\", true );\n//                if (this.get(\"hasTemplateChanges\"))\n//                    this.updateTemplate();\n                this.send('userUpdateAction');\n                // here you could perform your actions like persisting to the server or so\n//                $('#emberForm').submit();\n                return true;\n            },\n            insertAction: function () {\n                console.log(\"insertAction\");\n                if (this.get(\"isInserting\")) {\n                    this.set(\"isInserting\", false);\n                    var loc = this.get(\"newLocation\");\n                    loc.pushObject(this.get(\"newObject\"));\n                    // This is here to trigger computed properties when there is a change to a subfield array\n                    if (loc != this.get(\"templateData\"))\n                        this.set(\"flipbit\", !this.get(\"flipbit\"));\n                    this.set(\"hasTemplateChanges\", true);\n                    this.send('templateUpdateAction');\n                }\n                else {\n                    this.set(\"isInserting\", true);\n                }\n            },\n            cancelAction: function() {\n                this.set(\"isInserting\", false);\n            },\n            addAction: function(id, label, array) {\n                array.pushObject({\n                    id: id,\n                    label: label\n                });\n            },\n            templateUpdateAction: function() {\n                var vars = this.get(\"templateVars\");\n                var fields = this.get(\"templateData\");\n                var self = this;\n                this.clearValue(fields);\n                vars.fields.set(fields);\n                var updateObjStore = {\n                    recordType: this.get(\"templateRecType\"),\n                    vars: vars\n                };\n                var self = this;\n                Ember.$.ajax(flowURL + '/objectstore/' + this.get('templateId') + '?Authorization=' + sessionKey, {\n                    type: 'PATCH',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        self.set(\"hasTemplateChanges\", false);\n                        console.log(self);\n                        // this.get('modals').open('picker');\n                        alert(\"Template Update Success\");\n                    },\n                    error: function(data) {\n                        alert(\"Template Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            },\n            userUpdateAction: function() {\n                if (this.get(\"dossier_exists\")) {\n                    console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                    var self = this;\n                    var vars = this.get(\"facts.data.vars\");\n                    var fields = this.get(\"templateData\");\n//                var fields = this.get(\"mergedArray\");\n                    // Sync the values from the form with the values in mergedArray\n                    var fieldValuePairs = $('#dossier_form').serializeArray();\n                    $.each(fieldValuePairs, function(index, fieldValuePair) {\n                        self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                        console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                    });\n                    var updateObjStore = {\n                        recordType: this.get(\"facts.data.recordType\"),\n                        vars: {\n                            fields: fields,\n                            user: this.get(\"facts.data.vars.user\")\n                        }\n                    };\n                    console.log(updateObjStore);\n                    Ember.$.ajax(flowURL + '/objectstore/' + this.get(\"facts.apidata_data._id\") + '?Authorization=' + sessionKey, {\n                        type: 'PATCH',\n                        async: false,\n                        data:  JSON.stringify(updateObjStore),\n                        dataType: 'json',\n                        contentType: 'application/json',\n                        context: this,\n                        success: function(data) {\n                            alert(\"User Update Success\");\n                        },\n                        error: function(data) {\n                            alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                        }\n                    });\n                }\n                else {\n                    this.send(\"userCreateAction\");\n                }\n            },\n            userCreateAction: function() {\n                console.log(\"about to save user: \" + this.get(\"facts.apidata_data._id\"));\n                var self = this;\n                var vars = this.get(\"facts.data.vars\");\n                var fields = this.get(\"templateData\");\n                var facts = this.get(\"facts\");\n//                var fields = this.get(\"mergedArray\");\n                // Sync the values from the form with the values in mergedArray\n                var fieldValuePairs = $('#dossier_form').serializeArray();\n                $.each(fieldValuePairs, function(index, fieldValuePair) {\n                    self.updateValue(self.get(\"mergedArray\"), fieldValuePair.name, fieldValuePair.value);\n                    console.log(\"Item \" + index + \" is [\" + fieldValuePair.name + \",\" + fieldValuePair.value + \"]\");\n                });\n                var updateObjStore = {\n                    recordType: this.get(\"facts.data.recordType\"),\n                    vars: {\n                        fields: fields,\n                        user: this.get(\"facts.objId\")\n                    }\n                };\n                console.log(updateObjStore);\n                Ember.$.ajax(flowURL + '/objectstore?Authorization=' + sessionKey, {\n                    type: 'POST',\n                    async: false,\n                    data:  JSON.stringify(updateObjStore),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    context: this,\n                    success: function(data) {\n                        alert(\"User Saved Success\");\n                        console.log(data);\n                        this.set(\"dossier_exists\", true);\n                        var id = {\n                            \"_id\": data.RESPONSE.objId\n                        }\n                        Ember.set(facts, \"apidata_data\", id);\n                    },\n                    error: function(data) {\n                        alert(\"User Update Fail: \" + JSON.parse(data.responseText)[\"RESPONSE\"][\"MESSAGE\"]);\n                    }\n                });\n            }\n        }\n    });\n    App.ModalsService = Ember.Service.extend({\n        containerView: null,\n        open: function(name) {\n            var Modal = this.container.lookupFactory('component:'+name+'-modal');\n            var modal = Modal.create();\n            this.get('containerView').pushObject(modal);\n        },\n        close: function() {\n            this.get('containerView').popObject();\n        }\n    });\n\n    App.MyModalsComponent = Ember.ContainerView.extend({\n        elementId: 'my-modals',\n        modals: Ember.inject.service(),\n        didInsertElement: function() {\n            this.set('modals.containerView', this);\n        }\n    });\n\n    App.BaseModalComponent = Ember.Component.extend({\n        modals: Ember.inject.service(),\n        actions: {\n            close: function() {\n                this.get('modals').close();\n            }\n        }\n    });\n\n    App.PickerModalComponent = App.BaseModalComponent.extend({\n        layoutName: 'components/picker-modal',\n        pickerWrapper: null,\n        pickerData: null,\n        classNames: ['input-small'],\n        format: \"l\",\n        placeholder: Ember.computed.alias('format'),\n        iconOnRight: true,\n\n        didInsertElement: function () {\n            var self = this;\n            var format = this.get('format');\n\n            var pickerWrapper = this.$().datetimepicker({\n                format: 'l'\n                //viewMode: 'years'\n                //minDate: \"1/1/\" + (moment().year() - 2).toString()\n            });\n            this.set('pickerWrapper', pickerWrapper);\n\n            var pickerData = pickerWrapper.data(\"DateTimePicker\");\n            this.set('pickerData', pickerData);\n\n            if(this.get('datetime'))\n                pickerData.setDate(this.get('datetime'));\n\n            pickerWrapper.on('dp.change', function (ev) {\n                //self.sendAction('action', ev.format());\n                self.set('datetime', ev.date);\n            });\n        },\n\n        datetimeChanged: function () {\n            // get model datetime\n            var modelDatetime = this.get('datetime');\n            // get picker datetime\n            var picker = this.get('pickerData');\n            var pickerDatetime = picker.getDate();\n            // if not the same the overwrite model over picker\n            if (modelDatetime != pickerDatetime) {\n                picker.setDate(modelDatetime);\n            }\n            picker.hide();\n        }.observes('datetime')\n    });\n\n    function createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        // labelClass is a CSS class name for control labels\n        // fieldClass is a CSS class name applied to controls themselves\n        // subLabelClass is a CSS class name applied to the label for a subCategory - will likely provide a bolding\n        // subClass is a CSS class name applied to the inner div for a subCategory - will likely provide a nested view\n        // fieldId is the control id value\n        // fieldLabel is the Label value\n        // opts is an object which is expected to have optional properties {value, inputtype, options, results}\n        var returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><strong>' + fieldLabel + '</strong></label>';\n        returnHTML = returnHTML + '<div class=\"controls\">';\n        // var tvalue = \"\";\n        // console.log(opts.value);\n        // if(opts.value !== null)\n        // {\n        //     tvalue = opts.value;\n        // }\n        // else {\n        //     tvalue = \"\";\n        // }\n        if (typeof opts.inputtype === \"undefined\") opts.inputtype=\"default\";\n        switch (opts.inputtype)\n        {\n            case 'string':\n            case 'long':\n                //Basic Input\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'date':\n                // returnHTML = returnHTML + \"\";\n                break;\n            case 'image':\n                returnHTML = returnHTML + \"<div class='show-image' style='width:35%'><img src='\" + opts.value + \"' style='width:100%; height:300px' /><input class='\" + fieldClass +\" update' type='text' name='\" + fieldId + \"' value='\" + opts.value + \"' style='width: 100%'></div>\";\n                break;\n            case 'password':\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='password' name='\" + fieldId + \"' value='\" + opts.value + \"'>\";\n                break;\n            case 'enum':\n                //Basic Select Return\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                for (i = 0; i < opts.options.length; i++) {\n                    var selected = \"\";\n                    if (opts.options[i].id == opts.value)\n                    {\n                        selected = \"selected\";\n                    }\n                    returnHTML = returnHTML + \"<option \" + selected +\" value='\" + opts.options[i].id +  \"'>\" + opts.options[i].label + \"</option>\";\n                }\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'boolean':\n                //Basic boolean...\n                var isTrue = \"\";\n                var isFalse = \"\";\n                if((opts.value == 'true') || (opts.value === true))\n                {\n                    isTrue = \"selected\"; //checked old way\n                }else{\n                    isFalse = \"selected\"; //checked old way\n                }\n                returnHTML = returnHTML + \"<select class='\" + fieldClass +\"' name='\" + fieldId +  \"'>\"\n                returnHTML = returnHTML + \"<option \" + isTrue +\" value='True'>True</option>\";\n                returnHTML = returnHTML + \"<option \" + isFalse +\" value='False'>False</option>\";\n                returnHTML = returnHTML + \"</select>\"\n                break;\n            case 'category':\n                // returnHTML = '<label class=\"' + labelClass + '\" for=\"' + fieldId + '\"><h3>' + fieldLabel + '</h3></label>';\n                // returnHTML = returnHTML + '<div class=\"' + subClass + '\">';\n                returnHTML = \"<div class='white-text' id='collapseToggle'>\";\n                returnHTML = returnHTML + \"<h3 href='#\" + fieldId + \"' style='cursor:pointer;' data-toggle='collapse' class='collapsed' aria-expanded='false'>\" + fieldLabel + \"</h3>\";\n                returnHTML = returnHTML + \"<div id=\" + fieldId + \" aria-expanded='false' class='\" + subClass + \" collapse'>\";\n                opts.fields.forEach(function(opt) {\n                    returnHTML = returnHTML + createInput(labelClass, fieldClass, subLabelClass, subClass, opt.id, opt.label, opt);\n                });\n                returnHTML = returnHTML + \"</div>\";\n                break;\n            default:\n                returnHTML = returnHTML + \"<input class='\" + fieldClass +\"' type='text' name='\" + fieldId + \"' disabled=true value='\" + opts.value + \"'>\";\n                break;\n        }\n        returnHTML = returnHTML + '</div>';\n        return new Handlebars.SafeString(returnHTML);\n    };\n    Ember.Handlebars.registerBoundHelper('createInput', function(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts) {\n        //expects opts: {id, label, value, inputtype, options}\n        return createInput(labelClass, fieldClass, subLabelClass, subClass, fieldId, fieldLabel, opts);\n    });\n</script>\n\n\n<script type=\"text/x-handlebars\" data-template-name=\"auto\">\n    <div class=\"panel panel-info\">\n        <div class=\"panel-heading\" style=\"font-weight:bolder;\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accord\" href=\"#collapseB\">{{params.title}}</a>\n            </h4>\n        </div>\n        <div id=\"collapseB\" class=\"panel-collapse collapse in\">\n            <div id=\"body\" class=\"panel-body content\" id='accord'>\n                {{#if isAdmin}}\n                <div class=\"text-right\" style=\"margin-bottom: 5px;\">\n                    <button id=\"insert\" class=\"btn btn-warning\" {{action 'insertAction' target=\"controller\"}}>{{controller.buttonText}}</button>\n                    {{#if controller.isCancelable}}<button id=\"insert\" class=\"btn btn-danger\" {{action 'cancelAction' target=\"controller\"}}>Cancel</button>{{/if}}\n                </div>\n                {{#if controller.isInserting}}\n                <div style=\"outline: 1px solid darkorange; background: orange;\">\n                    {{partial \"newfield\"}}\n                    <div align=\"center\" style=\"padding: 15px;\">\n                        {{#if hasTemplateChanges}}\n                        <button id=\"save\" class=\"btn btn-primary\" {{action 'templateUpdateAction' target=\"controller\"}}>Save Template</button>\n                        {{/if}}\n                    </div>\n                </div>\n                {{/if}}\n                {{/if}}\n                <form id=\"dossier_form\">\n                    {{#each field in controller.mergedArray}}\n                    <div class=\"control-group\">\n                        {{createInput \"control-label\" \"form-control\" \"h2\" \"panel-body\" field.id field.label field}}\n                    </div>\n                    {{/each}}\n                    <div class=\"control-group\">\n                        {{my-modals}}\n                    </div>\n                </form>\n                <div align=\"center\">\n                    <button id=\"save\" class=\"btn btn-primary\" {{action 'userUpdateAction' target=\"controller\"}}>Save</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"_newfield\">\n    <div style=\"padding: 10px;\">\n        <label class=\"control-label\" for=\"newLocation\"><h3>Field Location</h3></label>\n        {{{view \"select\" content=controller.locations class=\"form-control\" id=\"newLocation\"\n        value=controller.newLocation optionValuePath=\"content.reference\" optionLabelPath=\"content.label\"}}}\n        <label class=\"control-label\" for=\"newLabel\"><h3>Field Label</h3></label>\n        {{input class=\"form-control\" id=\"newLabel\" value=controller.newLabel}}\n        <label class=\"control-label\" for=\"newId\"><h3>Unique Field Id</h3></label>\n        {{input class=\"form-control\" id=\"newId\" value=controller.newId}}\n        <label class=\"control-label\" for=\"newType\"><h3>Field Type</h3></label>\n        {{{view \"select\" content=controller.selectableTypes class=\"form-control\" id=\"newType\"\n        value=controller.newType optionValuePath=\"content.id\" optionLabelPath=\"content.label\"}}}\n        {{#if isEnum}}\n        <div class=\"panel-body\">\n            <h4>New Dropdown Options</h4><br>\n            <ul>\n                {{#each option in controller.newEnumOptions}}\n                <li>{{option.id}} - {{option.label}}</li>\n                {{/each}}\n            </ul>\n            <label class=\"control-label\" for=\"newOptionLabel\"><h3>Option Label</h3></label>\n            {{input class=\"form-control\" id=\"newOptionLabel\" value=controller.newOptionLabel}}\n            <label class=\"control-label\" for=\"newOptionId\"><h3>Unique Option Id</h3></label>\n            {{input class=\"form-control\" id=\"newOptionId\" value=controller.newOptionId}}\n            <div align=\"center\">\n                <button id=\"add\" class=\"btn btn-primary\" {{action 'addAction' controller.newOptionId controller.newOptionLabel controller.newEnumOptions target=\"controller\"}}>Add</button>\n            </div>\n        </div>\n        {{/if}}\n    </div>\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"components/picker-modal\">\n    <div class=\"form-group\">\n        <div class='input-group date'>\n            {{#if iconOnRight}}\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            {{else}}\n            <span class=\"input-group-addon\">\n                <span class=\"glyphicon glyphicon-calendar\"></span>\n            </span>\n            <input type='text' placeholder=\"mm/dd/yyyy\" class=\"form-control\" />\n            {{/if}}\n        </div>\n    </div>\n</script>","facts":{}},"checksum":"6552C2C3CD75D83783C34D16B156FAA85C15E4F6AA062CE3620E25F56DB858E5L28578"},{"_id":{"$oid":"566dbecb1a30ff811993174d"},"id":"566dbecb1a30ff811993174d","owner":{},"recType":"app","name":"Active Directory Default/List View","desc":"User list page for renderring the list of users retrieved from Active Directory by given a specific group path","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032843216,"createDate":{"$date":1450032843216},"origin":{"id":"5669cd2b3800008208c7b817","name":"Active Directory Default/List View","desc":"User list page for renderring the list of users retrieved from Active Directory by given a specific group path","creatorId":"tpanagos@point.io","createDate":1450032843216,"checksum":"9FF60384EC2E57AEDF7C5A84AE02CE5C4368070E6BE498B8D7FCDF5407AB8F20L1824"},"data":{"form":"<script type=\"text/javascript\">\n\n    App.FileController = Ember.Controller.extend({\n        facts: jsonTask.FACTS,\n        actions: {\n            submitAction: function () {\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n            }\n        }\n    });\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"file\">\n    <div class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\">\n        <div class=\"panel-heading\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseA\">Active Directory Profile Details</a>\n            </h4>\n        </div>\n        <div id=\"content panel-group\" id=\"accordion\">\n            <div style=\"padding: 10px;\">\n                <div class=\"panel panel-default\">\n                    <div id='bod' class=\"panel-body\">\n                        <div class=\"row\">\n                            <div class=\"control-group\">\n                                <div align=\"center\">\n                                    <label class=\"control-label\" for=\"entrylist\">Select a User</label>\n                                    {{view \"select\" id=\"entrylist\" name=\"objId\" class=\"form-control\" content=facts.apidata_data.users\n                                    optionValuePath=\"content.objectGUID\" optionLabelPath=\"content.displayName\"\n                                    prompt=\"Please Select\" value=facts.selectedEmp}}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>","facts":{}},"checksum":"9FF60384EC2E57AEDF7C5A84AE02CE5C4368070E6BE498B8D7FCDF5407AB8F20L1824"},{"_id":{"$oid":"566dbecb1a30ff091893174f"},"id":"566dbecb1a30ff091893174f","owner":{},"recType":"app","name":"Active Directory Profile View","desc":"Profile page for renderring the info retrieved from Active Directory","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032843579,"createDate":{"$date":1450032843579},"origin":{"id":"5669cd2b3300006f08db5ebc","name":"Active Directory Profile View","desc":"Profile page for renderring the info retrieved from Active Directory","creatorId":"tpanagos@point.io","createDate":1450032843579,"checksum":"CDEFFE2EAD2568F49590C9BC2A07BDA5E9F04F6B413A3BFC374B31B3934FADE6L3112"},"data":{"form":"<script type=\"text/javascript\">\n    var baseURL = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n    App.ProfileController = Ember.Controller.extend({\n        facts: jsonTask.FACTS\n    });\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"profile\">\n    <div class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\">\n        <div class=\"panel-heading\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseA\">Basic Profile</a>\n            </h4>\n        </div>\n        <div id=\"collapseA\" class=\"panel-collapse collapse in\">\n            <div class=\"content panel-group\" id=\"accordion\">\n                <div style=\"padding: 10px;\">\n                    <div class=\"panel panel-default\">\n                        <div id='bod' class=\"panel-body\">\n                            <!-- <label class=\"control-label\" for=\"profilePic\"><strong>Profile Picture</strong></label> -->\n                            <img id=\"profilePic\" src=\"http://corporate.comcast.com/images/Brian-Roberts-Jan-2013-2.jpg\" alt=\"\" width=\"300px\" height=\"168px\" /><br />\n                            <label class=\"control-label\" for=\"displayName\"><strong>Display Name</strong></label>\n                            {{input class=\"form-control\" id=\"displayName\" value=facts.displayName readonly=\"true\"}}\n                            <label class=\"control-label\" for=\"countryCode\"><strong>Country Code</strong></label>\n                            {{input class=\"form-control\" id=\"countryCode\" value=facts.countryCode readonly=\"true\"}}\n                            <label class=\"control-label\" for=\"distinguishedName\"><strong>Distinguished Name</strong></label>\n                            {{input class=\"form-control\" id=\"distinguishedName\" value=facts.distinguishedName readonly=\"true\"}}\n                            <label class=\"control-label\" for=\"givenName\"><strong>Given Name</strong></label>\n                            {{input class=\"form-control\" id=\"givenName\" value=facts.givenName readonly=\"true\"}}\n                            <label class=\"control-label\" for=\"userPrincipalName\"><strong>User Principal Name</strong></label>\n                            {{input class=\"form-control\" id=\"userPrincipalName\" value=facts.userPrincipalName readonly=\"true\"}}\n                            <label class=\"control-label\" for=\"mail\"><strong>Email</strong></label>\n                            {{input class=\"form-control\" id=\"mail\" value=facts.mail readonly=\"true\"}}\n                            <label class=\"control-label\" for=\"memberOf\"><strong>Member Of</strong></label>\n                            {{input class=\"form-control\" id=\"memberOf\" value=facts.memberOf readonly=\"true\"}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>","facts":{}},"checksum":"CDEFFE2EAD2568F49590C9BC2A07BDA5E9F04F6B413A3BFC374B31B3934FADE6L3112"},{"_id":{"$oid":"566dbecb1a30ff811993174d"},"id":"566dbecb1a30ff811993174d","owner":{},"recType":"app","name":"Active Directory Default/List View","desc":"User list page for renderring the list of users retrieved from Active Directory by given a specific group path","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032843216,"createDate":{"$date":1450032843216},"origin":{"id":"5669cd2b3800008208c7b817","name":"Active Directory Default/List View","desc":"User list page for renderring the list of users retrieved from Active Directory by given a specific group path","creatorId":"tpanagos@point.io","createDate":1450032843216,"checksum":"9FF60384EC2E57AEDF7C5A84AE02CE5C4368070E6BE498B8D7FCDF5407AB8F20L1824"},"data":{"form":"<script type=\"text/javascript\">\n\n    App.FileController = Ember.Controller.extend({\n        facts: jsonTask.FACTS,\n        actions: {\n            submitAction: function () {\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n            }\n        }\n    });\n</script>\n\n<script type=\"text/x-handlebars\" data-template-name=\"file\">\n    <div class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\">\n        <div class=\"panel-heading\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseA\">Active Directory Profile Details</a>\n            </h4>\n        </div>\n        <div id=\"content panel-group\" id=\"accordion\">\n            <div style=\"padding: 10px;\">\n                <div class=\"panel panel-default\">\n                    <div id='bod' class=\"panel-body\">\n                        <div class=\"row\">\n                            <div class=\"control-group\">\n                                <div align=\"center\">\n                                    <label class=\"control-label\" for=\"entrylist\">Select a User</label>\n                                    {{view \"select\" id=\"entrylist\" name=\"objId\" class=\"form-control\" content=facts.apidata_data.users\n                                    optionValuePath=\"content.objectGUID\" optionLabelPath=\"content.displayName\"\n                                    prompt=\"Please Select\" value=facts.selectedEmp}}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>","facts":{}},"checksum":"9FF60384EC2E57AEDF7C5A84AE02CE5C4368070E6BE498B8D7FCDF5407AB8F20L1824"},{"_id":{"$oid":"566dbecb1a30ff091893174f"},"id":"566dbecb1a30ff091893174f","owner":{},"recType":"app","name":"Active Directory Profile View","desc":"Profile page for renderring the info retrieved from Active Directory","creatorId":"tpanagos@point.io","updaterId":"tpanagos@point.io","tstamp":1450032843579,"createDate":{"$date":1450032843579},"origin":{"id":"5669cd2b3300006f08db5ebc","name":"Active Directory Profile View","desc":"Profile page for renderring the info retrieved from Active Directory","creatorId":"tpanagos@point.io","createDate":1450032843579,"checksum":"CDEFFE2EAD2568F49590C9BC2A07BDA5E9F04F6B413A3BFC374B31B3934FADE6L3112"},"data":{"form":"<script type=\"text/javascript\">\n    var baseURL = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n    App.ProfileController = Ember.Controller.extend({\n        facts: jsonTask.FACTS\n    });\n</script>\n<script type=\"text/x-handlebars\" data-template-name=\"profile\">\n    <div class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\">\n        <div class=\"panel-heading\">\n            <h4 class=\"panel-title\">\n                <a data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseA\">Basic Profile</a>\n            </h4>\n        </div>\n        <div id=\"collapseA\" class=\"panel-collapse collapse in\">\n            <div class=\"content panel-group\" id=\"accordion\">\n                <div style=\"padding: 10px;\">\n                    <div class=\"panel panel-default\">\n                        <div id='bod' class=\"panel-body\">\n                            <!-- <label class=\"control-label\" for=\"profilePic\"><strong>Profile Picture</strong></label> -->\n                            <img id=\"profilePic\" src=\"http://corporate.comcast.com/images/Brian-Roberts-Jan-2013-2.jpg\" alt=\"\" width=\"300px\" height=\"168px\" /><br />\n                            <label class=\"control-label\" for=\"displayName\"><strong>Display Name</strong></label>\n                            {{input class=\"form-control\" id=\"displayName\" value=facts.displayName readonly=\"true\"}}\n                            <label class=\"control-label\" for=\"countryCode\"><strong>Country Code</strong></label>\n                            {{input class=\"form-control\" id=\"countryCode\" value=facts.countryCode readonly=\"true\"}}\n                            <label class=\"control-label\" for=\"distinguishedName\"><strong>Distinguished Name</strong></label>\n                            {{input class=\"form-control\" id=\"distinguishedName\" value=facts.distinguishedName readonly=\"true\"}}\n                            <label class=\"control-label\" for=\"givenName\"><strong>Given Name</strong></label>\n                            {{input class=\"form-control\" id=\"givenName\" value=facts.givenName readonly=\"true\"}}\n                            <label class=\"control-label\" for=\"userPrincipalName\"><strong>User Principal Name</strong></label>\n                            {{input class=\"form-control\" id=\"userPrincipalName\" value=facts.userPrincipalName readonly=\"true\"}}\n                            <label class=\"control-label\" for=\"mail\"><strong>Email</strong></label>\n                            {{input class=\"form-control\" id=\"mail\" value=facts.mail readonly=\"true\"}}\n                            <label class=\"control-label\" for=\"memberOf\"><strong>Member Of</strong></label>\n                            {{input class=\"form-control\" id=\"memberOf\" value=facts.memberOf readonly=\"true\"}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</script>","facts":{}},"checksum":"CDEFFE2EAD2568F49590C9BC2A07BDA5E9F04F6B413A3BFC374B31B3934FADE6L3112"}]}