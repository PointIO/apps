{"_id":{"$oid":"5623ac54fd0afd8d33e3ed78"},"checksum":"0EBB73A27BFB5E87B575282C2A54788274A018850F467BC20EDFB5263FD5C7AEL3583","createDate":{"$date":"2015-10-18T14:27:32.443Z"},"creatorId":"tpanagos@point.io","data":{"facts":{},"form":"\u003cscript src=\"/assets/javascripts/ace.js\"\u003e\u003c/script\u003e\n\u003cscript\u003e\n    window.App.IndexController.reopen({\n        stringifiedFacts: function(){\n            return JSON.stringify(this.get(\"facts\"));\n        }.property(\"facts\"),\n        actions: {\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('loop');\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n                return true;\n            },\n            cancelAction: function () {\n                $('[name=wf_optionsOutcome]').val('end');\n                this.set(\"isCancelling\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n                return true;\n            }\n        }\n    });\n    App.AceEditorComponent = Ember.Component.extend({\n        tagName: 'pre',\n        content: function(key, val) {\n            if (!this.editor) {\n                this.preset = val;\n                return val;\n            }\n            if (arguments.length == 1) {\n                return this.editor.getSession().getValue();\n            }\n            var cursor = this.editor.getCursorPosition();\n            this.editor.getSession().setValue(val);\n            this.editor.moveCursorToPosition(cursor);\n            this.editor.setOption(\"maxLines\", 50);\n            return val;\n        }.property(),\n    \n        didInsertElement: function() {\n            this.editor = window.ace.edit(this.get(\"id\"));\n            this.editor.$blockScrolling = Infinity;\n            this.editor.setTheme('ace/theme/monokai');\n            this.editor.getSession().setMode('ace/mode/handlebars');\n    \n            var self = this;\n            this.editor.on('change', function() {\n                self.notifyPropertyChange('content');\n            });\n        }\n    });\n    //JSON\n    App.AceEditorJSONComponent = App.AceEditorComponent.extend({\n        didInsertElement: function() {\n            this._super();\n            this.editor.getSession().setMode('ace/mode/json');\n            this.editor.getSession().setUseWrapMode(true);\n    \n            if (this.preset) {\n                var o = JSON.parse(this.preset);\n                this.set('content', JSON.stringify(o, null, 2));\n                this.preset = null;\n            }\n        }\n    \n    });\n    \n    //JSON Preview\n    App.AceEditorJSONREADONLYComponent = App.AceEditorJSONComponent.extend({\n        didInsertElement: function() {\n            this._super();\n            this.editor.setReadOnly(true);\n    \n            if (this.preset) {\n                var o = JSON.parse(this.preset);\n                this.set('content', JSON.stringify(o, null, 2));\n                this.preset = null;\n            }\n        }\n    });\n\u003c/script\u003e\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"index\"\u003e\n    {{ace-editorJSONREADONLY content=controller.stringifiedFacts id='editorJSONREADONLY'}}\n    \u003cdiv class=\"row text-center\" style=\"padding:10px;\"\u003e\n        \u003cbutton type=\"button\" class=\"btn btn-success\" data-dismiss=\"modal\" {{action \"submitAction\"}}\u003eRERUN\u003c/button\u003e\n        \u003cbutton type=\"cancel\" class=\"btn btn-danger\" data-dismiss=\"modal\" {{action \"cancelAction\"}}\u003eCLOSE\u003c/button\u003e\n    \u003c/div\u003e\n    {{input type=\"hidden\" name=\"wf_optionsOutcome\" valueBinding=\"wf_optionsOutcome\"}}\n\u003c/script\u003e"},"desc":"A simple Ace-based viewer to see that values in the Fact block as JSON. Submit loops back.","id":"5623ac54fd0afd8d33e3ed78","name":"FACT VIEWER","origin":{"checksum":"0EBB73A27BFB5E87B575282C2A54788274A018850F467BC20EDFB5263FD5C7AEL3583","createDate":1.445178452442e+12,"creatorId":"tpanagos@point.io","desc":"A simple Ace-based viewer to see that values in the Fact block as JSON. Submit loops back.","id":"5623a96efd0afd0b02e3ed0d","name":"FACT VIEWER"},"owner":{},"recType":"app","tstamp":1.445178452443e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623ac54fd0afd8d33e3ed7a"},"checksum":"6F956B9F9DA53955675C57908A90A90EC32F33A53EE6AE5C47EB61E36F185C78L23884","createDate":{"$date":"2015-10-18T14:27:32.755Z"},"creatorId":"tpanagos@point.io","data":{"form":"    \u003cscript type=\"text/javascript\"\u003e\n        var baseURL = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n\n        App.FileController = Ember.Controller.extend({\n            init: function () {\n                console.log(\"fileinit\");\n            },\n            queryParams: {path: \"\", containerid: \"\"},\n            containerid: null,\n            path: null,\n            showShareList: true,\n            bPopUp: null,\n            isFileListEmpty: true,\n            dataArray: function () {\n                var dA = Ember.A();\n                var raw = this.get(\"model\");\n                for (var i in raw) {\n                    dA.pushObject(raw[i]);\n                }\n                return dA\n            }.property(\"model\"),\n            filelist: Ember.A(),\n            folderlist: Ember.A(),\n            folderstack: Ember.A(),\n            shares: function () {\n                return this.get(\"dataArray\");\n            }.property(\"dataArray\"),\n            newFolderName: \"\",\n            headers: {\n                Authorization: sessionKey\n            },\n            uploadURL: function () {\n                return baseURL + '/apidoc/files/upload/' + this.get('folderlist.shareid');\n            }.property('folderList.shareid'),\n            uploadFile: null,\n            isLoading: false,\n            isRoot: function() {\n                return (this.get(\"folderlist\").queryParams.path == \"\")\n            }.property(\"folderlist.queryParams.path\"),\n            actions: {\n                submitAction: function () {\n                    this.set('isLoading', true);\n                    var self = this;\n                    // We really want to inject RELATEDS\n                    var injectableFiles = [];\n                    this.get(\"filelist\").forEach(function (file) {\n                        injectableFiles.pushObject({\n                            \"ID\": file.link,\n                            \"LABEL\": file.name,\n                            \"TOOLTIP\": \"file.label\",\n                            \"TYPE\": \"PIO\",\n                            \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=\" + file.link\n                        });\n                    });\n                    var injectableFacts = {\n                        'REQUEST': {\n                            'INPUT': {\n                                'RELATEDS': injectableFiles,\n                                'FIELDS': [],\n                                'FACTS': []\n                            }\n                        }\n                    };\n                    Ember.$.ajax({\n                        type: \"PUT\",\n                        async: true,\n                        url: baseURL + '/messages/injectListJSON/' + taskid + '?Authorization=' + sessionKey,\n                        data: JSON.stringify(injectableFacts),\n                        dataType: 'json',\n                        contentType: 'application/json',\n                        success: function (data) {\n                            self.set('isLoading', false);\n                            //$('#emberForm').submit();\n                        }\n                    });\n                    return true; //this bubbles the action up\n                },\n                addFile: function (share) {\n                    this.set('isLoading', true);\n                    var self = this;\n                    //create a link\n                    var linkURL = \"\";\n                    //v3\n                    var servercall = baseURL + \"/apidoc/links/create/\" + share.shareid + \"?Authorization=\" + sessionKey;\n                    $.ajax({\n                        type: \"POST\",\n                        async: false,\n                        data: {\n                            'containerid': share.containerid,\n                            'path': share.path,\n                            'fileid': share.fileid,\n                            'filename': share.name\n                        },\n                        url: servercall,\n                        success: function (data) {\n                            linkURL = data.RESPONSE.linkid;\n                            self.set('isLoading', false);\n                        }\n                    });\n                    //add it to the list\n                    var fileArray = this.get(\"filelist\");\n                    fileArray.pushObject({name: share.name, link: linkURL, label: share.name});\n                    this.set(\"isFileListEmpty\", false);\n                },\n                removeFile: function (id) {\n                    var fileList = this.get('filelist');\n                    fileList.removeObject(id);\n                    if (fileList.length == 0)\n                        this.set(\"isFileListEmpty\", true);\n                },\n                createFolderClick: function (shareid, containerid, path, modalId) {\n                    var self = this;\n                    this.set('isLoading', true);\n                    var servercall = baseURL + \"/apidoc/folders/create/\" + shareid\n                    $.ajax({\n                        type: \"POST\",\n                        async: false,\n                        data: {'containerid': containerid, 'path': path, 'foldername': this.get('newFolderName')},\n                        url: servercall,\n                        headers: {\n                            Authorization: sessionKey\n                        },\n                        cache: false,\n                        success: function (data) {\n                            self.send('modalFinished', modalId);\n                        }\n                    });\n                },\n                modalFinished: function (modalId) {\n                    $('#'+modalId).modal(\"hide\");\n                    var thisFolder = this.get(\"folderlist\");\n                    this.send('openShare', thisFolder.sharename, thisFolder.sharetype, thisFolder.shareid, thisFolder.queryParams.path, thisFolder.queryParams.containerid);\n                    this.send('setLoading', false);\n                },\n                returnToSites: function() {\n                    this.set('showShareList', true);\n                },\n                navigateToParent: function () {\n                    if (this.get('folderstack').length == 0) {\n                        this.send('returnToSites');\n                    }\n                    else {\n                        var current = this.get('folderstack').pop();\n                        this.set('folderlist', current);\n                    }\n                },\n                setLoading: function(state) {\n                  this.set('isLoading', state);\n                },\n                openShare: function (sharename, sharetype, shareid, path, containerid) {\n                    var self = this;\n                    if (typeof containerid != 'undefined')\n                        self.set('containerid', containerid);\n                    else\n                        self.set('containerid', \"\");\n                    if (typeof path != 'undefined')\n                        self.set('path', path);\n                    else\n                        self.set('path', \"\");\n                    var queryParams = {path: self.get('path'), containerid: self.get('containerid')};\n                    Ember.$.ajax({\n                        async: false,\n                        url: baseURL + '/apidoc/folders/list/' + shareid,\n                        data: queryParams,\n                        headers: {\n                            Authorization: sessionKey\n                        },\n                        success: function (data) {\n                            var sharesList = Ember.A();\n                            (data.RESPONSE.RESULT.forEach(function (share) {\n                                share.isDir = (share.type === 'DIR');\n                                var params = [];\n                                if (share.path) {\n                                    params.push('path=' + encodeURIComponent(share.path))\n                                }\n                                if (share.containerid) {\n                                    params.push('containerid=' + encodeURIComponent(share.containerid))\n                                }\n                                if (share.fileid) {\n                                    params.push('fileid=' + encodeURIComponent(share.fileid))\n                                }\n                                if (share.name) {\n                                    params.push('filename=' + encodeURIComponent(share.name))\n                                }\n                                params.push('asBinary=true');\n\n                                share.downloadURL = baseURL + '/apidoc/files/download/' + share.shareid + '?Authorization=' + sessionKey + '\u0026' + params.join(\"\u0026\")\n\n                                sharesList.pushObject(share);\n                            }));\n                            if (self.get('folderlist.shareid') \u0026\u0026 (containerid) \u0026\u0026 (self.get('folderlist.queryParams.containerid') != containerid)) {\n                                // Push the previous folder if there IS a previous folder \u0026 if this is NOT the top folder \u0026 we aren't just refreshing the current folder\n                                self.get('folderstack').push({\n                                    shares: self.get('folderlist.shares'),\n                                    shareid: self.get('folderlist.shareid'),\n                                    sharename: self.get('folderlist.sharename'),\n                                    sharetype: self.get('folderlist.sharetype'),\n                                    queryParams: self.get('folderlist.queryParams')\n                                });\n                                //console.log(containerid + \" Push \u0026 length is now: \" + self.get('folderstack').length);\n                            }\n                            // Set the current folder\n                            self.set('folderlist.shares', sharesList);\n                            self.set('folderlist.shareid', shareid);\n                            self.set('folderlist.sharename', sharename);\n                            self.set('folderlist.sharetype', sharetype);\n                            self.set('folderlist.queryParams', queryParams);\n                        }\n                    });\n                    this.set('showShareList', false);\n                }\n            }\n        });\n\n        App.CreateFolderRoute = Ember.Route.extend({\n            model: function (params, options) {\n                var model = {};\n                model.shareid = params.shareid\n                model.containerid = options.queryParams.containerid\n                model.path = options.queryParams.path\n                model.sessionKey = sessionKey\n                model.url = document.URL\n                model.baseURL = baseURL\n                return model;\n            }\n        });\n\n        App.UploadFileRoute = Ember.Route.extend({\n            model: function (params, options) {\n                var model = {};\n                model.shareid = params.shareid\n                model.containerid = options.queryParams.containerid\n                model.path = options.queryParams.path\n                model.sessionKey = sessionKey\n                model.url = document.URL\n                model.baseURL = baseURL\n                return model;\n            }\n        });\n        App.FileUploadComponent = EmberUploader.FileField.extend({\n            multiple: true,\n            url: '',\n            filesDidChange: function (files) {\n                var self = this;\n                var uploadUrl = this.get('url');\n\n                var uploader = EmberUploader.Uploader.create({\n                    url: uploadUrl,\n                    paramName: 'uploadfile'\n                });\n                uploader.on('didUpload', function (e) {\n                    self.sendAction('action', self.get('actionParams'));\n                });\n                if (!Ember.isEmpty(files)) {\n                    this.sendAction('startAction', true);\n                    uploader.uploadSerial(files, this.get('params'), this.get('headers'));\n                }\n            }\n        });\n\n    \u003c/script\u003e\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"file\"\u003e\n\n        \u003cdiv class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\"\u003e\n            \u003cdiv class=\"panel-heading\"\u003e\n                \u003ch4 class=\"panel-title\"\u003e\n                    \u003ca data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseA\"\u003eAttach Related Files\u003c/a\u003e\n                \u003c/h4\u003e\n            \u003c/div\u003e\n            \u003cdiv id=\"collapseA\" class=\"panel-collapse collapse in\"\u003e\n                \u003cdiv class=\"container-fluid\"\u003e\n                    \u003cdiv id=\"content panel-group\" id=\"accordion\"\u003e\n                        \u003cdiv style=\"padding: 10px;\"\u003e\n                            \u003cdiv class=\"panel panel-default\"\u003e\n                                \u003cdiv id='bod' class=\"panel-body\"\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-md-9\"\u003e\n                                            {{#if controller.showShareList}}\n                                            \u003cdiv id=\"sharelist\" class=\"row-fluid\"\u003e\n                                                {{partial \"sharelist\"}}\n                                            \u003c/div\u003e\n                                            {{/if}}\n                                            {{#unless controller.showShareList}}\n                                            \u003cdiv id=\"folderlist\" class=\"row-fluid\"\u003e\n                                                {{partial \"_folderlist\"}}\n                                            \u003c/div\u003e\n                                            {{/unless}}\n                                        \u003c/div\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv align=\"center\" style={{unless controller.isLoading \"display:none;\"}}\u003e\n                        \u003cimg src=\"/assets/images/throbber.gif\"/\u003e\n                    \u003c/div\u003e\n                    {{#unless controller.isFileListEmpty}}\n                    \u003cdiv id=\"content panel-group\" id=\"accordion\"\u003e\n                        \u003cdiv style=\"padding: 10px;\"\u003e\n                            \u003cdiv class=\"panel panel-default\"\u003e\n                                \u003cdiv class=\"panel-heading\"\u003e\n                                    \u003ch3 class=\"panel-title\"\u003eAttached Files\u003c/h3\u003e\n                                \u003c/div\u003e\n                                \u003cdiv id='bod' class=\"panel-body\"\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-xs-12 col-sm-4 col-md-4\"\u003e\u003clabel\u003eFile Name\u003c/label\u003e\u003c/div\u003e\n                                        \u003cdiv class=\"hidden-xs col-sm-6 col-md-6\"\u003e\u003clabel\u003eFile Label\u003c/label\u003e\u003c/div\u003e\n                                    \u003c/div\u003e\n                                    {{#each file in controller.filelist}}\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-xs-12 col-sm-4 col-md-4\"\u003e\u003cp class=\"form-control-static\"\u003e{{file.name}}\u003c/p\u003e\u003c/div\u003e\n                                        \u003cdiv class=\"col-xs-12 col-sm-6 col-md-6\"\u003e{{input type=\"text\" class=\"form-control\"\n                                            value=file.label}}\n                                        \u003c/div\u003e\n                                        \u003cdiv class=\"hidden-xs col-sm-2 col-md-2\"\u003e\n                                            \u003cbutton class=\"btn btn-danger btn-sm\" {{action\n                                            \"removeFile\" file}}\u003eRemove\u0026nbsp;\u003cspan\n                                                class=\"glyphicon glyphicon-trash\"\u003e\u003c/span\u003e\u003c/button\u003e\n                                        \u003c/div\u003e\n                                    \u003c/div\u003e\n                                    {{/each}}\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    {{/unless}}\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_sharelist\"\u003e\n        \u003ctable class=\"table table-bordered table-striped table-condensed col-md-10\"\u003e\n            \u003cthead\u003e\n            \u003ctr\u003e\n                \u003cth\u003eName\u003c/th\u003e\n                \u003cth\u003eSite Type\u003c/th\u003e\n            \u003c/tr\u003e\n            \u003c/thead\u003e\n            \u003ctbody\u003e\n            {{#each share in controller.shares}}\n            \u003ctr\u003e\n                \u003ctd\u003e\u003ca {{action \"openShare\" share.share.name share.share.type share.share.id share.share.path share.share.containerid}}\u003e{{share.share.name}}\u003c/a\u003e\u003c/td\u003e\n                \u003ctd\u003e{{share.share.type}}\u003c/td\u003e\n            \u003c/tr\u003e\n            {{/each}}\n            \u003c/tbody\u003e\n        \u003c/table\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_createFolder\"\u003e\n        \u003cdiv class=\"modal fade\" id=\"button-modal-create\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\"\u003e\n            \u003cdiv class=\"modal-dialog\"\u003e\n                \u003cdiv class=\"modal-content\"\u003e\n                    \u003cform id=\"createfolderform\" class=\"form-horizontal\" enctype=\"application/x-www-form-urlencoded\" method=\"post\"\u003e\n                        \u003cdiv class=\"modal-header\"\u003e\n                            \u003cbutton type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"\u003e\n                                \u003cspan aria-hidden=\"true\"\u003e\u0026times;\u003c/span\u003e\n                            \u003c/button\u003e\n                            \u003ch4 class=\"modal-title\" id=\"myModalLabel\"\u003eNew Folder\u003c/h4\u003e\n                        \u003c/div\u003e\n                        \u003cdiv class=\"modal-body\"\u003e\n                            \u003cdiv class=\"form-group\"\u003e\n                                {{input id=\"createfolder\" name=\"foldername\" class=\"form-control\" type=\"text\" value=controller.newFolderName}}\n                                \u003cbutton class=\"btn btn-default\" type=\"submit\" {{action \"createFolderClick\" folderlist.shareid containerid path \"button-modal-create\"}}\u003eCreate\u003c/button\u003e\n                            \u003c/div\u003e\n                            \u003cdiv align=\"center\" style={{unless controller.isLoading \"display:none;\"}}\u003e\n                                \u003cimg src=\"/assets/images/throbber.gif\"/\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/form\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_uploadFile\"\u003e\n        \u003cdiv class=\"modal fade\" id=\"button-modal-upload\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\"\u003e\n            \u003cdiv class=\"modal-dialog\"\u003e\n                \u003cdiv class=\"modal-content\"\u003e\n                    \u003cform id=\"fileuploadform\" class=\"form-horizontal\" enctype=\"multipart/form-data\" method=\"post\"\u003e\n                        \u003cdiv class=\"modal-header\"\u003e\n                            \u003cbutton type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"\u003e\n                                \u003cspan aria-hidden=\"true\"\u003e\u0026times;\u003c/span\u003e\n                            \u003c/button\u003e\n                            \u003ch4 class=\"modal-title\" id=\"myModalLabel\"\u003eFile Upload\u003c/h4\u003e\n                        \u003c/div\u003e\n                        \u003cdiv class=\"modal-body\"\u003e\n                            \u003cdiv class=\"form-group\"\u003e\n                                {{file-upload class=\"form-control\" url=controller.uploadURL\n                                params=controller.folderlist.queryParams\n                                headers=controller.headers action='modalFinished'\n                                actionParams=\"button-modal-upload\" startAction='setLoading'}}\n                            \u003c/div\u003e\n                            \u003cdiv align=\"center\" style={{unless controller.isLoading \"display:none;\"}}\u003e\n                                \u003cimg src=\"/assets/images/throbber.gif\"/\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/form\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_folderlist\"\u003e\n        \u003cdiv class=\"panel-heading\"\u003e\n            \u003ch2 class=\"panel-title\"\u003e{{controller.folderlist.sharename}}\u003cspan style=\"float:right;\"\u003e\u003cem\u003e{{controller.folderlist.sharetype}}\u003c/em\u003e\u003c/span\u003e\u003c/h2\u003e\n        \u003c/div\u003e\n        \u003cdiv id=\"browseOnly\"\u003e\n            \u003c!--\u003cbutton type=\"button\" class=\"btn btn-default {{if controller.isRoot 'disabled'}}\" {{action \"navigateToParent\" controller.folderlist.shareid}}\u003e--\u003e\n            \u003c!--\u003cspan class=\"glyphicon glyphicon-level-up\"\u003e\u003c/span\u003e \u0026nbsp;Back to Parent--\u003e\n            \u003c!--\u003c/button\u003e--\u003e\n            {{partial 'uploadFile'}}\n            {{partial 'createFolder'}}\n        \u003c/div\u003e\n        \u003ctable class=\"table table-bordered table-striped col-md-12\"\u003e\n            \u003cthead\u003e\n            \u003ctr\u003e\n                \u003cth\u003e\u003ca {{action \"returnToSites\"}}\u003eHome\u003c/a\u003e \u003ca {{action \"navigateToParent\" controller.folderlist.shareid}}\u003e/{{controller.folderlist.queryParams.path}}\u003c/a\u003e\u003c/th\u003e\n                \u003cth\u003e\u003c/th\u003e\n            \u003c/tr\u003e\n            \u003c/thead\u003e\n            \u003ctbody\u003e\n            {{#each controller.folderlist.shares as |share|}}\n            \u003ctr\u003e\n                \u003ctd\u003e\n                    {{#if share.isDir}}\n                    \u003ca {{action \"openShare\" controller.folderlist.sharename controller.folderlist.sharetype share.shareid share.path share.containerid}}\u003e\n                    \u003cspan class=\"glyphicon glyphicon-folder-open\"\u003e\u003c/span\u003e \u0026nbsp;\n                    {{share.name}}\n                    \u003c/a\u003e\n                    {{/if}}\n                    {{#unless share.isDir}}\n                    \u003ca href=\"{{share.downloadURL}}\"\u003e\n                        \u003cspan class=\"glyphicon glyphicon-file\" style=\"color: silver;\"\u003e\u003c/span\u003e \u0026nbsp;\n                        {{share.name}}\n                    \u003c/a\u003e\n                    {{/unless}}\n                \u003c/td\u003e\n                \u003ctd align=\"center\"\u003e\n                    {{#unless share.isDir}}\n                    \u003c!--\u003ca class=\"btn btn-default\" href=\"{{share.downloadURL}}\"\u003e--\u003e\n                        \u003c!--\u003cspan class=\"glyphicon glyphicon-download\"\u003e\u003c/span\u003e \u0026nbsp; Download--\u003e\n                    \u003c!--\u003c/a\u003e--\u003e\n                    \u003cbutton class=\"btn btn-success\" {{action\n                    \"addFile\" share}}\u003e\n                    \u003cspan class=\"glyphicon glyphicon-paperclip\"\u003e\u003c/span\u003e \u0026nbsp; Attach File\n                    \u003c/button\u003e\n                    {{/unless}}\n                \u003c/td\u003e\n            \u003c/tr\u003e\n            {{/each}}\n            \u003c/tbody\u003e\n            \u003ctfoot\u003e\n                \u003ctr\u003e\n                    \u003ctd colspan=\"2\"\u003e\n                        \u003ca data-insertid=\"1\" class=\"btn btn-success\" data-toggle=\"modal\" data-target=\"#button-modal-upload\"\u003eUpload Files\u003c/a\u003e\n                        \u003ca data-insertid=\"1\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#button-modal-create\"\u003eCreate Folder\u003c/a\u003e\n                    \u003c/td\u003e\n                \u003c/tr\u003e\n            \u003c/tfoot\u003e\n        \u003c/table\u003e\n    \u003c/script\u003e"},"desc":"Recently Converted Form Record","id":"5623ac54fd0afd8d33e3ed7a","name":"apidoc select \u0026 preview","origin":{"checksum":"6F956B9F9DA53955675C57908A90A90EC32F33A53EE6AE5C47EB61E36F185C78L23884","createDate":1.445178452755e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"5623a9a3fd0afd0e07e3ed23","name":"apidoc select \u0026 preview"},"owner":{},"recType":"app","tstamp":1.445178452755e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623ac55fd0afd9033e3ed7c"},"checksum":"F83560DAAFA8AD9C4A18C80917E7CF8862EF6BACDEBB9AC85B9BC3DF1E3B9832L10743","createDate":{"$date":"2015-10-18T14:27:33.075Z"},"creatorId":"tpanagos@point.io","data":{"form":"    \u003cscript type='text/javascript'\u003e\n\n        var serverUrl = \"http://api.point.io/api/v2/\";\n\n        App.Related = Ember.Object.extend({\n            \"id\": \"1f813e0c-e523-4d13-a255-793e3b20786a\",\n            \"label\": \"Joint_Venture_Agreement.pdf\",\n            \"tooltip\": \"Download allowed\",\n            \"type\": \"PIO\",\n            \"url\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=02E67D51-9395-42FB-B22FB8CE50DE674D\",\n            \"shareid\": \"\",\n            \"containerid\": \"\",\n            \"remotepath\": \"\",\n            \"fileid\": \"\",\n            \"filename\": \"\",\n            \"ak\": \"\",\n            \"totalPages\": 0,\n            \"imageURL\": \"\",\n            \"pageNum\": 0,\n            \"nextPage\": 0,\n            \"prevPage\": 0,\n            \"isLoaded\": false,\n            \"isDisplayed\": false\n        });\n\n        App.Related.reopenClass({\n            createRelatedfromRELATED: function(data) {\n                return App.Related.create({id: data.ID, label: data.LABEL, tooltip: data.TOOLTIP, type: data.TYPE, url: URL});\n            }\n        });\n\n        App.PreviewView = Ember.View.create({\n            didInsertElement: function () {\n                Ember.run.scheduleOnce('afterRender', this, 'afterRenderEvent');\n            },\n            afterRenderEvent: function () {\n                this.get('controller').send('loadpage', 1);\n            }\n        });\n\n        App.PreviewController = Ember.Controller.extend({\n            facts: jsonTask.FACTS,\n//        rawRelateds: [\n//            {\n//                \"ID\": \"5feb9cde-1ae6-4f2f-ac3b-87ac193daa4e\",\n//                \"LABEL\": \"Breakeven_Analysis_Chart.xls\",\n//                \"TOOLTIP\": \"Download allowed\",\n//                \"TYPE\": \"PIO\",\n//                \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=02E67D51-9395-42FB-B22FB8CE50DE674D\"\n//            },\n//            {\n//                \"ID\": \"fa13fb5c-2753-4a33-8460-a7470ca8d1ce\",\n//                \"LABEL\": \"Opp by Type.xlsx\",\n//                \"TOOLTIP\": \"Download prevented\",\n//                \"TYPE\": \"PIO\",\n//                \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=56272D8E-A30E-454F-85BA39BD8DB39093\"\n//            }\n//        ],\n            rawRelateds: jsonTask.RELATEDS, \n            relateds: function() {\n                var relatedObjs = Ember.A();\n                var self = this;\n                this.get(\"rawRelateds\").forEach( function(related) {\n                    relatedObjs.pushObject(App.Related.createRelatedfromRELATED(related));\n                });\n                return relatedObjs;\n            }.property(\"rawRelateds\"),\n            linkid: \"065ee71e-aa6f-45c0-a4a2-de86df05111d\",\n//            linkid: facts.linkid,\n            totalPages: 0,\n            pageNum: 1,\n            nextPage: 0,\n            prevPage: 0,\n            fileLinks: function () {\n\n            },\n            linkObject: function (linkObject) {\n//                var linkid = this.get(\"linkid\");\n                console.log(linkObject.id);\n//                var linkObject = {};\n                var servercall = serverUrl + \"links/\" + linkObject.id + \"/details?\"\n                        + \"ViewerAPIKey=5c3fe650-661d-4551-aff4-0f9d5ea8cb7d\"\n                        + \"\u0026ipaddress=127.0.0.1\";\n                $.ajax({\n                    type: \"GET\",\n                    async: false,\n                    url: servercall,\n                    success: function (data) {\n                        linkObject.shareid = data.RESULT.DATA[0][2];\n                        linkObject.containerid = data.RESULT.DATA[0][10];\n                        linkObject.remotepath = data.RESULT.DATA[0][9];\n                        linkObject.fileid = data.RESULT.DATA[0][7];\n                        linkObject.filename = data.RESULT.DATA[0][8];\n                        linkObject.ak = data.ACCESSKEY;\n                    }\n                });\n                return linkObject;\n            },\n            actions: {\n                loadpage: function (pageNum, id, tObject) {\n//                    console.log(\"loadpage \" + pageNum + \" Label \" + tObject.label);\n                    if (!tObject.isLoaded) {\n                        this.linkObject(tObject);\n                    }\n                    if (pageNum != tObject.pageNum) {\n//                        console.log(\"tObj \" + tObject.containerid + \" Label \" + tObject.label);\n                        var servercall = serverUrl + \"folders/files/preview.json?\"\n                                + \"containerid=\" + tObject.containerid\n                                + \"\u0026remotepath=\" + tObject.remotepath\n                                + \"\u0026fileid=\" + tObject.fileid\n                                + \"\u0026filename=\" + tObject.filename\n                                + \"\u0026folderid=\" + tObject.shareid\n                                + \"\u0026pagenum=\" + pageNum;\n                        var totalPages = 0;\n                        var imageUrl = \"\";\n                        $.ajax({\n                            type: \"GET\",\n                            async: false,\n                            headers: {\n                                \"Authorization\": tObject.ak\n                            },\n                            url: servercall,\n                            success: function (data) {\n                                console.log(data);\n                                tObject.set(\"totalPages\", data.NUMPAGES);\n                                tObject.set(\"imageUrl\", data.RESULT);\n                            }\n                        });\n                        tObject.set(\"isLoaded\", true);\n\n                        if ((pageNum + 1) \u003c= tObject.totalPages) {\n                            tObject.set('nextPage', pageNum + 1);\n                        } else {\n                            tObject.set('nextPage', 0);\n                        }\n\n                        if ((pageNum - 1) \u003e 0) {\n                            tObject.set('prevPage', pageNum - 1);\n                        } else {\n                            tObject.set('prevPage', 0);\n                        }\n                        tObject.set('pageNum', pageNum);\n                        document.getElementById(id).src = tObject.imageUrl;\n                    }\n                    tObject.set(\"isDisplayed\", true);\n                    $('#'+ id).show();\n//                    console.log(\"Displayed: \" + tObject.get(\"isDisplayed\") + \"isLoaded: \" + tObject.get(\"isLoaded\"));\n                },\n                closepage: function(id, tObject) {\n                    $('#'+ id).hide();\n                    tObject.set(\"isDisplayed\", false);\n                }\n            }\n        });\n\n        // This is here to trigger the rendering of the View to the end of the body tag\n        App.PreviewView.append();\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"preview\"\u003e\n        \u003cdiv class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\"\u003e\n            \u003cdiv class=\"panel-heading\"\u003e\n                \u003ch4 class=\"panel-title\"\u003e\n                    \u003ca data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseB\"\u003eRelated Files\u003c/a\u003e\n                \u003c/h4\u003e\n            \u003c/div\u003e\n            \u003cdiv id=\"collapseB\" class=\"panel-collapse collapse in\"\u003e\n                \u003cdiv class=\"container-fluid\"\u003e\n                    \u003cdiv class=\"panel panel-default\"\u003e\n                        \u003cdiv class=\"panel-body\"\u003e\n                            \u003ctable class=\"table table-striped table-bordered\"\u003e\n                                \u003cthead\u003e\n                                \u003ctr\u003e\n                                    \u003cth\u003e\u0026nbsp;\u003c/th\u003e\n                                    \u003cth\u003eLABEL\u003c/th\u003e\n                                    \u003cth\u003e\u0026nbsp;\u003c/th\u003e\n                                \u003c/tr\u003e\n                                \u003c/thead\u003e\n                                \u003ctbody\u003e\n                                    {{#each related in controller.relateds}}\n                                    {{partial \"file\"}}\n                                    {{/each}}\n                                \u003c/tbody\u003e\n                            \u003c/table\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_file\"\u003e\n            \u003ctr\u003e\n                \u003ctd align=\"right\" width=\"25\"\u003e\n                    {{#unless related.isDisplayed}}\n                    \u003cbutton class=\"btn btn-success\" {{action \"loadpage\" 1 related.id related}}\u003ePreview\u003c/button\u003e\n                    {{/unless}}\n                    {{#if related.isDisplayed}}\n                    \u003cbutton class=\"btn btn-success\" {{action \"closepage\" related.id related}}\u003eClose\u003c/button\u003e\n                    {{/if}}\n                \u003c/td\u003e\n                \u003ctd\u003e{{related.label}}\u003c/td\u003e\n                \u003ctd\u003e\n                {{#if related.isDisplayed}}\n                    \u003cp class=\"form-control-static\"\u003e\u003clabel\u003eShow Page\u003c/label\u003e {{related.pageNum}} of {{related.totalPages}}\u003c/p\u003e\n                    \u003cp\u003e{{#if related.prevPage}}\n                        \u003ca {{action \"loadpage\" related.prevPage related.id related}}\u003ePrevious\u003c/a\u003e\n                    {{/if}}\n                    {{#if related.prevPage}}\n                        {{#if related.nextPage}}\n                            \u0026nbsp;|\u0026nbsp;\n                        {{/if}}\n                    {{/if}}\n                    {{#if related.nextPage}}\n                        \u003ca {{action \"loadpage\" related.nextPage related.id related}}\u003eNext\u003c/a\u003e\n                    {{/if}}\u003c/p\u003e\n                {{/if}}\n                    \u003cp\u003e\u003cimg id={{related.id}} style=\"border:1px solid #021a40;\" hidden=true\u003e\u003c/p\u003e\n                {{#if related.isDisplayed}}\n                    \u003cp\u003e{{#if related.prevPage}}\n                        \u003ca {{action \"loadpage\" related.prevPage related.id related}}\u003ePrevious\u003c/a\u003e\n                    {{/if}}\n                    {{#if related.prevPage}}\n                        {{#if related.nextPage}}\n                            \u0026nbsp;|\u0026nbsp;\n                        {{/if}}\n                    {{/if}}\n                    {{#if related.nextPage}}\n                        \u003ca {{action \"loadpage\" related.nextPage related.id related}}\u003eNext\u003c/a\u003e\n                    {{/if}}\u003c/p\u003e\n                {{/if}}\n            \u003c/td\u003e\n            \u003c/tr\u003e\n\n    \u003c/script\u003e\n"},"desc":"Recently Converted Form Record","id":"5623ac55fd0afd9033e3ed7c","name":"apidoc preview","origin":{"checksum":"F83560DAAFA8AD9C4A18C80917E7CF8862EF6BACDEBB9AC85B9BC3DF1E3B9832L10743","createDate":1.445178453075e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"5623a9a3fd0afdf205e3ed25","name":"apidoc preview"},"owner":{},"recType":"app","tstamp":1.445178453075e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623d4c6fd0afd0887e3eeb1"},"checksum":"59E8581D1637A1C0CAA422501DC2B619B4E56D05872722BAB42F2D94AEC9FA92L8141","createDate":{"$date":"2015-10-18T17:20:06.966Z"},"creatorId":"tpanagos@point.io","data":{"form":"\u003cscript\u003e\n    window.App.IndexController.reopen({\n        core_form: '#emberForm',\n        isSubmitting : false,\n        isAcceptable: true,\n        actions: {\n            acceptableAction: function (state) {\n                this.set(\"isAcceptable\", state);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('approve');\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n                return true;\n            },\n            rejectChangeAction: function () {\n                $('[name=wf_optionsOutcome]').val('rejected');\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n                return true;\n            },\n            rejectProposeAction: function () {\n                $('[name=wf_optionsOutcome]').val('rejectedwithchanges');\n                this.set(\"isSubmitting\", true );\n                var myJsonObj = {\"REQUEST\": {\"INPUT\" : {\"COMMENT\" : \"Revised Changes Recorded\", \"FIELDS\" : [],\"FACTS\": {\"SectionsDelta\":facts.Sections}}}};\n                /*modify fact*/\n                $.ajax({\n                    url: \"/messages/injectListJSON/\"+jsonTask.DETAILS.ID+\"?Authorization=\"+sessionKey,\n                    type: \"PUT\",\n                    data: JSON.stringify(myJsonObj),\n                    contentType: \"application/json\",\n                    success: function(data){\n                        console.log(\"ajax update successful\");\n                        // here you could perform your actions like persisting to the server or so\n                        $('#emberForm').submit();\n                    },\n                    failure: function(data){\n                        console.log(\"ajax update failed\");\n                    }\n                });\n            },\n            goAction: function () {\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n            },\n            saveQAction: function(taskId) {\n                var currQ = this.get(\"currentQuestionLoop\");\n                var myfacts = this.get('facts.thisQuestionnaire');\n                var mystagename = this.get('currentStageName');\n                var mystage = myfacts[mystagename];\n                var myQuestionnaire = this.get('facts.thisQuestionnaire');\n            }\n        }\n    });\n\n    App.RadioButtonComponent = Ember.Component.extend({\n\n        tagName: 'input',\n        type: 'radio',\n        attributeBindings: [ 'checked', 'name', 'type', 'value' ],\n\n        checked: function () {\n            if (this.get('value') === this.get('groupValue')) {\n                Ember.run.once(this, 'takeAction');\n                return true;\n            } else { return false; }\n        },\n\n        takeAction: function() {\n            this.sendAction('selectedAction', this.get('value'));\n        },\n\n        change: function () {\n            this.set('groupValue', this.get('value'));\n            Ember.run.once(this, 'checked'); //manual observer\n        }\n\n    });\n\u003c/script\u003e\n\n\u003cstyle\u003e\n    html {\n        display: block !important;\n    }\n    table {\n        border-collapse: collapse;\n        border-spacing: 1; }\n\n    /* line 28, ../../../../../../vendor/bundle/ruby/1.9.1/gems/compass-0.12.2/frameworks/compass/stylesheets/compass/reset/_utilities.scss */\n    caption, th, td {\n        text-align: center;\n        font-weight: normal;\n        vertical-align: top; }\n\u003c/style\u003e\n\n\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"index\"\u003e\n    \u003cdiv class=\"container\" class=\"form-horizontal\" class=\" js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths\" data-ember-extension=\"1\" style=\"display: block;\"\u003e\n        \u003cdiv id=\"collapseA\" class=\"panel-collapse collapse in\"\u003e\n            \u003cdiv class=\"container-fluid\"\u003e\n\n                \u003cdiv class=\"row\"\u003e\n\n                    \u003cdiv role=\"tabpanel\"\u003e\n                        \u003c!-- Nav tabs --\u003e\n\n                        \u003c!-- Tab panes --\u003e\n                        \u003cdiv role=\"tabpanel\" class=\"tab-pane\" id=\"objstore\"\u003e\n                            \u003cdiv class=\"panel-heading\"\u003e\n                                \u003ch3 class=\"panel-title\"\u003eReview Proposed Changes Against Standard\u003c/h3\u003e\n                            \u003c/div\u003e\n                            \u003cdiv id='bod' class=\"panel-body\" style=\"padding:10px;\"\u003e\n                                \u003cdiv class=\"row\"\u003e\n                                    \u003cdiv class=\"col-md-12\"\u003e\n                                        \u003cdiv class=\"heading\"\u003e\n                                            Proposed Sections for Change\n                                        \u003c/div\u003e\n                                        {{partial \"sections\"}}\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\"row text-center\" style=\"padding:10px;\"\u003e\n                                    \u003cdiv class=\"heading\"\u003e\n                                        Comments\n                                    \u003c/div\u003e\n                                    {{textarea id='modify_Comments' name='modify_Comments' rows=\"5\" cols=\"80\" name=\"wf_Comments\" }}\n                                \u003c/div\u003e\n                                \u003cdiv class=\"row text-center\" style=\"padding:10px;\"\u003e\n                                    \u003cbutton type=\"button\" class=\"btn btn-success\" data-dismiss=\"modal\" {{action \"submitAction\"}}\u003eAPPROVE CHANGES\u003c/button\u003e\n                                    \u003cbutton type=\"button\" class=\"btn btn-danger\" data-dismiss=\"modal\" {{action \"rejectProposeAction\"}}\u003ePROPOSE CHANGES\u003c/button\u003e\n                                    \u003cbutton type=\"button\" class=\"btn btn-danger\" data-dismiss=\"modal\" {{action \"rejectChangeAction\"}}\u003eREJECT CHANGES\u003c/button\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n        {{input type=\"hidden\" name=\"wf_optionsOutcome\" valueBinding=\"wf_optionsOutcome\"}}\n    \u003c/div\u003e\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"_sections\"\u003e\n\n    {{#each facts.Sections as |section index|}}\n    \u003cdiv class=\"row\" style=\"padding-bottom:2px;padding-left:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-5\" style=\"\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n\n    {{/each}}\n\u003c/script\u003e\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"_inserts\"\u003e\n    \u003cdiv class=\"row\" style=\"padding:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-6\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n\u003c/script\u003e"},"desc":"Recently Converted Form Record","id":"5623d4c6fd0afd0887e3eeb1","name":"Contract Approval Review Proposed Changes 3","origin":{"checksum":"59E8581D1637A1C0CAA422501DC2B619B4E56D05872722BAB42F2D94AEC9FA92L8141","createDate":1.445188806966e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"5622f3fefd0afd54c6dcd237","name":"Contract Approval Review Proposed Changes 3"},"owner":{},"recType":"app","tstamp":1.445188806966e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623d4c6fd0afd9689e3eeaf"},"checksum":"C12F215E942EBCD293A9C01FD2FC5B8B0434982FCDD29F495229C70B39E2D2E2L12806","createDate":{"$date":"2015-10-18T17:20:06.620Z"},"creatorId":"tpanagos@point.io","data":{"form":"\u003cscript\u003e\n    window.App.IndexController.reopen({\n        core_form: '#emberForm',\n        isSubmitting : false,\n        isAcceptable: true,\n        hasAdvice: function() {\n            var comment = this.get(\"facts.wf_Comments\");\n            var status = this.get(\"facts.wf_optionsOutcome\");\n//            console.log(\"advice?: \" + comment + \"logic: \" + ((typeof comment != \"undefined\") \u0026\u0026 (comment != \"\")));\n            return (\n                    ((typeof comment != \"undefined\") \u0026\u0026 (comment != \"\")) ||\n                    ((typeof status != \"undefined\") \u0026\u0026 ((status == \"rejectedwithchanges\") || (status == \"rejected\")))\n            );\n        }.property(),\n        isModified: function() {\n            var status = this.get(\"facts.wf_optionsOutcome\");\n//            console.log(\"status?: \" + status + \"logic: \" + ((typeof status != \"undefined\") \u0026\u0026 (status == \"rejectedwithchanges\")));\n            return ((typeof status != \"undefined\") \u0026\u0026 (status == \"rejectedwithchanges\"));\n        }.property(),\n        actions: {\n            acceptableAction: function (state) {\n                this.set(\"isAcceptable\", state);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('approve');\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n                return true;\n            },\n            requestChangeAction: function () {\n                $('[name=wf_optionsOutcome]').val('reject');\n                this.set(\"isSubmitting\", true );\n                if (this.get(\"isModified\"))\n                    var updatedSections = facts.SectionsDelta;\n                else\n                    var updatedSections = facts.Sections;\n                var myJsonObj = {\"REQUEST\": {\"INPUT\" : {\"COMMENT\" : \"Proposed Changes Recorded\", \"FIELDS\" : [],\"FACTS\": {\"Sections\":updatedSections}}}};\n                /*modify fact*/\n                $.ajax({\n                    url: \"/messages/injectListJSON/\"+jsonTask.DETAILS.ID+\"?Authorization=\"+sessionKey,\n                    type: \"PUT\",\n                    data: JSON.stringify(myJsonObj),\n                    contentType: \"application/json\",\n                    success: function(data){\n                        console.log(\"ajax update successful\");\n                        // here you could perform your actions like persisting to the server or so\n                        $('#emberForm').submit();\n                    },\n                    failure: function(data){\n                        console.log(\"ajax update failed\");\n                    }\n                });\n            },\n            goAction: function () {\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n            },\n            saveQAction: function(taskId) {\n                var currQ = this.get(\"currentQuestionLoop\");\n                var myfacts = this.get('facts.thisQuestionnaire');\n                var mystagename = this.get('currentStageName');\n                var mystage = myfacts[mystagename];\n                var myQuestionnaire = this.get('facts.thisQuestionnaire');\n            }\n        }\n    });\n\n    App.RadioButtonComponent = Ember.Component.extend({\n\n        tagName: 'input',\n        type: 'radio',\n        attributeBindings: [ 'checked', 'name', 'type', 'value' ],\n\n        checked: function () {\n            if (this.get('value') === this.get('groupValue')) {\n                Ember.run.once(this, 'takeAction');\n                return true;\n            } else { return false; }\n        },\n\n        takeAction: function() {\n            this.sendAction('selectedAction', this.get('value'));\n        },\n\n        change: function () {\n            this.set('groupValue', this.get('value'));\n            Ember.run.once(this, 'checked'); //manual observer\n        }\n\n    });\n\u003c/script\u003e\n\n\u003cstyle\u003e\n    html {\n        display: block !important;\n    }\n    table {\n        border-collapse: collapse;\n        border-spacing: 1; }\n\n    /* line 28, ../../../../../../vendor/bundle/ruby/1.9.1/gems/compass-0.12.2/frameworks/compass/stylesheets/compass/reset/_utilities.scss */\n    caption, th, td {\n        text-align: center;\n        font-weight: normal;\n        vertical-align: top; }\n\u003c/style\u003e\n\n\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"index\"\u003e\n    \u003cdiv class=\"container\" class=\"form-horizontal\" class=\" js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths\" data-ember-extension=\"1\" style=\"display: block;\"\u003e\n        \u003cdiv id=\"collapseA\" class=\"panel-collapse collapse in\"\u003e\n            \u003cdiv class=\"container-fluid\"\u003e\n                {{#if controller.hasAdvice}}\n                    \u003cdiv class=\"row\"\u003e\n                        \u003cdiv class=\"alert alert-danger\"\u003eYour change proposal status is: {{facts.wf_optionsOutcome}} because {{facts.wf_Comments}}\u003c/div\u003e\n                    \u003c/div\u003e\n                {{/if}}\n                \u003cdiv class=\"row\"\u003e\n                    \u003cdiv role=\"tabpanel\"\u003e\n                        \u003c!-- Nav tabs --\u003e\n                        \u003cul class=\"nav nav-tabs nav-justified\" role=\"tablist\"\u003e\n                            \u003cli role=\"presentation\" class=\"{{unless controller.isModified 'active'}}\"\u003e\u003ca href=\"#static\" aria-controls=\"static\" role=\"tab\" data-toggle=\"tab\"\u003eContract Acceptable\u003c/a\u003e\u003c/li\u003e\n                            \u003cli role=\"presentation\" class=\"{{if controller.isModified 'active'}}\"\u003e\u003ca href=\"#objstore\" aria-controls=\"objstore\" role=\"tab\" data-toggle=\"tab\"\u003eContract Not Acceptable\u003c/a\u003e\u003c/li\u003e\n                        \u003c/ul\u003e\n\n                        \u003c!-- Tab panes --\u003e\n                        \u003cdiv class=\"tab-content\"\u003e\n                            \u003cdiv role=\"tabpanel\" class=\"{{unless controller.isModified 'tab-pane active' 'tab-pane'}}\" id=\"static\"\u003e\n                                \u003cdiv class=\"panel-heading\"\u003e\n                                    \u003ch3 class=\"panel-title\"\u003eSign NDA Contract As-Is\u003c/h3\u003e\n                                \u003c/div\u003e\n                                \u003cdiv id='bod' class=\"panel-body\" style=\"padding:10px;\"\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-md-9\"\u003e\n                                            Please, use View and Sign buttons above to sign contract As-Is.\n                                        \u003c/div\u003e\n                                    \u003c/div\u003e\n                                    \u003cdiv class=\"row text-center\" style=\"padding:10px;\"\u003e\n                                        \u003cbutton type=\"button\" class=\"btn btn-success\" data-dismiss=\"modal\" {{action \"submitAction\"}}\u003eAPPROVE\u003c/button\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                            \u003cdiv role=\"tabpanel\" class=\"{{if controller.isModified 'tab-pane active' 'tab-pane'}}\" id=\"objstore\"\u003e\n                                \u003cdiv class=\"panel-heading\"\u003e\n                                    {{#unless controller.isModified}}\n                                    \u003ch3 class=\"panel-title\"\u003eSelect and Edit Sections\u003c/h3\u003e\n                                    {{/unless}}\n                                    {{#if controller.isModified}}\n                                    \u003ch3 class=\"panel-title\"\u003eCompare and Edit Sections\u003c/h3\u003e\n                                    {{/if}}\n                                \u003c/div\u003e\n                                \u003cdiv id='bod' class=\"panel-body\" style=\"padding:10px;\"\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        {{#unless controller.isModified}}\n                                        \u003cdiv class=\"col-md-12\"\u003e\n                                            \u003cdiv class=\"heading\"\u003e\n                                                \u003ch3\u003ePropose Revisions\u003c/h3\u003e\n                                            \u003c/div\u003e\n                                            {{render \"sections\" facts.Sections}}\n                                        \u003c/div\u003e\n                                        {{/unless}}\n                                        {{#if controller.isModified}}\n                                        \u003cdiv class=\"col-md-6\"\u003e\n                                            \u003cdiv class=\"heading\"\u003e\n                                                \u003ch3\u003eYour Proposed Revisions\u003c/h3\u003e\n                                            \u003c/div\u003e\n                                            {{render \"sectionsReadOnly\" facts.Sections}}\n                                        \u003c/div\u003e\n                                        \u003cdiv class=\"col-md-6\"\u003e\n                                            \u003cdiv class=\"heading\"\u003e\n                                                \u003ch3\u003eLegal Proposed Revisions\u003c/h3\u003e (Edit)\n                                            \u003c/div\u003e\n                                            {{render \"sections\" facts.SectionsDelta}}\n                                        \u003c/div\u003e\n                                        {{/if}}\n                                    \u003c/div\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003chr/\u003e\n                                    \u003c/div\u003e\n                                    \u003cdiv class=\"row text-center\" style=\"padding:10px;\"\u003e\n                                        {{#if controller.isModified}}\n                                        \u003cbutton type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\" {{action \"submitAction\"}}\u003eACCEPT REVISIONS\u003c/button\u003e\n                                        {{/if}}\n                                        \u003cbutton type=\"button\" class=\"btn btn-warning\" data-dismiss=\"modal\" {{action \"requestChangeAction\"}}\u003eSUBMIT REVISIONS\u003c/button\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n        {{input type=\"hidden\" name=\"wf_optionsOutcome\" valueBinding=\"wf_optionsOutcome\"}}\n    \u003c/div\u003e\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"sections\"\u003e\n    {{#each model as |section index|}}\n    \u003cdiv class=\"row\" style=\"padding-bottom:2px;padding-left:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-5\" style=\"\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n    {{/each}}\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"sectionsReadOnly\"\u003e\n    {{#each model as |section index|}}\n    \u003cdiv class=\"row\" style=\"padding-bottom:2px;padding-left:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected disabled=\"disabled\"}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-5\" style=\"\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\" readonly=\"true\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n    {{/each}}\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"_inserts\"\u003e\n    \u003cdiv class=\"row\" style=\"padding:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-6\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n\u003c/script\u003e"},"desc":"Recently Converted Form Record","id":"5623d4c6fd0afd9689e3eeaf","name":"Vendor - Contract Approval Sign or Suggest Changes 3","origin":{"checksum":"C12F215E942EBCD293A9C01FD2FC5B8B0434982FCDD29F495229C70B39E2D2E2L12806","createDate":1.44518880662e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"5622f3fefd0afd6dc6dcd235","name":"Vendor - Contract Approval Sign or Suggest Changes 3"},"owner":{},"recType":"app","tstamp":1.44518880662e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623d4c7fd0afd0887e3eeb5"},"checksum":"F83560DAAFA8AD9C4A18C80917E7CF8862EF6BACDEBB9AC85B9BC3DF1E3B9832L10743","createDate":{"$date":"2015-10-18T17:20:07.581Z"},"creatorId":"tpanagos@point.io","data":{"form":"    \u003cscript type='text/javascript'\u003e\n\n        var serverUrl = \"http://api.point.io/api/v2/\";\n\n        App.Related = Ember.Object.extend({\n            \"id\": \"1f813e0c-e523-4d13-a255-793e3b20786a\",\n            \"label\": \"Joint_Venture_Agreement.pdf\",\n            \"tooltip\": \"Download allowed\",\n            \"type\": \"PIO\",\n            \"url\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=02E67D51-9395-42FB-B22FB8CE50DE674D\",\n            \"shareid\": \"\",\n            \"containerid\": \"\",\n            \"remotepath\": \"\",\n            \"fileid\": \"\",\n            \"filename\": \"\",\n            \"ak\": \"\",\n            \"totalPages\": 0,\n            \"imageURL\": \"\",\n            \"pageNum\": 0,\n            \"nextPage\": 0,\n            \"prevPage\": 0,\n            \"isLoaded\": false,\n            \"isDisplayed\": false\n        });\n\n        App.Related.reopenClass({\n            createRelatedfromRELATED: function(data) {\n                return App.Related.create({id: data.ID, label: data.LABEL, tooltip: data.TOOLTIP, type: data.TYPE, url: URL});\n            }\n        });\n\n        App.PreviewView = Ember.View.create({\n            didInsertElement: function () {\n                Ember.run.scheduleOnce('afterRender', this, 'afterRenderEvent');\n            },\n            afterRenderEvent: function () {\n                this.get('controller').send('loadpage', 1);\n            }\n        });\n\n        App.PreviewController = Ember.Controller.extend({\n            facts: jsonTask.FACTS,\n//        rawRelateds: [\n//            {\n//                \"ID\": \"5feb9cde-1ae6-4f2f-ac3b-87ac193daa4e\",\n//                \"LABEL\": \"Breakeven_Analysis_Chart.xls\",\n//                \"TOOLTIP\": \"Download allowed\",\n//                \"TYPE\": \"PIO\",\n//                \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=02E67D51-9395-42FB-B22FB8CE50DE674D\"\n//            },\n//            {\n//                \"ID\": \"fa13fb5c-2753-4a33-8460-a7470ca8d1ce\",\n//                \"LABEL\": \"Opp by Type.xlsx\",\n//                \"TOOLTIP\": \"Download prevented\",\n//                \"TYPE\": \"PIO\",\n//                \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=56272D8E-A30E-454F-85BA39BD8DB39093\"\n//            }\n//        ],\n            rawRelateds: jsonTask.RELATEDS, \n            relateds: function() {\n                var relatedObjs = Ember.A();\n                var self = this;\n                this.get(\"rawRelateds\").forEach( function(related) {\n                    relatedObjs.pushObject(App.Related.createRelatedfromRELATED(related));\n                });\n                return relatedObjs;\n            }.property(\"rawRelateds\"),\n            linkid: \"065ee71e-aa6f-45c0-a4a2-de86df05111d\",\n//            linkid: facts.linkid,\n            totalPages: 0,\n            pageNum: 1,\n            nextPage: 0,\n            prevPage: 0,\n            fileLinks: function () {\n\n            },\n            linkObject: function (linkObject) {\n//                var linkid = this.get(\"linkid\");\n                console.log(linkObject.id);\n//                var linkObject = {};\n                var servercall = serverUrl + \"links/\" + linkObject.id + \"/details?\"\n                        + \"ViewerAPIKey=5c3fe650-661d-4551-aff4-0f9d5ea8cb7d\"\n                        + \"\u0026ipaddress=127.0.0.1\";\n                $.ajax({\n                    type: \"GET\",\n                    async: false,\n                    url: servercall,\n                    success: function (data) {\n                        linkObject.shareid = data.RESULT.DATA[0][2];\n                        linkObject.containerid = data.RESULT.DATA[0][10];\n                        linkObject.remotepath = data.RESULT.DATA[0][9];\n                        linkObject.fileid = data.RESULT.DATA[0][7];\n                        linkObject.filename = data.RESULT.DATA[0][8];\n                        linkObject.ak = data.ACCESSKEY;\n                    }\n                });\n                return linkObject;\n            },\n            actions: {\n                loadpage: function (pageNum, id, tObject) {\n//                    console.log(\"loadpage \" + pageNum + \" Label \" + tObject.label);\n                    if (!tObject.isLoaded) {\n                        this.linkObject(tObject);\n                    }\n                    if (pageNum != tObject.pageNum) {\n//                        console.log(\"tObj \" + tObject.containerid + \" Label \" + tObject.label);\n                        var servercall = serverUrl + \"folders/files/preview.json?\"\n                                + \"containerid=\" + tObject.containerid\n                                + \"\u0026remotepath=\" + tObject.remotepath\n                                + \"\u0026fileid=\" + tObject.fileid\n                                + \"\u0026filename=\" + tObject.filename\n                                + \"\u0026folderid=\" + tObject.shareid\n                                + \"\u0026pagenum=\" + pageNum;\n                        var totalPages = 0;\n                        var imageUrl = \"\";\n                        $.ajax({\n                            type: \"GET\",\n                            async: false,\n                            headers: {\n                                \"Authorization\": tObject.ak\n                            },\n                            url: servercall,\n                            success: function (data) {\n                                console.log(data);\n                                tObject.set(\"totalPages\", data.NUMPAGES);\n                                tObject.set(\"imageUrl\", data.RESULT);\n                            }\n                        });\n                        tObject.set(\"isLoaded\", true);\n\n                        if ((pageNum + 1) \u003c= tObject.totalPages) {\n                            tObject.set('nextPage', pageNum + 1);\n                        } else {\n                            tObject.set('nextPage', 0);\n                        }\n\n                        if ((pageNum - 1) \u003e 0) {\n                            tObject.set('prevPage', pageNum - 1);\n                        } else {\n                            tObject.set('prevPage', 0);\n                        }\n                        tObject.set('pageNum', pageNum);\n                        document.getElementById(id).src = tObject.imageUrl;\n                    }\n                    tObject.set(\"isDisplayed\", true);\n                    $('#'+ id).show();\n//                    console.log(\"Displayed: \" + tObject.get(\"isDisplayed\") + \"isLoaded: \" + tObject.get(\"isLoaded\"));\n                },\n                closepage: function(id, tObject) {\n                    $('#'+ id).hide();\n                    tObject.set(\"isDisplayed\", false);\n                }\n            }\n        });\n\n        // This is here to trigger the rendering of the View to the end of the body tag\n        App.PreviewView.append();\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"preview\"\u003e\n        \u003cdiv class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\"\u003e\n            \u003cdiv class=\"panel-heading\"\u003e\n                \u003ch4 class=\"panel-title\"\u003e\n                    \u003ca data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseB\"\u003eRelated Files\u003c/a\u003e\n                \u003c/h4\u003e\n            \u003c/div\u003e\n            \u003cdiv id=\"collapseB\" class=\"panel-collapse collapse in\"\u003e\n                \u003cdiv class=\"container-fluid\"\u003e\n                    \u003cdiv class=\"panel panel-default\"\u003e\n                        \u003cdiv class=\"panel-body\"\u003e\n                            \u003ctable class=\"table table-striped table-bordered\"\u003e\n                                \u003cthead\u003e\n                                \u003ctr\u003e\n                                    \u003cth\u003e\u0026nbsp;\u003c/th\u003e\n                                    \u003cth\u003eLABEL\u003c/th\u003e\n                                    \u003cth\u003e\u0026nbsp;\u003c/th\u003e\n                                \u003c/tr\u003e\n                                \u003c/thead\u003e\n                                \u003ctbody\u003e\n                                    {{#each related in controller.relateds}}\n                                    {{partial \"file\"}}\n                                    {{/each}}\n                                \u003c/tbody\u003e\n                            \u003c/table\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_file\"\u003e\n            \u003ctr\u003e\n                \u003ctd align=\"right\" width=\"25\"\u003e\n                    {{#unless related.isDisplayed}}\n                    \u003cbutton class=\"btn btn-success\" {{action \"loadpage\" 1 related.id related}}\u003ePreview\u003c/button\u003e\n                    {{/unless}}\n                    {{#if related.isDisplayed}}\n                    \u003cbutton class=\"btn btn-success\" {{action \"closepage\" related.id related}}\u003eClose\u003c/button\u003e\n                    {{/if}}\n                \u003c/td\u003e\n                \u003ctd\u003e{{related.label}}\u003c/td\u003e\n                \u003ctd\u003e\n                {{#if related.isDisplayed}}\n                    \u003cp class=\"form-control-static\"\u003e\u003clabel\u003eShow Page\u003c/label\u003e {{related.pageNum}} of {{related.totalPages}}\u003c/p\u003e\n                    \u003cp\u003e{{#if related.prevPage}}\n                        \u003ca {{action \"loadpage\" related.prevPage related.id related}}\u003ePrevious\u003c/a\u003e\n                    {{/if}}\n                    {{#if related.prevPage}}\n                        {{#if related.nextPage}}\n                            \u0026nbsp;|\u0026nbsp;\n                        {{/if}}\n                    {{/if}}\n                    {{#if related.nextPage}}\n                        \u003ca {{action \"loadpage\" related.nextPage related.id related}}\u003eNext\u003c/a\u003e\n                    {{/if}}\u003c/p\u003e\n                {{/if}}\n                    \u003cp\u003e\u003cimg id={{related.id}} style=\"border:1px solid #021a40;\" hidden=true\u003e\u003c/p\u003e\n                {{#if related.isDisplayed}}\n                    \u003cp\u003e{{#if related.prevPage}}\n                        \u003ca {{action \"loadpage\" related.prevPage related.id related}}\u003ePrevious\u003c/a\u003e\n                    {{/if}}\n                    {{#if related.prevPage}}\n                        {{#if related.nextPage}}\n                            \u0026nbsp;|\u0026nbsp;\n                        {{/if}}\n                    {{/if}}\n                    {{#if related.nextPage}}\n                        \u003ca {{action \"loadpage\" related.nextPage related.id related}}\u003eNext\u003c/a\u003e\n                    {{/if}}\u003c/p\u003e\n                {{/if}}\n            \u003c/td\u003e\n            \u003c/tr\u003e\n\n    \u003c/script\u003e\n"},"desc":"Recently Converted Form Record","id":"5623d4c7fd0afd0887e3eeb5","name":"apidoc preview","origin":{"checksum":"F83560DAAFA8AD9C4A18C80917E7CF8862EF6BACDEBB9AC85B9BC3DF1E3B9832L10743","createDate":1.445188807581e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"5622f3fefd0afd6dc6dcd23b","name":"apidoc preview"},"owner":{},"recType":"app","tstamp":1.445188807581e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623d4c7fd0afd0887e3eeb7"},"checksum":"50CB0B023D337458369D78117A571270521BD4603691A1583DF1EC414AE9C04EL10754","createDate":{"$date":"2015-10-18T17:20:07.921Z"},"creatorId":"tpanagos@point.io","data":{"form":"    \u003cscript type='text/javascript'\u003e\n\n        var serverUrl = \"http://api.point.io/api/v2/\";\n\n        App.Related = Ember.Object.extend({\n            \"id\": \"1f813e0c-e523-4d13-a255-793e3b20786a\",\n            \"label\": \"Joint_Venture_Agreement.pdf\",\n            \"tooltip\": \"Download allowed\",\n            \"type\": \"PIO\",\n            \"url\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=02E67D51-9395-42FB-B22FB8CE50DE674D\",\n            \"shareid\": \"\",\n            \"containerid\": \"\",\n            \"remotepath\": \"\",\n            \"fileid\": \"\",\n            \"filename\": \"\",\n            \"ak\": \"\",\n            \"totalPages\": 0,\n            \"imageURL\": \"\",\n            \"pageNum\": 0,\n            \"nextPage\": 0,\n            \"prevPage\": 0,\n            \"isLoaded\": false,\n            \"isDisplayed\": false\n        });\n\n        App.Related.reopenClass({\n            createRelatedfromRELATED: function(data) {\n                return App.Related.create({id: data.ID, label: data.LABEL, tooltip: data.TOOLTIP, type: data.TYPE, url: URL});\n            }\n        });\n\n        App.PreviewView = Ember.View.create({\n            didInsertElement: function () {\n                Ember.run.scheduleOnce('afterRender', this, 'afterRenderEvent');\n            },\n            afterRenderEvent: function () {\n                this.get('controller').send('loadpage', 1);\n            }\n        });\n\n        App.PreviewController = Ember.Controller.extend({\n            facts: jsonTask.FACTS,\n//        rawRelateds: [\n//            {\n//                \"ID\": \"5feb9cde-1ae6-4f2f-ac3b-87ac193daa4e\",\n//                \"LABEL\": \"Breakeven_Analysis_Chart.xls\",\n//                \"TOOLTIP\": \"Download allowed\",\n//                \"TYPE\": \"PIO\",\n//                \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=02E67D51-9395-42FB-B22FB8CE50DE674D\"\n//            },\n//            {\n//                \"ID\": \"fa13fb5c-2753-4a33-8460-a7470ca8d1ce\",\n//                \"LABEL\": \"Opp by Type.xlsx\",\n//                \"TOOLTIP\": \"Download prevented\",\n//                \"TYPE\": \"PIO\",\n//                \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=56272D8E-A30E-454F-85BA39BD8DB39093\"\n//            }\n//        ],\n            rawRelateds: jsonTask.RELATEDS, \n            relateds: function() {\n                var relatedObjs = Ember.A();\n                var self = this;\n                this.get(\"rawRelateds\").forEach( function(related) {\n                    relatedObjs.pushObject(App.Related.createRelatedfromRELATED(related));\n                });\n                return relatedObjs;\n            }.property(\"rawRelateds\"),\n            linkid: \"065ee71e-aa6f-45c0-a4a2-de86df05111d\",\n//            linkid: facts.linkid,\n            totalPages: 0,\n            pageNum: 1,\n            nextPage: 0,\n            prevPage: 0,\n            fileLinks: function () {\n\n            },\n            linkObject: function (linkObject) {\n//                var linkid = this.get(\"linkid\");\n                console.log(linkObject.id);\n//                var linkObject = {};\n                var servercall = serverUrl + \"links/\" + linkObject.id + \"/details?\"\n                        + \"ViewerAPIKey=5c3fe650-661d-4551-aff4-0f9d5ea8cb7d\"\n                        + \"\u0026ipaddress=127.0.0.1\";\n                $.ajax({\n                    type: \"GET\",\n                    async: false,\n                    url: servercall,\n                    success: function (data) {\n                        linkObject.shareid = data.RESULT.DATA[0][2];\n                        linkObject.containerid = data.RESULT.DATA[0][10];\n                        linkObject.remotepath = data.RESULT.DATA[0][9];\n                        linkObject.fileid = data.RESULT.DATA[0][7];\n                        linkObject.filename = data.RESULT.DATA[0][8];\n                        linkObject.ak = data.ACCESSKEY;\n                    }\n                });\n                return linkObject;\n            },\n            actions: {\n                loadpage: function (pageNum, id, tObject) {\n//                    console.log(\"loadpage \" + pageNum + \" Label \" + tObject.label);\n                    if (!tObject.isLoaded) {\n                        this.linkObject(tObject);\n                    }\n                    if (pageNum != tObject.pageNum) {\n//                        console.log(\"tObj \" + tObject.containerid + \" Label \" + tObject.label);\n                        var servercall = serverUrl + \"folders/files/preview.json?\"\n                                + \"containerid=\" + tObject.containerid\n                                + \"\u0026remotepath=\" + tObject.remotepath\n                                + \"\u0026fileid=\" + tObject.fileid\n                                + \"\u0026filename=\" + tObject.filename\n                                + \"\u0026folderid=\" + tObject.shareid\n                                + \"\u0026pagenum=\" + pageNum;\n                        var totalPages = 0;\n                        var imageUrl = \"\";\n                        $.ajax({\n                            type: \"GET\",\n                            async: false,\n                            headers: {\n                                \"Authorization\": tObject.ak\n                            },\n                            url: servercall,\n                            success: function (data) {\n                                console.log(data);\n                                tObject.set(\"totalPages\", data.NUMPAGES);\n                                tObject.set(\"imageUrl\", data.RESULT);\n                            }\n                        });\n                        tObject.set(\"isLoaded\", true);\n\n                        if ((pageNum + 1) \u003c= tObject.totalPages) {\n                            tObject.set('nextPage', pageNum + 1);\n                        } else {\n                            tObject.set('nextPage', 0);\n                        }\n\n                        if ((pageNum - 1) \u003e 0) {\n                            tObject.set('prevPage', pageNum - 1);\n                        } else {\n                            tObject.set('prevPage', 0);\n                        }\n                        tObject.set('pageNum', pageNum);\n                        document.getElementById(id).src = tObject.imageUrl;\n                    }\n                    tObject.set(\"isDisplayed\", true);\n                    $('#'+ id).show();\n//                    console.log(\"Displayed: \" + tObject.get(\"isDisplayed\") + \"isLoaded: \" + tObject.get(\"isLoaded\"));\n                },\n                closepage: function(id, tObject) {\n                    $('#'+ id).hide();\n                    tObject.set(\"isDisplayed\", false);\n                }\n            }\n        });\n\n        // This is here to trigger the rendering of the View to the end of the body tag\n        App.PreviewView.append();\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"preview\"\u003e\n        \u003cdiv class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\"\u003e\n            \u003cdiv class=\"panel-heading\"\u003e\n                \u003ch4 class=\"panel-title\"\u003e\n                    \u003ca data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseB\"\u003eRelated Files\u003c/a\u003e\n                \u003c/h4\u003e\n            \u003c/div\u003e\n            \u003cdiv id=\"collapseB\" class=\"panel-collapse collapse in\"\u003e\n                \u003cdiv class=\"container-fluid\"\u003e\n                    \u003cdiv class=\"panel panel-default\"\u003e\n                        \u003cdiv class=\"panel-body\"\u003e\n                            \u003ctable class=\"table table-striped table-bordered\"\u003e\n                                \u003cthead\u003e\n                                \u003ctr\u003e\n                                    \u003cth\u003e\u0026nbsp;\u003c/th\u003e\n                                    \u003cth\u003eLABEL\u003c/th\u003e\n                                    \u003cth\u003e\u0026nbsp;\u003c/th\u003e\n                                \u003c/tr\u003e\n                                \u003c/thead\u003e\n                                \u003ctbody\u003e\n                                    {{#each related in controller.relateds}}\n                                    {{partial \"file\"}}\n                                    {{/each}}\n                                \u003c/tbody\u003e\n                            \u003c/table\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_file\"\u003e\n            \u003ctr\u003e\n                \u003ctd align=\"right\" width=\"25\"\u003e\n                    {{#unless related.isDisplayed}}\n                    \u003cbutton class=\"btn btn-success\" {{action \"loadpage\" 1 related.id related}}\u003ePreview\u003c/button\u003e\n                    {{/unless}}\n                    {{#if related.isDisplayed}}\n                    \u003cbutton class=\"btn btn-success\" {{action \"closepage\" related.id related}}\u003eClose\u003c/button\u003e\n                    {{/if}}\n                \u003c/td\u003e\n                \u003ctd\u003e{{related.label}}\u003c/td\u003e\n                \u003ctd\u003e\n                {{#if related.isDisplayed}}\n                    \u003cp class=\"form-control-static\"\u003e\u003clabel\u003eShow Page\u003c/label\u003e {{related.pageNum}} of {{related.totalPages}}\u003c/p\u003e\n                    \u003cp\u003e{{#if related.prevPage}}\n                        \u003ca {{action \"loadpage\" related.prevPage related.id related}}\u003ePrevious\u003c/a\u003e\n                    {{/if}}\n                    {{#if related.prevPage}}\n                        {{#if related.nextPage}}\n                            \u0026nbsp;|\u0026nbsp;\n                        {{/if}}\n                    {{/if}}\n                    {{#if related.nextPage}}\n                        \u003ca {{action \"loadpage\" related.nextPage related.id related}}\u003eNext\u003c/a\u003e\n                    {{/if}}\u003c/p\u003e\n                {{/if}}\n                    \u003cp\u003e\u003cimg id={{related.id}} style=\"border:1px solid #021a40;\" hidden=true\u003e\u003c/p\u003e\n                {{#if related.isDisplayed}}\n                    \u003cp\u003e{{#if related.prevPage}}\n                        \u003ca {{action \"loadpage\" related.prevPage related.id related}}\u003ePrevious\u003c/a\u003e\n                    {{/if}}\n                    {{#if related.prevPage}}\n                        {{#if related.nextPage}}\n                            \u0026nbsp;|\u0026nbsp;\n                        {{/if}}\n                    {{/if}}\n                    {{#if related.nextPage}}\n                        \u003ca {{action \"loadpage\" related.nextPage related.id related}}\u003eNext\u003c/a\u003e\n                    {{/if}}\u003c/p\u003e\n                {{/if}}\n            \u003c/td\u003e\n            \u003c/tr\u003e\n\n    \u003c/script\u003e"},"desc":"Recently Converted Form Record","id":"5623d4c7fd0afd0887e3eeb7","name":"DocuSign Default Fact View","origin":{"checksum":"5DB9E01924635070D31E0762D628EBA0E44C0A880462CF8AE69562F8847D546DL23305","createDate":1.445188807921e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"5622f3fefd0afd68c6dcd23d","name":"DocuSign Default Fact View"},"owner":{},"recType":"app","tstamp":1.445190588066e+12,"updateDate":{"$date":"2015-10-18T17:49:48.066Z"},"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623d4c7fd0afdc689e3eeb3"},"checksum":"6F956B9F9DA53955675C57908A90A90EC32F33A53EE6AE5C47EB61E36F185C78L23884","createDate":{"$date":"2015-10-18T17:20:07.261Z"},"creatorId":"tpanagos@point.io","data":{"form":"    \u003cscript type=\"text/javascript\"\u003e\n        var baseURL = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n\n        App.FileController = Ember.Controller.extend({\n            init: function () {\n                console.log(\"fileinit\");\n            },\n            queryParams: {path: \"\", containerid: \"\"},\n            containerid: null,\n            path: null,\n            showShareList: true,\n            bPopUp: null,\n            isFileListEmpty: true,\n            dataArray: function () {\n                var dA = Ember.A();\n                var raw = this.get(\"model\");\n                for (var i in raw) {\n                    dA.pushObject(raw[i]);\n                }\n                return dA\n            }.property(\"model\"),\n            filelist: Ember.A(),\n            folderlist: Ember.A(),\n            folderstack: Ember.A(),\n            shares: function () {\n                return this.get(\"dataArray\");\n            }.property(\"dataArray\"),\n            newFolderName: \"\",\n            headers: {\n                Authorization: sessionKey\n            },\n            uploadURL: function () {\n                return baseURL + '/apidoc/files/upload/' + this.get('folderlist.shareid');\n            }.property('folderList.shareid'),\n            uploadFile: null,\n            isLoading: false,\n            isRoot: function() {\n                return (this.get(\"folderlist\").queryParams.path == \"\")\n            }.property(\"folderlist.queryParams.path\"),\n            actions: {\n                submitAction: function () {\n                    this.set('isLoading', true);\n                    var self = this;\n                    // We really want to inject RELATEDS\n                    var injectableFiles = [];\n                    this.get(\"filelist\").forEach(function (file) {\n                        injectableFiles.pushObject({\n                            \"ID\": file.link,\n                            \"LABEL\": file.name,\n                            \"TOOLTIP\": \"file.label\",\n                            \"TYPE\": \"PIO\",\n                            \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=\" + file.link\n                        });\n                    });\n                    var injectableFacts = {\n                        'REQUEST': {\n                            'INPUT': {\n                                'RELATEDS': injectableFiles,\n                                'FIELDS': [],\n                                'FACTS': []\n                            }\n                        }\n                    };\n                    Ember.$.ajax({\n                        type: \"PUT\",\n                        async: true,\n                        url: baseURL + '/messages/injectListJSON/' + taskid + '?Authorization=' + sessionKey,\n                        data: JSON.stringify(injectableFacts),\n                        dataType: 'json',\n                        contentType: 'application/json',\n                        success: function (data) {\n                            self.set('isLoading', false);\n                            //$('#emberForm').submit();\n                        }\n                    });\n                    return true; //this bubbles the action up\n                },\n                addFile: function (share) {\n                    this.set('isLoading', true);\n                    var self = this;\n                    //create a link\n                    var linkURL = \"\";\n                    //v3\n                    var servercall = baseURL + \"/apidoc/links/create/\" + share.shareid + \"?Authorization=\" + sessionKey;\n                    $.ajax({\n                        type: \"POST\",\n                        async: false,\n                        data: {\n                            'containerid': share.containerid,\n                            'path': share.path,\n                            'fileid': share.fileid,\n                            'filename': share.name\n                        },\n                        url: servercall,\n                        success: function (data) {\n                            linkURL = data.RESPONSE.linkid;\n                            self.set('isLoading', false);\n                        }\n                    });\n                    //add it to the list\n                    var fileArray = this.get(\"filelist\");\n                    fileArray.pushObject({name: share.name, link: linkURL, label: share.name});\n                    this.set(\"isFileListEmpty\", false);\n                },\n                removeFile: function (id) {\n                    var fileList = this.get('filelist');\n                    fileList.removeObject(id);\n                    if (fileList.length == 0)\n                        this.set(\"isFileListEmpty\", true);\n                },\n                createFolderClick: function (shareid, containerid, path, modalId) {\n                    var self = this;\n                    this.set('isLoading', true);\n                    var servercall = baseURL + \"/apidoc/folders/create/\" + shareid\n                    $.ajax({\n                        type: \"POST\",\n                        async: false,\n                        data: {'containerid': containerid, 'path': path, 'foldername': this.get('newFolderName')},\n                        url: servercall,\n                        headers: {\n                            Authorization: sessionKey\n                        },\n                        cache: false,\n                        success: function (data) {\n                            self.send('modalFinished', modalId);\n                        }\n                    });\n                },\n                modalFinished: function (modalId) {\n                    $('#'+modalId).modal(\"hide\");\n                    var thisFolder = this.get(\"folderlist\");\n                    this.send('openShare', thisFolder.sharename, thisFolder.sharetype, thisFolder.shareid, thisFolder.queryParams.path, thisFolder.queryParams.containerid);\n                    this.send('setLoading', false);\n                },\n                returnToSites: function() {\n                    this.set('showShareList', true);\n                },\n                navigateToParent: function () {\n                    if (this.get('folderstack').length == 0) {\n                        this.send('returnToSites');\n                    }\n                    else {\n                        var current = this.get('folderstack').pop();\n                        this.set('folderlist', current);\n                    }\n                },\n                setLoading: function(state) {\n                  this.set('isLoading', state);\n                },\n                openShare: function (sharename, sharetype, shareid, path, containerid) {\n                    var self = this;\n                    if (typeof containerid != 'undefined')\n                        self.set('containerid', containerid);\n                    else\n                        self.set('containerid', \"\");\n                    if (typeof path != 'undefined')\n                        self.set('path', path);\n                    else\n                        self.set('path', \"\");\n                    var queryParams = {path: self.get('path'), containerid: self.get('containerid')};\n                    Ember.$.ajax({\n                        async: false,\n                        url: baseURL + '/apidoc/folders/list/' + shareid,\n                        data: queryParams,\n                        headers: {\n                            Authorization: sessionKey\n                        },\n                        success: function (data) {\n                            var sharesList = Ember.A();\n                            (data.RESPONSE.RESULT.forEach(function (share) {\n                                share.isDir = (share.type === 'DIR');\n                                var params = [];\n                                if (share.path) {\n                                    params.push('path=' + encodeURIComponent(share.path))\n                                }\n                                if (share.containerid) {\n                                    params.push('containerid=' + encodeURIComponent(share.containerid))\n                                }\n                                if (share.fileid) {\n                                    params.push('fileid=' + encodeURIComponent(share.fileid))\n                                }\n                                if (share.name) {\n                                    params.push('filename=' + encodeURIComponent(share.name))\n                                }\n                                params.push('asBinary=true');\n\n                                share.downloadURL = baseURL + '/apidoc/files/download/' + share.shareid + '?Authorization=' + sessionKey + '\u0026' + params.join(\"\u0026\")\n\n                                sharesList.pushObject(share);\n                            }));\n                            if (self.get('folderlist.shareid') \u0026\u0026 (containerid) \u0026\u0026 (self.get('folderlist.queryParams.containerid') != containerid)) {\n                                // Push the previous folder if there IS a previous folder \u0026 if this is NOT the top folder \u0026 we aren't just refreshing the current folder\n                                self.get('folderstack').push({\n                                    shares: self.get('folderlist.shares'),\n                                    shareid: self.get('folderlist.shareid'),\n                                    sharename: self.get('folderlist.sharename'),\n                                    sharetype: self.get('folderlist.sharetype'),\n                                    queryParams: self.get('folderlist.queryParams')\n                                });\n                                //console.log(containerid + \" Push \u0026 length is now: \" + self.get('folderstack').length);\n                            }\n                            // Set the current folder\n                            self.set('folderlist.shares', sharesList);\n                            self.set('folderlist.shareid', shareid);\n                            self.set('folderlist.sharename', sharename);\n                            self.set('folderlist.sharetype', sharetype);\n                            self.set('folderlist.queryParams', queryParams);\n                        }\n                    });\n                    this.set('showShareList', false);\n                }\n            }\n        });\n\n        App.CreateFolderRoute = Ember.Route.extend({\n            model: function (params, options) {\n                var model = {};\n                model.shareid = params.shareid\n                model.containerid = options.queryParams.containerid\n                model.path = options.queryParams.path\n                model.sessionKey = sessionKey\n                model.url = document.URL\n                model.baseURL = baseURL\n                return model;\n            }\n        });\n\n        App.UploadFileRoute = Ember.Route.extend({\n            model: function (params, options) {\n                var model = {};\n                model.shareid = params.shareid\n                model.containerid = options.queryParams.containerid\n                model.path = options.queryParams.path\n                model.sessionKey = sessionKey\n                model.url = document.URL\n                model.baseURL = baseURL\n                return model;\n            }\n        });\n        App.FileUploadComponent = EmberUploader.FileField.extend({\n            multiple: true,\n            url: '',\n            filesDidChange: function (files) {\n                var self = this;\n                var uploadUrl = this.get('url');\n\n                var uploader = EmberUploader.Uploader.create({\n                    url: uploadUrl,\n                    paramName: 'uploadfile'\n                });\n                uploader.on('didUpload', function (e) {\n                    self.sendAction('action', self.get('actionParams'));\n                });\n                if (!Ember.isEmpty(files)) {\n                    this.sendAction('startAction', true);\n                    uploader.uploadSerial(files, this.get('params'), this.get('headers'));\n                }\n            }\n        });\n\n    \u003c/script\u003e\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"file\"\u003e\n\n        \u003cdiv class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\"\u003e\n            \u003cdiv class=\"panel-heading\"\u003e\n                \u003ch4 class=\"panel-title\"\u003e\n                    \u003ca data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseA\"\u003eAttach Related Files\u003c/a\u003e\n                \u003c/h4\u003e\n            \u003c/div\u003e\n            \u003cdiv id=\"collapseA\" class=\"panel-collapse collapse in\"\u003e\n                \u003cdiv class=\"container-fluid\"\u003e\n                    \u003cdiv id=\"content panel-group\" id=\"accordion\"\u003e\n                        \u003cdiv style=\"padding: 10px;\"\u003e\n                            \u003cdiv class=\"panel panel-default\"\u003e\n                                \u003cdiv id='bod' class=\"panel-body\"\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-md-9\"\u003e\n                                            {{#if controller.showShareList}}\n                                            \u003cdiv id=\"sharelist\" class=\"row-fluid\"\u003e\n                                                {{partial \"sharelist\"}}\n                                            \u003c/div\u003e\n                                            {{/if}}\n                                            {{#unless controller.showShareList}}\n                                            \u003cdiv id=\"folderlist\" class=\"row-fluid\"\u003e\n                                                {{partial \"_folderlist\"}}\n                                            \u003c/div\u003e\n                                            {{/unless}}\n                                        \u003c/div\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv align=\"center\" style={{unless controller.isLoading \"display:none;\"}}\u003e\n                        \u003cimg src=\"/assets/images/throbber.gif\"/\u003e\n                    \u003c/div\u003e\n                    {{#unless controller.isFileListEmpty}}\n                    \u003cdiv id=\"content panel-group\" id=\"accordion\"\u003e\n                        \u003cdiv style=\"padding: 10px;\"\u003e\n                            \u003cdiv class=\"panel panel-default\"\u003e\n                                \u003cdiv class=\"panel-heading\"\u003e\n                                    \u003ch3 class=\"panel-title\"\u003eAttached Files\u003c/h3\u003e\n                                \u003c/div\u003e\n                                \u003cdiv id='bod' class=\"panel-body\"\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-xs-12 col-sm-4 col-md-4\"\u003e\u003clabel\u003eFile Name\u003c/label\u003e\u003c/div\u003e\n                                        \u003cdiv class=\"hidden-xs col-sm-6 col-md-6\"\u003e\u003clabel\u003eFile Label\u003c/label\u003e\u003c/div\u003e\n                                    \u003c/div\u003e\n                                    {{#each file in controller.filelist}}\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-xs-12 col-sm-4 col-md-4\"\u003e\u003cp class=\"form-control-static\"\u003e{{file.name}}\u003c/p\u003e\u003c/div\u003e\n                                        \u003cdiv class=\"col-xs-12 col-sm-6 col-md-6\"\u003e{{input type=\"text\" class=\"form-control\"\n                                            value=file.label}}\n                                        \u003c/div\u003e\n                                        \u003cdiv class=\"hidden-xs col-sm-2 col-md-2\"\u003e\n                                            \u003cbutton class=\"btn btn-danger btn-sm\" {{action\n                                            \"removeFile\" file}}\u003eRemove\u0026nbsp;\u003cspan\n                                                class=\"glyphicon glyphicon-trash\"\u003e\u003c/span\u003e\u003c/button\u003e\n                                        \u003c/div\u003e\n                                    \u003c/div\u003e\n                                    {{/each}}\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    {{/unless}}\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_sharelist\"\u003e\n        \u003ctable class=\"table table-bordered table-striped table-condensed col-md-10\"\u003e\n            \u003cthead\u003e\n            \u003ctr\u003e\n                \u003cth\u003eName\u003c/th\u003e\n                \u003cth\u003eSite Type\u003c/th\u003e\n            \u003c/tr\u003e\n            \u003c/thead\u003e\n            \u003ctbody\u003e\n            {{#each share in controller.shares}}\n            \u003ctr\u003e\n                \u003ctd\u003e\u003ca {{action \"openShare\" share.share.name share.share.type share.share.id share.share.path share.share.containerid}}\u003e{{share.share.name}}\u003c/a\u003e\u003c/td\u003e\n                \u003ctd\u003e{{share.share.type}}\u003c/td\u003e\n            \u003c/tr\u003e\n            {{/each}}\n            \u003c/tbody\u003e\n        \u003c/table\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_createFolder\"\u003e\n        \u003cdiv class=\"modal fade\" id=\"button-modal-create\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\"\u003e\n            \u003cdiv class=\"modal-dialog\"\u003e\n                \u003cdiv class=\"modal-content\"\u003e\n                    \u003cform id=\"createfolderform\" class=\"form-horizontal\" enctype=\"application/x-www-form-urlencoded\" method=\"post\"\u003e\n                        \u003cdiv class=\"modal-header\"\u003e\n                            \u003cbutton type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"\u003e\n                                \u003cspan aria-hidden=\"true\"\u003e\u0026times;\u003c/span\u003e\n                            \u003c/button\u003e\n                            \u003ch4 class=\"modal-title\" id=\"myModalLabel\"\u003eNew Folder\u003c/h4\u003e\n                        \u003c/div\u003e\n                        \u003cdiv class=\"modal-body\"\u003e\n                            \u003cdiv class=\"form-group\"\u003e\n                                {{input id=\"createfolder\" name=\"foldername\" class=\"form-control\" type=\"text\" value=controller.newFolderName}}\n                                \u003cbutton class=\"btn btn-default\" type=\"submit\" {{action \"createFolderClick\" folderlist.shareid containerid path \"button-modal-create\"}}\u003eCreate\u003c/button\u003e\n                            \u003c/div\u003e\n                            \u003cdiv align=\"center\" style={{unless controller.isLoading \"display:none;\"}}\u003e\n                                \u003cimg src=\"/assets/images/throbber.gif\"/\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/form\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_uploadFile\"\u003e\n        \u003cdiv class=\"modal fade\" id=\"button-modal-upload\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\"\u003e\n            \u003cdiv class=\"modal-dialog\"\u003e\n                \u003cdiv class=\"modal-content\"\u003e\n                    \u003cform id=\"fileuploadform\" class=\"form-horizontal\" enctype=\"multipart/form-data\" method=\"post\"\u003e\n                        \u003cdiv class=\"modal-header\"\u003e\n                            \u003cbutton type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"\u003e\n                                \u003cspan aria-hidden=\"true\"\u003e\u0026times;\u003c/span\u003e\n                            \u003c/button\u003e\n                            \u003ch4 class=\"modal-title\" id=\"myModalLabel\"\u003eFile Upload\u003c/h4\u003e\n                        \u003c/div\u003e\n                        \u003cdiv class=\"modal-body\"\u003e\n                            \u003cdiv class=\"form-group\"\u003e\n                                {{file-upload class=\"form-control\" url=controller.uploadURL\n                                params=controller.folderlist.queryParams\n                                headers=controller.headers action='modalFinished'\n                                actionParams=\"button-modal-upload\" startAction='setLoading'}}\n                            \u003c/div\u003e\n                            \u003cdiv align=\"center\" style={{unless controller.isLoading \"display:none;\"}}\u003e\n                                \u003cimg src=\"/assets/images/throbber.gif\"/\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/form\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_folderlist\"\u003e\n        \u003cdiv class=\"panel-heading\"\u003e\n            \u003ch2 class=\"panel-title\"\u003e{{controller.folderlist.sharename}}\u003cspan style=\"float:right;\"\u003e\u003cem\u003e{{controller.folderlist.sharetype}}\u003c/em\u003e\u003c/span\u003e\u003c/h2\u003e\n        \u003c/div\u003e\n        \u003cdiv id=\"browseOnly\"\u003e\n            \u003c!--\u003cbutton type=\"button\" class=\"btn btn-default {{if controller.isRoot 'disabled'}}\" {{action \"navigateToParent\" controller.folderlist.shareid}}\u003e--\u003e\n            \u003c!--\u003cspan class=\"glyphicon glyphicon-level-up\"\u003e\u003c/span\u003e \u0026nbsp;Back to Parent--\u003e\n            \u003c!--\u003c/button\u003e--\u003e\n            {{partial 'uploadFile'}}\n            {{partial 'createFolder'}}\n        \u003c/div\u003e\n        \u003ctable class=\"table table-bordered table-striped col-md-12\"\u003e\n            \u003cthead\u003e\n            \u003ctr\u003e\n                \u003cth\u003e\u003ca {{action \"returnToSites\"}}\u003eHome\u003c/a\u003e \u003ca {{action \"navigateToParent\" controller.folderlist.shareid}}\u003e/{{controller.folderlist.queryParams.path}}\u003c/a\u003e\u003c/th\u003e\n                \u003cth\u003e\u003c/th\u003e\n            \u003c/tr\u003e\n            \u003c/thead\u003e\n            \u003ctbody\u003e\n            {{#each controller.folderlist.shares as |share|}}\n            \u003ctr\u003e\n                \u003ctd\u003e\n                    {{#if share.isDir}}\n                    \u003ca {{action \"openShare\" controller.folderlist.sharename controller.folderlist.sharetype share.shareid share.path share.containerid}}\u003e\n                    \u003cspan class=\"glyphicon glyphicon-folder-open\"\u003e\u003c/span\u003e \u0026nbsp;\n                    {{share.name}}\n                    \u003c/a\u003e\n                    {{/if}}\n                    {{#unless share.isDir}}\n                    \u003ca href=\"{{share.downloadURL}}\"\u003e\n                        \u003cspan class=\"glyphicon glyphicon-file\" style=\"color: silver;\"\u003e\u003c/span\u003e \u0026nbsp;\n                        {{share.name}}\n                    \u003c/a\u003e\n                    {{/unless}}\n                \u003c/td\u003e\n                \u003ctd align=\"center\"\u003e\n                    {{#unless share.isDir}}\n                    \u003c!--\u003ca class=\"btn btn-default\" href=\"{{share.downloadURL}}\"\u003e--\u003e\n                        \u003c!--\u003cspan class=\"glyphicon glyphicon-download\"\u003e\u003c/span\u003e \u0026nbsp; Download--\u003e\n                    \u003c!--\u003c/a\u003e--\u003e\n                    \u003cbutton class=\"btn btn-success\" {{action\n                    \"addFile\" share}}\u003e\n                    \u003cspan class=\"glyphicon glyphicon-paperclip\"\u003e\u003c/span\u003e \u0026nbsp; Attach File\n                    \u003c/button\u003e\n                    {{/unless}}\n                \u003c/td\u003e\n            \u003c/tr\u003e\n            {{/each}}\n            \u003c/tbody\u003e\n            \u003ctfoot\u003e\n                \u003ctr\u003e\n                    \u003ctd colspan=\"2\"\u003e\n                        \u003ca data-insertid=\"1\" class=\"btn btn-success\" data-toggle=\"modal\" data-target=\"#button-modal-upload\"\u003eUpload Files\u003c/a\u003e\n                        \u003ca data-insertid=\"1\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#button-modal-create\"\u003eCreate Folder\u003c/a\u003e\n                    \u003c/td\u003e\n                \u003c/tr\u003e\n            \u003c/tfoot\u003e\n        \u003c/table\u003e\n    \u003c/script\u003e"},"desc":"Recently Converted Form Record","id":"5623d4c7fd0afdc689e3eeb3","name":"apidoc select \u0026 preview","origin":{"checksum":"6F956B9F9DA53955675C57908A90A90EC32F33A53EE6AE5C47EB61E36F185C78L23884","createDate":1.445188807261e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"5622f3fefd0afd68c6dcd239","name":"apidoc select \u0026 preview"},"owner":{},"recType":"app","tstamp":1.445188807261e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623d75cfd0afd68b2e3ef55"},"checksum":"59E8581D1637A1C0CAA422501DC2B619B4E56D05872722BAB42F2D94AEC9FA92L8141","createDate":{"$date":"2015-10-18T17:31:08.703Z"},"creatorId":"tpanagos@point.io","data":{"form":"\u003cscript\u003e\n    window.App.IndexController.reopen({\n        core_form: '#emberForm',\n        isSubmitting : false,\n        isAcceptable: true,\n        actions: {\n            acceptableAction: function (state) {\n                this.set(\"isAcceptable\", state);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('approve');\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n                return true;\n            },\n            rejectChangeAction: function () {\n                $('[name=wf_optionsOutcome]').val('rejected');\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n                return true;\n            },\n            rejectProposeAction: function () {\n                $('[name=wf_optionsOutcome]').val('rejectedwithchanges');\n                this.set(\"isSubmitting\", true );\n                var myJsonObj = {\"REQUEST\": {\"INPUT\" : {\"COMMENT\" : \"Revised Changes Recorded\", \"FIELDS\" : [],\"FACTS\": {\"SectionsDelta\":facts.Sections}}}};\n                /*modify fact*/\n                $.ajax({\n                    url: \"/messages/injectListJSON/\"+jsonTask.DETAILS.ID+\"?Authorization=\"+sessionKey,\n                    type: \"PUT\",\n                    data: JSON.stringify(myJsonObj),\n                    contentType: \"application/json\",\n                    success: function(data){\n                        console.log(\"ajax update successful\");\n                        // here you could perform your actions like persisting to the server or so\n                        $('#emberForm').submit();\n                    },\n                    failure: function(data){\n                        console.log(\"ajax update failed\");\n                    }\n                });\n            },\n            goAction: function () {\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n            },\n            saveQAction: function(taskId) {\n                var currQ = this.get(\"currentQuestionLoop\");\n                var myfacts = this.get('facts.thisQuestionnaire');\n                var mystagename = this.get('currentStageName');\n                var mystage = myfacts[mystagename];\n                var myQuestionnaire = this.get('facts.thisQuestionnaire');\n            }\n        }\n    });\n\n    App.RadioButtonComponent = Ember.Component.extend({\n\n        tagName: 'input',\n        type: 'radio',\n        attributeBindings: [ 'checked', 'name', 'type', 'value' ],\n\n        checked: function () {\n            if (this.get('value') === this.get('groupValue')) {\n                Ember.run.once(this, 'takeAction');\n                return true;\n            } else { return false; }\n        },\n\n        takeAction: function() {\n            this.sendAction('selectedAction', this.get('value'));\n        },\n\n        change: function () {\n            this.set('groupValue', this.get('value'));\n            Ember.run.once(this, 'checked'); //manual observer\n        }\n\n    });\n\u003c/script\u003e\n\n\u003cstyle\u003e\n    html {\n        display: block !important;\n    }\n    table {\n        border-collapse: collapse;\n        border-spacing: 1; }\n\n    /* line 28, ../../../../../../vendor/bundle/ruby/1.9.1/gems/compass-0.12.2/frameworks/compass/stylesheets/compass/reset/_utilities.scss */\n    caption, th, td {\n        text-align: center;\n        font-weight: normal;\n        vertical-align: top; }\n\u003c/style\u003e\n\n\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"index\"\u003e\n    \u003cdiv class=\"container\" class=\"form-horizontal\" class=\" js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths\" data-ember-extension=\"1\" style=\"display: block;\"\u003e\n        \u003cdiv id=\"collapseA\" class=\"panel-collapse collapse in\"\u003e\n            \u003cdiv class=\"container-fluid\"\u003e\n\n                \u003cdiv class=\"row\"\u003e\n\n                    \u003cdiv role=\"tabpanel\"\u003e\n                        \u003c!-- Nav tabs --\u003e\n\n                        \u003c!-- Tab panes --\u003e\n                        \u003cdiv role=\"tabpanel\" class=\"tab-pane\" id=\"objstore\"\u003e\n                            \u003cdiv class=\"panel-heading\"\u003e\n                                \u003ch3 class=\"panel-title\"\u003eReview Proposed Changes Against Standard\u003c/h3\u003e\n                            \u003c/div\u003e\n                            \u003cdiv id='bod' class=\"panel-body\" style=\"padding:10px;\"\u003e\n                                \u003cdiv class=\"row\"\u003e\n                                    \u003cdiv class=\"col-md-12\"\u003e\n                                        \u003cdiv class=\"heading\"\u003e\n                                            Proposed Sections for Change\n                                        \u003c/div\u003e\n                                        {{partial \"sections\"}}\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\"row text-center\" style=\"padding:10px;\"\u003e\n                                    \u003cdiv class=\"heading\"\u003e\n                                        Comments\n                                    \u003c/div\u003e\n                                    {{textarea id='modify_Comments' name='modify_Comments' rows=\"5\" cols=\"80\" name=\"wf_Comments\" }}\n                                \u003c/div\u003e\n                                \u003cdiv class=\"row text-center\" style=\"padding:10px;\"\u003e\n                                    \u003cbutton type=\"button\" class=\"btn btn-success\" data-dismiss=\"modal\" {{action \"submitAction\"}}\u003eAPPROVE CHANGES\u003c/button\u003e\n                                    \u003cbutton type=\"button\" class=\"btn btn-danger\" data-dismiss=\"modal\" {{action \"rejectProposeAction\"}}\u003ePROPOSE CHANGES\u003c/button\u003e\n                                    \u003cbutton type=\"button\" class=\"btn btn-danger\" data-dismiss=\"modal\" {{action \"rejectChangeAction\"}}\u003eREJECT CHANGES\u003c/button\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n        {{input type=\"hidden\" name=\"wf_optionsOutcome\" valueBinding=\"wf_optionsOutcome\"}}\n    \u003c/div\u003e\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"_sections\"\u003e\n\n    {{#each facts.Sections as |section index|}}\n    \u003cdiv class=\"row\" style=\"padding-bottom:2px;padding-left:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-5\" style=\"\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n\n    {{/each}}\n\u003c/script\u003e\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"_inserts\"\u003e\n    \u003cdiv class=\"row\" style=\"padding:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-6\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n\u003c/script\u003e"},"desc":"Recently Converted Form Record","id":"5623d75cfd0afd68b2e3ef55","name":"Contract Approval Review Proposed Changes 3","origin":{"checksum":"59E8581D1637A1C0CAA422501DC2B619B4E56D05872722BAB42F2D94AEC9FA92L8141","createDate":1.445189468703e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"5622f3fefd0afd54c6dcd237","name":"Contract Approval Review Proposed Changes 3"},"owner":{},"recType":"app","tstamp":1.445189468703e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623d75cfd0afd6cb2e3ef53"},"checksum":"C12F215E942EBCD293A9C01FD2FC5B8B0434982FCDD29F495229C70B39E2D2E2L12806","createDate":{"$date":"2015-10-18T17:31:08.413Z"},"creatorId":"tpanagos@point.io","data":{"form":"\u003cscript\u003e\n    window.App.IndexController.reopen({\n        core_form: '#emberForm',\n        isSubmitting : false,\n        isAcceptable: true,\n        hasAdvice: function() {\n            var comment = this.get(\"facts.wf_Comments\");\n            var status = this.get(\"facts.wf_optionsOutcome\");\n//            console.log(\"advice?: \" + comment + \"logic: \" + ((typeof comment != \"undefined\") \u0026\u0026 (comment != \"\")));\n            return (\n                    ((typeof comment != \"undefined\") \u0026\u0026 (comment != \"\")) ||\n                    ((typeof status != \"undefined\") \u0026\u0026 ((status == \"rejectedwithchanges\") || (status == \"rejected\")))\n            );\n        }.property(),\n        isModified: function() {\n            var status = this.get(\"facts.wf_optionsOutcome\");\n//            console.log(\"status?: \" + status + \"logic: \" + ((typeof status != \"undefined\") \u0026\u0026 (status == \"rejectedwithchanges\")));\n            return ((typeof status != \"undefined\") \u0026\u0026 (status == \"rejectedwithchanges\"));\n        }.property(),\n        actions: {\n            acceptableAction: function (state) {\n                this.set(\"isAcceptable\", state);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('approve');\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n                return true;\n            },\n            requestChangeAction: function () {\n                $('[name=wf_optionsOutcome]').val('reject');\n                this.set(\"isSubmitting\", true );\n                if (this.get(\"isModified\"))\n                    var updatedSections = facts.SectionsDelta;\n                else\n                    var updatedSections = facts.Sections;\n                var myJsonObj = {\"REQUEST\": {\"INPUT\" : {\"COMMENT\" : \"Proposed Changes Recorded\", \"FIELDS\" : [],\"FACTS\": {\"Sections\":updatedSections}}}};\n                /*modify fact*/\n                $.ajax({\n                    url: \"/messages/injectListJSON/\"+jsonTask.DETAILS.ID+\"?Authorization=\"+sessionKey,\n                    type: \"PUT\",\n                    data: JSON.stringify(myJsonObj),\n                    contentType: \"application/json\",\n                    success: function(data){\n                        console.log(\"ajax update successful\");\n                        // here you could perform your actions like persisting to the server or so\n                        $('#emberForm').submit();\n                    },\n                    failure: function(data){\n                        console.log(\"ajax update failed\");\n                    }\n                });\n            },\n            goAction: function () {\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n            },\n            saveQAction: function(taskId) {\n                var currQ = this.get(\"currentQuestionLoop\");\n                var myfacts = this.get('facts.thisQuestionnaire');\n                var mystagename = this.get('currentStageName');\n                var mystage = myfacts[mystagename];\n                var myQuestionnaire = this.get('facts.thisQuestionnaire');\n            }\n        }\n    });\n\n    App.RadioButtonComponent = Ember.Component.extend({\n\n        tagName: 'input',\n        type: 'radio',\n        attributeBindings: [ 'checked', 'name', 'type', 'value' ],\n\n        checked: function () {\n            if (this.get('value') === this.get('groupValue')) {\n                Ember.run.once(this, 'takeAction');\n                return true;\n            } else { return false; }\n        },\n\n        takeAction: function() {\n            this.sendAction('selectedAction', this.get('value'));\n        },\n\n        change: function () {\n            this.set('groupValue', this.get('value'));\n            Ember.run.once(this, 'checked'); //manual observer\n        }\n\n    });\n\u003c/script\u003e\n\n\u003cstyle\u003e\n    html {\n        display: block !important;\n    }\n    table {\n        border-collapse: collapse;\n        border-spacing: 1; }\n\n    /* line 28, ../../../../../../vendor/bundle/ruby/1.9.1/gems/compass-0.12.2/frameworks/compass/stylesheets/compass/reset/_utilities.scss */\n    caption, th, td {\n        text-align: center;\n        font-weight: normal;\n        vertical-align: top; }\n\u003c/style\u003e\n\n\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"index\"\u003e\n    \u003cdiv class=\"container\" class=\"form-horizontal\" class=\" js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths\" data-ember-extension=\"1\" style=\"display: block;\"\u003e\n        \u003cdiv id=\"collapseA\" class=\"panel-collapse collapse in\"\u003e\n            \u003cdiv class=\"container-fluid\"\u003e\n                {{#if controller.hasAdvice}}\n                    \u003cdiv class=\"row\"\u003e\n                        \u003cdiv class=\"alert alert-danger\"\u003eYour change proposal status is: {{facts.wf_optionsOutcome}} because {{facts.wf_Comments}}\u003c/div\u003e\n                    \u003c/div\u003e\n                {{/if}}\n                \u003cdiv class=\"row\"\u003e\n                    \u003cdiv role=\"tabpanel\"\u003e\n                        \u003c!-- Nav tabs --\u003e\n                        \u003cul class=\"nav nav-tabs nav-justified\" role=\"tablist\"\u003e\n                            \u003cli role=\"presentation\" class=\"{{unless controller.isModified 'active'}}\"\u003e\u003ca href=\"#static\" aria-controls=\"static\" role=\"tab\" data-toggle=\"tab\"\u003eContract Acceptable\u003c/a\u003e\u003c/li\u003e\n                            \u003cli role=\"presentation\" class=\"{{if controller.isModified 'active'}}\"\u003e\u003ca href=\"#objstore\" aria-controls=\"objstore\" role=\"tab\" data-toggle=\"tab\"\u003eContract Not Acceptable\u003c/a\u003e\u003c/li\u003e\n                        \u003c/ul\u003e\n\n                        \u003c!-- Tab panes --\u003e\n                        \u003cdiv class=\"tab-content\"\u003e\n                            \u003cdiv role=\"tabpanel\" class=\"{{unless controller.isModified 'tab-pane active' 'tab-pane'}}\" id=\"static\"\u003e\n                                \u003cdiv class=\"panel-heading\"\u003e\n                                    \u003ch3 class=\"panel-title\"\u003eSign NDA Contract As-Is\u003c/h3\u003e\n                                \u003c/div\u003e\n                                \u003cdiv id='bod' class=\"panel-body\" style=\"padding:10px;\"\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-md-9\"\u003e\n                                            Please, use View and Sign buttons above to sign contract As-Is.\n                                        \u003c/div\u003e\n                                    \u003c/div\u003e\n                                    \u003cdiv class=\"row text-center\" style=\"padding:10px;\"\u003e\n                                        \u003cbutton type=\"button\" class=\"btn btn-success\" data-dismiss=\"modal\" {{action \"submitAction\"}}\u003eAPPROVE\u003c/button\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                            \u003cdiv role=\"tabpanel\" class=\"{{if controller.isModified 'tab-pane active' 'tab-pane'}}\" id=\"objstore\"\u003e\n                                \u003cdiv class=\"panel-heading\"\u003e\n                                    {{#unless controller.isModified}}\n                                    \u003ch3 class=\"panel-title\"\u003eSelect and Edit Sections\u003c/h3\u003e\n                                    {{/unless}}\n                                    {{#if controller.isModified}}\n                                    \u003ch3 class=\"panel-title\"\u003eCompare and Edit Sections\u003c/h3\u003e\n                                    {{/if}}\n                                \u003c/div\u003e\n                                \u003cdiv id='bod' class=\"panel-body\" style=\"padding:10px;\"\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        {{#unless controller.isModified}}\n                                        \u003cdiv class=\"col-md-12\"\u003e\n                                            \u003cdiv class=\"heading\"\u003e\n                                                \u003ch3\u003ePropose Revisions\u003c/h3\u003e\n                                            \u003c/div\u003e\n                                            {{render \"sections\" facts.Sections}}\n                                        \u003c/div\u003e\n                                        {{/unless}}\n                                        {{#if controller.isModified}}\n                                        \u003cdiv class=\"col-md-6\"\u003e\n                                            \u003cdiv class=\"heading\"\u003e\n                                                \u003ch3\u003eYour Proposed Revisions\u003c/h3\u003e\n                                            \u003c/div\u003e\n                                            {{render \"sectionsReadOnly\" facts.Sections}}\n                                        \u003c/div\u003e\n                                        \u003cdiv class=\"col-md-6\"\u003e\n                                            \u003cdiv class=\"heading\"\u003e\n                                                \u003ch3\u003eLegal Proposed Revisions\u003c/h3\u003e (Edit)\n                                            \u003c/div\u003e\n                                            {{render \"sections\" facts.SectionsDelta}}\n                                        \u003c/div\u003e\n                                        {{/if}}\n                                    \u003c/div\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003chr/\u003e\n                                    \u003c/div\u003e\n                                    \u003cdiv class=\"row text-center\" style=\"padding:10px;\"\u003e\n                                        {{#if controller.isModified}}\n                                        \u003cbutton type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\" {{action \"submitAction\"}}\u003eACCEPT REVISIONS\u003c/button\u003e\n                                        {{/if}}\n                                        \u003cbutton type=\"button\" class=\"btn btn-warning\" data-dismiss=\"modal\" {{action \"requestChangeAction\"}}\u003eSUBMIT REVISIONS\u003c/button\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n        {{input type=\"hidden\" name=\"wf_optionsOutcome\" valueBinding=\"wf_optionsOutcome\"}}\n    \u003c/div\u003e\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"sections\"\u003e\n    {{#each model as |section index|}}\n    \u003cdiv class=\"row\" style=\"padding-bottom:2px;padding-left:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-5\" style=\"\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n    {{/each}}\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"sectionsReadOnly\"\u003e\n    {{#each model as |section index|}}\n    \u003cdiv class=\"row\" style=\"padding-bottom:2px;padding-left:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected disabled=\"disabled\"}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-5\" style=\"\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\" readonly=\"true\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n    {{/each}}\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"_inserts\"\u003e\n    \u003cdiv class=\"row\" style=\"padding:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-6\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n\u003c/script\u003e"},"desc":"Recently Converted Form Record","id":"5623d75cfd0afd6cb2e3ef53","name":"Vendor - Contract Approval Sign or Suggest Changes 3","origin":{"checksum":"C12F215E942EBCD293A9C01FD2FC5B8B0434982FCDD29F495229C70B39E2D2E2L12806","createDate":1.445189468413e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"5622f3fefd0afd6dc6dcd235","name":"Vendor - Contract Approval Sign or Suggest Changes 3"},"owner":{},"recType":"app","tstamp":1.445189468413e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623d75dfd0afd68b2e3ef59"},"checksum":"F83560DAAFA8AD9C4A18C80917E7CF8862EF6BACDEBB9AC85B9BC3DF1E3B9832L10743","createDate":{"$date":"2015-10-18T17:31:09.393Z"},"creatorId":"tpanagos@point.io","data":{"form":"    \u003cscript type='text/javascript'\u003e\n\n        var serverUrl = \"http://api.point.io/api/v2/\";\n\n        App.Related = Ember.Object.extend({\n            \"id\": \"1f813e0c-e523-4d13-a255-793e3b20786a\",\n            \"label\": \"Joint_Venture_Agreement.pdf\",\n            \"tooltip\": \"Download allowed\",\n            \"type\": \"PIO\",\n            \"url\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=02E67D51-9395-42FB-B22FB8CE50DE674D\",\n            \"shareid\": \"\",\n            \"containerid\": \"\",\n            \"remotepath\": \"\",\n            \"fileid\": \"\",\n            \"filename\": \"\",\n            \"ak\": \"\",\n            \"totalPages\": 0,\n            \"imageURL\": \"\",\n            \"pageNum\": 0,\n            \"nextPage\": 0,\n            \"prevPage\": 0,\n            \"isLoaded\": false,\n            \"isDisplayed\": false\n        });\n\n        App.Related.reopenClass({\n            createRelatedfromRELATED: function(data) {\n                return App.Related.create({id: data.ID, label: data.LABEL, tooltip: data.TOOLTIP, type: data.TYPE, url: URL});\n            }\n        });\n\n        App.PreviewView = Ember.View.create({\n            didInsertElement: function () {\n                Ember.run.scheduleOnce('afterRender', this, 'afterRenderEvent');\n            },\n            afterRenderEvent: function () {\n                this.get('controller').send('loadpage', 1);\n            }\n        });\n\n        App.PreviewController = Ember.Controller.extend({\n            facts: jsonTask.FACTS,\n//        rawRelateds: [\n//            {\n//                \"ID\": \"5feb9cde-1ae6-4f2f-ac3b-87ac193daa4e\",\n//                \"LABEL\": \"Breakeven_Analysis_Chart.xls\",\n//                \"TOOLTIP\": \"Download allowed\",\n//                \"TYPE\": \"PIO\",\n//                \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=02E67D51-9395-42FB-B22FB8CE50DE674D\"\n//            },\n//            {\n//                \"ID\": \"fa13fb5c-2753-4a33-8460-a7470ca8d1ce\",\n//                \"LABEL\": \"Opp by Type.xlsx\",\n//                \"TOOLTIP\": \"Download prevented\",\n//                \"TYPE\": \"PIO\",\n//                \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=56272D8E-A30E-454F-85BA39BD8DB39093\"\n//            }\n//        ],\n            rawRelateds: jsonTask.RELATEDS, \n            relateds: function() {\n                var relatedObjs = Ember.A();\n                var self = this;\n                this.get(\"rawRelateds\").forEach( function(related) {\n                    relatedObjs.pushObject(App.Related.createRelatedfromRELATED(related));\n                });\n                return relatedObjs;\n            }.property(\"rawRelateds\"),\n            linkid: \"065ee71e-aa6f-45c0-a4a2-de86df05111d\",\n//            linkid: facts.linkid,\n            totalPages: 0,\n            pageNum: 1,\n            nextPage: 0,\n            prevPage: 0,\n            fileLinks: function () {\n\n            },\n            linkObject: function (linkObject) {\n//                var linkid = this.get(\"linkid\");\n                console.log(linkObject.id);\n//                var linkObject = {};\n                var servercall = serverUrl + \"links/\" + linkObject.id + \"/details?\"\n                        + \"ViewerAPIKey=5c3fe650-661d-4551-aff4-0f9d5ea8cb7d\"\n                        + \"\u0026ipaddress=127.0.0.1\";\n                $.ajax({\n                    type: \"GET\",\n                    async: false,\n                    url: servercall,\n                    success: function (data) {\n                        linkObject.shareid = data.RESULT.DATA[0][2];\n                        linkObject.containerid = data.RESULT.DATA[0][10];\n                        linkObject.remotepath = data.RESULT.DATA[0][9];\n                        linkObject.fileid = data.RESULT.DATA[0][7];\n                        linkObject.filename = data.RESULT.DATA[0][8];\n                        linkObject.ak = data.ACCESSKEY;\n                    }\n                });\n                return linkObject;\n            },\n            actions: {\n                loadpage: function (pageNum, id, tObject) {\n//                    console.log(\"loadpage \" + pageNum + \" Label \" + tObject.label);\n                    if (!tObject.isLoaded) {\n                        this.linkObject(tObject);\n                    }\n                    if (pageNum != tObject.pageNum) {\n//                        console.log(\"tObj \" + tObject.containerid + \" Label \" + tObject.label);\n                        var servercall = serverUrl + \"folders/files/preview.json?\"\n                                + \"containerid=\" + tObject.containerid\n                                + \"\u0026remotepath=\" + tObject.remotepath\n                                + \"\u0026fileid=\" + tObject.fileid\n                                + \"\u0026filename=\" + tObject.filename\n                                + \"\u0026folderid=\" + tObject.shareid\n                                + \"\u0026pagenum=\" + pageNum;\n                        var totalPages = 0;\n                        var imageUrl = \"\";\n                        $.ajax({\n                            type: \"GET\",\n                            async: false,\n                            headers: {\n                                \"Authorization\": tObject.ak\n                            },\n                            url: servercall,\n                            success: function (data) {\n                                console.log(data);\n                                tObject.set(\"totalPages\", data.NUMPAGES);\n                                tObject.set(\"imageUrl\", data.RESULT);\n                            }\n                        });\n                        tObject.set(\"isLoaded\", true);\n\n                        if ((pageNum + 1) \u003c= tObject.totalPages) {\n                            tObject.set('nextPage', pageNum + 1);\n                        } else {\n                            tObject.set('nextPage', 0);\n                        }\n\n                        if ((pageNum - 1) \u003e 0) {\n                            tObject.set('prevPage', pageNum - 1);\n                        } else {\n                            tObject.set('prevPage', 0);\n                        }\n                        tObject.set('pageNum', pageNum);\n                        document.getElementById(id).src = tObject.imageUrl;\n                    }\n                    tObject.set(\"isDisplayed\", true);\n                    $('#'+ id).show();\n//                    console.log(\"Displayed: \" + tObject.get(\"isDisplayed\") + \"isLoaded: \" + tObject.get(\"isLoaded\"));\n                },\n                closepage: function(id, tObject) {\n                    $('#'+ id).hide();\n                    tObject.set(\"isDisplayed\", false);\n                }\n            }\n        });\n\n        // This is here to trigger the rendering of the View to the end of the body tag\n        App.PreviewView.append();\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"preview\"\u003e\n        \u003cdiv class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\"\u003e\n            \u003cdiv class=\"panel-heading\"\u003e\n                \u003ch4 class=\"panel-title\"\u003e\n                    \u003ca data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseB\"\u003eRelated Files\u003c/a\u003e\n                \u003c/h4\u003e\n            \u003c/div\u003e\n            \u003cdiv id=\"collapseB\" class=\"panel-collapse collapse in\"\u003e\n                \u003cdiv class=\"container-fluid\"\u003e\n                    \u003cdiv class=\"panel panel-default\"\u003e\n                        \u003cdiv class=\"panel-body\"\u003e\n                            \u003ctable class=\"table table-striped table-bordered\"\u003e\n                                \u003cthead\u003e\n                                \u003ctr\u003e\n                                    \u003cth\u003e\u0026nbsp;\u003c/th\u003e\n                                    \u003cth\u003eLABEL\u003c/th\u003e\n                                    \u003cth\u003e\u0026nbsp;\u003c/th\u003e\n                                \u003c/tr\u003e\n                                \u003c/thead\u003e\n                                \u003ctbody\u003e\n                                    {{#each related in controller.relateds}}\n                                    {{partial \"file\"}}\n                                    {{/each}}\n                                \u003c/tbody\u003e\n                            \u003c/table\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_file\"\u003e\n            \u003ctr\u003e\n                \u003ctd align=\"right\" width=\"25\"\u003e\n                    {{#unless related.isDisplayed}}\n                    \u003cbutton class=\"btn btn-success\" {{action \"loadpage\" 1 related.id related}}\u003ePreview\u003c/button\u003e\n                    {{/unless}}\n                    {{#if related.isDisplayed}}\n                    \u003cbutton class=\"btn btn-success\" {{action \"closepage\" related.id related}}\u003eClose\u003c/button\u003e\n                    {{/if}}\n                \u003c/td\u003e\n                \u003ctd\u003e{{related.label}}\u003c/td\u003e\n                \u003ctd\u003e\n                {{#if related.isDisplayed}}\n                    \u003cp class=\"form-control-static\"\u003e\u003clabel\u003eShow Page\u003c/label\u003e {{related.pageNum}} of {{related.totalPages}}\u003c/p\u003e\n                    \u003cp\u003e{{#if related.prevPage}}\n                        \u003ca {{action \"loadpage\" related.prevPage related.id related}}\u003ePrevious\u003c/a\u003e\n                    {{/if}}\n                    {{#if related.prevPage}}\n                        {{#if related.nextPage}}\n                            \u0026nbsp;|\u0026nbsp;\n                        {{/if}}\n                    {{/if}}\n                    {{#if related.nextPage}}\n                        \u003ca {{action \"loadpage\" related.nextPage related.id related}}\u003eNext\u003c/a\u003e\n                    {{/if}}\u003c/p\u003e\n                {{/if}}\n                    \u003cp\u003e\u003cimg id={{related.id}} style=\"border:1px solid #021a40;\" hidden=true\u003e\u003c/p\u003e\n                {{#if related.isDisplayed}}\n                    \u003cp\u003e{{#if related.prevPage}}\n                        \u003ca {{action \"loadpage\" related.prevPage related.id related}}\u003ePrevious\u003c/a\u003e\n                    {{/if}}\n                    {{#if related.prevPage}}\n                        {{#if related.nextPage}}\n                            \u0026nbsp;|\u0026nbsp;\n                        {{/if}}\n                    {{/if}}\n                    {{#if related.nextPage}}\n                        \u003ca {{action \"loadpage\" related.nextPage related.id related}}\u003eNext\u003c/a\u003e\n                    {{/if}}\u003c/p\u003e\n                {{/if}}\n            \u003c/td\u003e\n            \u003c/tr\u003e\n\n    \u003c/script\u003e\n"},"desc":"Recently Converted Form Record","id":"5623d75dfd0afd68b2e3ef59","name":"apidoc preview","origin":{"checksum":"F83560DAAFA8AD9C4A18C80917E7CF8862EF6BACDEBB9AC85B9BC3DF1E3B9832L10743","createDate":1.445189469393e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"5622f3fefd0afd6dc6dcd23b","name":"apidoc preview"},"owner":{},"recType":"app","tstamp":1.445189469393e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623d75dfd0afd6cb2e3ef57"},"checksum":"6F956B9F9DA53955675C57908A90A90EC32F33A53EE6AE5C47EB61E36F185C78L23884","createDate":{"$date":"2015-10-18T17:31:09.084Z"},"creatorId":"tpanagos@point.io","data":{"form":"    \u003cscript type=\"text/javascript\"\u003e\n        var baseURL = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n\n        App.FileController = Ember.Controller.extend({\n            init: function () {\n                console.log(\"fileinit\");\n            },\n            queryParams: {path: \"\", containerid: \"\"},\n            containerid: null,\n            path: null,\n            showShareList: true,\n            bPopUp: null,\n            isFileListEmpty: true,\n            dataArray: function () {\n                var dA = Ember.A();\n                var raw = this.get(\"model\");\n                for (var i in raw) {\n                    dA.pushObject(raw[i]);\n                }\n                return dA\n            }.property(\"model\"),\n            filelist: Ember.A(),\n            folderlist: Ember.A(),\n            folderstack: Ember.A(),\n            shares: function () {\n                return this.get(\"dataArray\");\n            }.property(\"dataArray\"),\n            newFolderName: \"\",\n            headers: {\n                Authorization: sessionKey\n            },\n            uploadURL: function () {\n                return baseURL + '/apidoc/files/upload/' + this.get('folderlist.shareid');\n            }.property('folderList.shareid'),\n            uploadFile: null,\n            isLoading: false,\n            isRoot: function() {\n                return (this.get(\"folderlist\").queryParams.path == \"\")\n            }.property(\"folderlist.queryParams.path\"),\n            actions: {\n                submitAction: function () {\n                    this.set('isLoading', true);\n                    var self = this;\n                    // We really want to inject RELATEDS\n                    var injectableFiles = [];\n                    this.get(\"filelist\").forEach(function (file) {\n                        injectableFiles.pushObject({\n                            \"ID\": file.link,\n                            \"LABEL\": file.name,\n                            \"TOOLTIP\": \"file.label\",\n                            \"TYPE\": \"PIO\",\n                            \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=\" + file.link\n                        });\n                    });\n                    var injectableFacts = {\n                        'REQUEST': {\n                            'INPUT': {\n                                'RELATEDS': injectableFiles,\n                                'FIELDS': [],\n                                'FACTS': []\n                            }\n                        }\n                    };\n                    Ember.$.ajax({\n                        type: \"PUT\",\n                        async: true,\n                        url: baseURL + '/messages/injectListJSON/' + taskid + '?Authorization=' + sessionKey,\n                        data: JSON.stringify(injectableFacts),\n                        dataType: 'json',\n                        contentType: 'application/json',\n                        success: function (data) {\n                            self.set('isLoading', false);\n                            //$('#emberForm').submit();\n                        }\n                    });\n                    return true; //this bubbles the action up\n                },\n                addFile: function (share) {\n                    this.set('isLoading', true);\n                    var self = this;\n                    //create a link\n                    var linkURL = \"\";\n                    //v3\n                    var servercall = baseURL + \"/apidoc/links/create/\" + share.shareid + \"?Authorization=\" + sessionKey;\n                    $.ajax({\n                        type: \"POST\",\n                        async: false,\n                        data: {\n                            'containerid': share.containerid,\n                            'path': share.path,\n                            'fileid': share.fileid,\n                            'filename': share.name\n                        },\n                        url: servercall,\n                        success: function (data) {\n                            linkURL = data.RESPONSE.linkid;\n                            self.set('isLoading', false);\n                        }\n                    });\n                    //add it to the list\n                    var fileArray = this.get(\"filelist\");\n                    fileArray.pushObject({name: share.name, link: linkURL, label: share.name});\n                    this.set(\"isFileListEmpty\", false);\n                },\n                removeFile: function (id) {\n                    var fileList = this.get('filelist');\n                    fileList.removeObject(id);\n                    if (fileList.length == 0)\n                        this.set(\"isFileListEmpty\", true);\n                },\n                createFolderClick: function (shareid, containerid, path, modalId) {\n                    var self = this;\n                    this.set('isLoading', true);\n                    var servercall = baseURL + \"/apidoc/folders/create/\" + shareid\n                    $.ajax({\n                        type: \"POST\",\n                        async: false,\n                        data: {'containerid': containerid, 'path': path, 'foldername': this.get('newFolderName')},\n                        url: servercall,\n                        headers: {\n                            Authorization: sessionKey\n                        },\n                        cache: false,\n                        success: function (data) {\n                            self.send('modalFinished', modalId);\n                        }\n                    });\n                },\n                modalFinished: function (modalId) {\n                    $('#'+modalId).modal(\"hide\");\n                    var thisFolder = this.get(\"folderlist\");\n                    this.send('openShare', thisFolder.sharename, thisFolder.sharetype, thisFolder.shareid, thisFolder.queryParams.path, thisFolder.queryParams.containerid);\n                    this.send('setLoading', false);\n                },\n                returnToSites: function() {\n                    this.set('showShareList', true);\n                },\n                navigateToParent: function () {\n                    if (this.get('folderstack').length == 0) {\n                        this.send('returnToSites');\n                    }\n                    else {\n                        var current = this.get('folderstack').pop();\n                        this.set('folderlist', current);\n                    }\n                },\n                setLoading: function(state) {\n                  this.set('isLoading', state);\n                },\n                openShare: function (sharename, sharetype, shareid, path, containerid) {\n                    var self = this;\n                    if (typeof containerid != 'undefined')\n                        self.set('containerid', containerid);\n                    else\n                        self.set('containerid', \"\");\n                    if (typeof path != 'undefined')\n                        self.set('path', path);\n                    else\n                        self.set('path', \"\");\n                    var queryParams = {path: self.get('path'), containerid: self.get('containerid')};\n                    Ember.$.ajax({\n                        async: false,\n                        url: baseURL + '/apidoc/folders/list/' + shareid,\n                        data: queryParams,\n                        headers: {\n                            Authorization: sessionKey\n                        },\n                        success: function (data) {\n                            var sharesList = Ember.A();\n                            (data.RESPONSE.RESULT.forEach(function (share) {\n                                share.isDir = (share.type === 'DIR');\n                                var params = [];\n                                if (share.path) {\n                                    params.push('path=' + encodeURIComponent(share.path))\n                                }\n                                if (share.containerid) {\n                                    params.push('containerid=' + encodeURIComponent(share.containerid))\n                                }\n                                if (share.fileid) {\n                                    params.push('fileid=' + encodeURIComponent(share.fileid))\n                                }\n                                if (share.name) {\n                                    params.push('filename=' + encodeURIComponent(share.name))\n                                }\n                                params.push('asBinary=true');\n\n                                share.downloadURL = baseURL + '/apidoc/files/download/' + share.shareid + '?Authorization=' + sessionKey + '\u0026' + params.join(\"\u0026\")\n\n                                sharesList.pushObject(share);\n                            }));\n                            if (self.get('folderlist.shareid') \u0026\u0026 (containerid) \u0026\u0026 (self.get('folderlist.queryParams.containerid') != containerid)) {\n                                // Push the previous folder if there IS a previous folder \u0026 if this is NOT the top folder \u0026 we aren't just refreshing the current folder\n                                self.get('folderstack').push({\n                                    shares: self.get('folderlist.shares'),\n                                    shareid: self.get('folderlist.shareid'),\n                                    sharename: self.get('folderlist.sharename'),\n                                    sharetype: self.get('folderlist.sharetype'),\n                                    queryParams: self.get('folderlist.queryParams')\n                                });\n                                //console.log(containerid + \" Push \u0026 length is now: \" + self.get('folderstack').length);\n                            }\n                            // Set the current folder\n                            self.set('folderlist.shares', sharesList);\n                            self.set('folderlist.shareid', shareid);\n                            self.set('folderlist.sharename', sharename);\n                            self.set('folderlist.sharetype', sharetype);\n                            self.set('folderlist.queryParams', queryParams);\n                        }\n                    });\n                    this.set('showShareList', false);\n                }\n            }\n        });\n\n        App.CreateFolderRoute = Ember.Route.extend({\n            model: function (params, options) {\n                var model = {};\n                model.shareid = params.shareid\n                model.containerid = options.queryParams.containerid\n                model.path = options.queryParams.path\n                model.sessionKey = sessionKey\n                model.url = document.URL\n                model.baseURL = baseURL\n                return model;\n            }\n        });\n\n        App.UploadFileRoute = Ember.Route.extend({\n            model: function (params, options) {\n                var model = {};\n                model.shareid = params.shareid\n                model.containerid = options.queryParams.containerid\n                model.path = options.queryParams.path\n                model.sessionKey = sessionKey\n                model.url = document.URL\n                model.baseURL = baseURL\n                return model;\n            }\n        });\n        App.FileUploadComponent = EmberUploader.FileField.extend({\n            multiple: true,\n            url: '',\n            filesDidChange: function (files) {\n                var self = this;\n                var uploadUrl = this.get('url');\n\n                var uploader = EmberUploader.Uploader.create({\n                    url: uploadUrl,\n                    paramName: 'uploadfile'\n                });\n                uploader.on('didUpload', function (e) {\n                    self.sendAction('action', self.get('actionParams'));\n                });\n                if (!Ember.isEmpty(files)) {\n                    this.sendAction('startAction', true);\n                    uploader.uploadSerial(files, this.get('params'), this.get('headers'));\n                }\n            }\n        });\n\n    \u003c/script\u003e\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"file\"\u003e\n\n        \u003cdiv class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\"\u003e\n            \u003cdiv class=\"panel-heading\"\u003e\n                \u003ch4 class=\"panel-title\"\u003e\n                    \u003ca data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseA\"\u003eAttach Related Files\u003c/a\u003e\n                \u003c/h4\u003e\n            \u003c/div\u003e\n            \u003cdiv id=\"collapseA\" class=\"panel-collapse collapse in\"\u003e\n                \u003cdiv class=\"container-fluid\"\u003e\n                    \u003cdiv id=\"content panel-group\" id=\"accordion\"\u003e\n                        \u003cdiv style=\"padding: 10px;\"\u003e\n                            \u003cdiv class=\"panel panel-default\"\u003e\n                                \u003cdiv id='bod' class=\"panel-body\"\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-md-9\"\u003e\n                                            {{#if controller.showShareList}}\n                                            \u003cdiv id=\"sharelist\" class=\"row-fluid\"\u003e\n                                                {{partial \"sharelist\"}}\n                                            \u003c/div\u003e\n                                            {{/if}}\n                                            {{#unless controller.showShareList}}\n                                            \u003cdiv id=\"folderlist\" class=\"row-fluid\"\u003e\n                                                {{partial \"_folderlist\"}}\n                                            \u003c/div\u003e\n                                            {{/unless}}\n                                        \u003c/div\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv align=\"center\" style={{unless controller.isLoading \"display:none;\"}}\u003e\n                        \u003cimg src=\"/assets/images/throbber.gif\"/\u003e\n                    \u003c/div\u003e\n                    {{#unless controller.isFileListEmpty}}\n                    \u003cdiv id=\"content panel-group\" id=\"accordion\"\u003e\n                        \u003cdiv style=\"padding: 10px;\"\u003e\n                            \u003cdiv class=\"panel panel-default\"\u003e\n                                \u003cdiv class=\"panel-heading\"\u003e\n                                    \u003ch3 class=\"panel-title\"\u003eAttached Files\u003c/h3\u003e\n                                \u003c/div\u003e\n                                \u003cdiv id='bod' class=\"panel-body\"\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-xs-12 col-sm-4 col-md-4\"\u003e\u003clabel\u003eFile Name\u003c/label\u003e\u003c/div\u003e\n                                        \u003cdiv class=\"hidden-xs col-sm-6 col-md-6\"\u003e\u003clabel\u003eFile Label\u003c/label\u003e\u003c/div\u003e\n                                    \u003c/div\u003e\n                                    {{#each file in controller.filelist}}\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-xs-12 col-sm-4 col-md-4\"\u003e\u003cp class=\"form-control-static\"\u003e{{file.name}}\u003c/p\u003e\u003c/div\u003e\n                                        \u003cdiv class=\"col-xs-12 col-sm-6 col-md-6\"\u003e{{input type=\"text\" class=\"form-control\"\n                                            value=file.label}}\n                                        \u003c/div\u003e\n                                        \u003cdiv class=\"hidden-xs col-sm-2 col-md-2\"\u003e\n                                            \u003cbutton class=\"btn btn-danger btn-sm\" {{action\n                                            \"removeFile\" file}}\u003eRemove\u0026nbsp;\u003cspan\n                                                class=\"glyphicon glyphicon-trash\"\u003e\u003c/span\u003e\u003c/button\u003e\n                                        \u003c/div\u003e\n                                    \u003c/div\u003e\n                                    {{/each}}\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    {{/unless}}\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_sharelist\"\u003e\n        \u003ctable class=\"table table-bordered table-striped table-condensed col-md-10\"\u003e\n            \u003cthead\u003e\n            \u003ctr\u003e\n                \u003cth\u003eName\u003c/th\u003e\n                \u003cth\u003eSite Type\u003c/th\u003e\n            \u003c/tr\u003e\n            \u003c/thead\u003e\n            \u003ctbody\u003e\n            {{#each share in controller.shares}}\n            \u003ctr\u003e\n                \u003ctd\u003e\u003ca {{action \"openShare\" share.share.name share.share.type share.share.id share.share.path share.share.containerid}}\u003e{{share.share.name}}\u003c/a\u003e\u003c/td\u003e\n                \u003ctd\u003e{{share.share.type}}\u003c/td\u003e\n            \u003c/tr\u003e\n            {{/each}}\n            \u003c/tbody\u003e\n        \u003c/table\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_createFolder\"\u003e\n        \u003cdiv class=\"modal fade\" id=\"button-modal-create\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\"\u003e\n            \u003cdiv class=\"modal-dialog\"\u003e\n                \u003cdiv class=\"modal-content\"\u003e\n                    \u003cform id=\"createfolderform\" class=\"form-horizontal\" enctype=\"application/x-www-form-urlencoded\" method=\"post\"\u003e\n                        \u003cdiv class=\"modal-header\"\u003e\n                            \u003cbutton type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"\u003e\n                                \u003cspan aria-hidden=\"true\"\u003e\u0026times;\u003c/span\u003e\n                            \u003c/button\u003e\n                            \u003ch4 class=\"modal-title\" id=\"myModalLabel\"\u003eNew Folder\u003c/h4\u003e\n                        \u003c/div\u003e\n                        \u003cdiv class=\"modal-body\"\u003e\n                            \u003cdiv class=\"form-group\"\u003e\n                                {{input id=\"createfolder\" name=\"foldername\" class=\"form-control\" type=\"text\" value=controller.newFolderName}}\n                                \u003cbutton class=\"btn btn-default\" type=\"submit\" {{action \"createFolderClick\" folderlist.shareid containerid path \"button-modal-create\"}}\u003eCreate\u003c/button\u003e\n                            \u003c/div\u003e\n                            \u003cdiv align=\"center\" style={{unless controller.isLoading \"display:none;\"}}\u003e\n                                \u003cimg src=\"/assets/images/throbber.gif\"/\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/form\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_uploadFile\"\u003e\n        \u003cdiv class=\"modal fade\" id=\"button-modal-upload\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\"\u003e\n            \u003cdiv class=\"modal-dialog\"\u003e\n                \u003cdiv class=\"modal-content\"\u003e\n                    \u003cform id=\"fileuploadform\" class=\"form-horizontal\" enctype=\"multipart/form-data\" method=\"post\"\u003e\n                        \u003cdiv class=\"modal-header\"\u003e\n                            \u003cbutton type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"\u003e\n                                \u003cspan aria-hidden=\"true\"\u003e\u0026times;\u003c/span\u003e\n                            \u003c/button\u003e\n                            \u003ch4 class=\"modal-title\" id=\"myModalLabel\"\u003eFile Upload\u003c/h4\u003e\n                        \u003c/div\u003e\n                        \u003cdiv class=\"modal-body\"\u003e\n                            \u003cdiv class=\"form-group\"\u003e\n                                {{file-upload class=\"form-control\" url=controller.uploadURL\n                                params=controller.folderlist.queryParams\n                                headers=controller.headers action='modalFinished'\n                                actionParams=\"button-modal-upload\" startAction='setLoading'}}\n                            \u003c/div\u003e\n                            \u003cdiv align=\"center\" style={{unless controller.isLoading \"display:none;\"}}\u003e\n                                \u003cimg src=\"/assets/images/throbber.gif\"/\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/form\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_folderlist\"\u003e\n        \u003cdiv class=\"panel-heading\"\u003e\n            \u003ch2 class=\"panel-title\"\u003e{{controller.folderlist.sharename}}\u003cspan style=\"float:right;\"\u003e\u003cem\u003e{{controller.folderlist.sharetype}}\u003c/em\u003e\u003c/span\u003e\u003c/h2\u003e\n        \u003c/div\u003e\n        \u003cdiv id=\"browseOnly\"\u003e\n            \u003c!--\u003cbutton type=\"button\" class=\"btn btn-default {{if controller.isRoot 'disabled'}}\" {{action \"navigateToParent\" controller.folderlist.shareid}}\u003e--\u003e\n            \u003c!--\u003cspan class=\"glyphicon glyphicon-level-up\"\u003e\u003c/span\u003e \u0026nbsp;Back to Parent--\u003e\n            \u003c!--\u003c/button\u003e--\u003e\n            {{partial 'uploadFile'}}\n            {{partial 'createFolder'}}\n        \u003c/div\u003e\n        \u003ctable class=\"table table-bordered table-striped col-md-12\"\u003e\n            \u003cthead\u003e\n            \u003ctr\u003e\n                \u003cth\u003e\u003ca {{action \"returnToSites\"}}\u003eHome\u003c/a\u003e \u003ca {{action \"navigateToParent\" controller.folderlist.shareid}}\u003e/{{controller.folderlist.queryParams.path}}\u003c/a\u003e\u003c/th\u003e\n                \u003cth\u003e\u003c/th\u003e\n            \u003c/tr\u003e\n            \u003c/thead\u003e\n            \u003ctbody\u003e\n            {{#each controller.folderlist.shares as |share|}}\n            \u003ctr\u003e\n                \u003ctd\u003e\n                    {{#if share.isDir}}\n                    \u003ca {{action \"openShare\" controller.folderlist.sharename controller.folderlist.sharetype share.shareid share.path share.containerid}}\u003e\n                    \u003cspan class=\"glyphicon glyphicon-folder-open\"\u003e\u003c/span\u003e \u0026nbsp;\n                    {{share.name}}\n                    \u003c/a\u003e\n                    {{/if}}\n                    {{#unless share.isDir}}\n                    \u003ca href=\"{{share.downloadURL}}\"\u003e\n                        \u003cspan class=\"glyphicon glyphicon-file\" style=\"color: silver;\"\u003e\u003c/span\u003e \u0026nbsp;\n                        {{share.name}}\n                    \u003c/a\u003e\n                    {{/unless}}\n                \u003c/td\u003e\n                \u003ctd align=\"center\"\u003e\n                    {{#unless share.isDir}}\n                    \u003c!--\u003ca class=\"btn btn-default\" href=\"{{share.downloadURL}}\"\u003e--\u003e\n                        \u003c!--\u003cspan class=\"glyphicon glyphicon-download\"\u003e\u003c/span\u003e \u0026nbsp; Download--\u003e\n                    \u003c!--\u003c/a\u003e--\u003e\n                    \u003cbutton class=\"btn btn-success\" {{action\n                    \"addFile\" share}}\u003e\n                    \u003cspan class=\"glyphicon glyphicon-paperclip\"\u003e\u003c/span\u003e \u0026nbsp; Attach File\n                    \u003c/button\u003e\n                    {{/unless}}\n                \u003c/td\u003e\n            \u003c/tr\u003e\n            {{/each}}\n            \u003c/tbody\u003e\n            \u003ctfoot\u003e\n                \u003ctr\u003e\n                    \u003ctd colspan=\"2\"\u003e\n                        \u003ca data-insertid=\"1\" class=\"btn btn-success\" data-toggle=\"modal\" data-target=\"#button-modal-upload\"\u003eUpload Files\u003c/a\u003e\n                        \u003ca data-insertid=\"1\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#button-modal-create\"\u003eCreate Folder\u003c/a\u003e\n                    \u003c/td\u003e\n                \u003c/tr\u003e\n            \u003c/tfoot\u003e\n        \u003c/table\u003e\n    \u003c/script\u003e"},"desc":"Recently Converted Form Record","id":"5623d75dfd0afd6cb2e3ef57","name":"apidoc select \u0026 preview","origin":{"checksum":"6F956B9F9DA53955675C57908A90A90EC32F33A53EE6AE5C47EB61E36F185C78L23884","createDate":1.445189469084e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"5622f3fefd0afd68c6dcd239","name":"apidoc select \u0026 preview"},"owner":{},"recType":"app","tstamp":1.445189469084e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623d75dfd0afd6cb2e3ef5b"},"checksum":"5DB9E01924635070D31E0762D628EBA0E44C0A880462CF8AE69562F8847D546DL23305","createDate":{"$date":"2015-10-18T17:31:09.703Z"},"creatorId":"tpanagos@point.io","data":{"form":"    \u003cscript type=\"text/javascript\"\u003e\n        var baseURL = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n\n        App.FileController = Ember.Controller.extend({\n            init: function () {\n                console.log(\"fileinit\");\n            },\n            queryParams: {path: \"\", containerid: \"\"},\n            containerid: null,\n            path: null,\n            showShareList: true,\n            bPopUp: null,\n            isFileListEmpty: true,\n            dataArray: function () {\n                var dA = Ember.A();\n                var raw = this.get(\"model\");\n                for (var i in raw) {\n                    dA.pushObject(raw[i]);\n                }\n                return dA\n            }.property(\"model\"),\n            filelist: Ember.A(),\n            folderlist: Ember.A(),\n            folderstack: Ember.A(),\n            shares: function () {\n                return this.get(\"dataArray\");\n            }.property(\"dataArray\"),\n            newFolderName: \"\",\n            headers: {\n                Authorization: sessionKey\n            },\n            uploadURL: function () {\n                return baseURL + '/apidoc/files/upload/' + this.get('folderlist.shareid');\n            }.property('folderList.shareid'),\n            uploadFile: null,\n            isLoading: false,\n            actions: {\n                submitAction: function () {\n                    this.set('isLoading', true);\n                    var self = this;\n                    // We really want to inject RELATEDS\n                    var injectableFiles = [];\n                    this.get(\"filelist\").forEach(function (file) {\n                        injectableFiles.pushObject({\n                            \"ID\": file.link,\n                            \"LABEL\": file.name,\n                            \"TOOLTIP\": \"file.label\",\n                            \"TYPE\": \"PIO\",\n                            \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=\" + file.link\n                        });\n                    });\n                    var injectableFacts = {\n                        'REQUEST': {\n                            'INPUT': {\n                                'RELATEDS': injectableFiles,\n                                'FIELDS': [],\n                                'FACTS': []\n                            }\n                        }\n                    };\n                    Ember.$.ajax({\n                        type: \"PUT\",\n                        async: true,\n                        url: baseURL + '/messages/injectListJSON/' + taskid + '?Authorization=' + sessionKey,\n                        data: JSON.stringify(injectableFacts),\n                        dataType: 'json',\n                        contentType: 'application/json',\n                        success: function (data) {\n                            self.set('isLoading', false);\n                            //$('#emberForm').submit();\n                        }\n                    });\n                    return true; //this bubbles the action up\n                },\n                addFile: function (share) {\n                    this.set('isLoading', true);\n                    var self = this;\n                    //create a link\n                    var linkURL = \"\";\n                    //v3\n                    var servercall = baseURL + \"/apidoc/links/create/\" + share.shareid + \"?Authorization=\" + sessionKey;\n                    $.ajax({\n                        type: \"POST\",\n                        async: false,\n                        data: {\n                            'containerid': share.containerid,\n                            'path': share.path,\n                            'fileid': share.fileid,\n                            'filename': share.name\n                        },\n                        url: servercall,\n                        success: function (data) {\n                            linkURL = data.RESPONSE.linkid;\n                            self.set('isLoading', false);\n                        }\n                    });\n                    //add it to the list\n                    var fileArray = this.get(\"filelist\");\n                    fileArray.pushObject({name: share.name, link: linkURL, label: share.name});\n                    this.set(\"isFileListEmpty\", false);\n                },\n                removeFile: function (id) {\n                    var fileList = this.get('filelist');\n                    fileList.removeObject(id);\n                    if (fileList.length == 0)\n                        this.set(\"isFileListEmpty\", true);\n                },\n                createFolderClick: function (shareid, containerid, path, modalId) {\n                    var self = this;\n                    this.set('isLoading', true);\n                    var servercall = baseURL + \"/apidoc/folders/create/\" + shareid\n                    $.ajax({\n                        type: \"POST\",\n                        async: false,\n                        data: {'containerid': containerid, 'path': path, 'foldername': this.get('newFolderName')},\n                        url: servercall,\n                        headers: {\n                            Authorization: sessionKey\n                        },\n                        cache: false,\n                        success: function (data) {\n                            self.send('modalFinished', modalId);\n                        }\n                    });\n                },\n                modalFinished: function (modalId) {\n                    $('#'+modalId).modal(\"hide\");\n                    var thisFolder = this.get(\"folderlist\");\n                    this.send('openShare', thisFolder.sharename, thisFolder.sharetype, thisFolder.shareid, thisFolder.queryParams.path, thisFolder.queryParams.containerid);\n                    this.send('setLoading', false);\n                },\n                returnToSites: function() {\n                    this.set('showShareList', true);\n                },\n                navigateToParent: function () {\n                    if (this.get('folderstack').length == 0) {\n                        this.send('returnToSites');\n                    }\n                    else {\n                        var current = this.get('folderstack').pop();\n                        this.set('folderlist', current);\n                    }\n                },\n                setLoading: function(state) {\n                  this.set('isLoading', state);\n                },\n                openShare: function (sharename, sharetype, shareid, path, containerid) {\n                    var self = this;\n                    if (typeof containerid != 'undefined')\n                        self.set('containerid', containerid);\n                    else\n                        self.set('containerid', \"\");\n                    if (typeof path != 'undefined')\n                        self.set('path', path);\n                    else\n                        self.set('path', \"\");\n                    var queryParams = {path: self.get('path'), containerid: self.get('containerid')};\n                    Ember.$.ajax({\n                        async: false,\n                        url: baseURL + '/apidoc/folders/list/' + shareid,\n                        data: queryParams,\n                        headers: {\n                            Authorization: sessionKey\n                        },\n                        success: function (data) {\n                            var sharesList = Ember.A();\n                            (data.RESPONSE.RESULT.forEach(function (share) {\n                                share.isDir = (share.type === 'DIR');\n                                var params = [];\n                                if (share.path) {\n                                    params.push('path=' + encodeURIComponent(share.path))\n                                }\n                                if (share.containerid) {\n                                    params.push('containerid=' + encodeURIComponent(share.containerid))\n                                }\n                                if (share.fileid) {\n                                    params.push('fileid=' + encodeURIComponent(share.fileid))\n                                }\n                                if (share.name) {\n                                    params.push('filename=' + encodeURIComponent(share.name))\n                                }\n                                params.push('asBinary=true');\n\n                                share.downloadURL = baseURL + '/apidoc/files/download/' + share.shareid + '?Authorization=' + sessionKey + '\u0026' + params.join(\"\u0026\")\n\n                                sharesList.pushObject(share);\n                            }));\n                            if (self.get('folderlist.shareid') \u0026\u0026 (containerid) \u0026\u0026 (self.get('folderlist.queryParams.containerid') != containerid)) {\n                                // Push the previous folder if there IS a previous folder \u0026 if this is NOT the top folder \u0026 we aren't just refreshing the current folder\n                                self.get('folderstack').push({\n                                    shares: self.get('folderlist.shares'),\n                                    shareid: self.get('folderlist.shareid'),\n                                    queryParams: self.get('folderlist.queryParams')\n                                });\n                                //console.log(containerid + \" Push \u0026 length is now: \" + self.get('folderstack').length);\n                            }\n                            // Set the current folder\n                            self.set('folderlist.shares', sharesList);\n                            self.set('folderlist.shareid', shareid);\n                            self.set('folderlist.sharename', sharename);\n                            self.set('folderlist.sharetype', sharetype);\n                            self.set('folderlist.queryParams', queryParams);\n                        }\n                    });\n                    this.set('showShareList', false);\n                }\n            }\n        });\n\n        App.CreateFolderRoute = Ember.Route.extend({\n            model: function (params, options) {\n                var model = {};\n                model.shareid = params.shareid\n                model.containerid = options.queryParams.containerid\n                model.path = options.queryParams.path\n                model.sessionKey = sessionKey\n                model.url = document.URL\n                model.baseURL = baseURL\n                return model;\n            }\n        });\n\n        App.UploadFileRoute = Ember.Route.extend({\n            model: function (params, options) {\n                var model = {};\n                model.shareid = params.shareid\n                model.containerid = options.queryParams.containerid\n                model.path = options.queryParams.path\n                model.sessionKey = sessionKey\n                model.url = document.URL\n                model.baseURL = baseURL\n                return model;\n            }\n        });\n        App.FileUploadComponent = EmberUploader.FileField.extend({\n            multiple: true,\n            url: '',\n            filesDidChange: function (files) {\n                var self = this;\n                var uploadUrl = this.get('url');\n\n                var uploader = EmberUploader.Uploader.create({\n                    url: uploadUrl,\n                    paramName: 'uploadfile'\n                });\n                uploader.on('didUpload', function (e) {\n                    self.sendAction('action', self.get('actionParams'));\n                });\n                if (!Ember.isEmpty(files)) {\n                    this.sendAction('startAction', true);\n                    uploader.uploadSerial(files, this.get('params'), this.get('headers'));\n                }\n            }\n        });\n\n    \u003c/script\u003e\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"file\"\u003e\n\n        \u003cdiv class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\"\u003e\n            \u003cdiv class=\"panel-heading\"\u003e\n                \u003ch4 class=\"panel-title\"\u003e\n                    \u003ca data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseA\"\u003eAttach Related Files\u003c/a\u003e\n                \u003c/h4\u003e\n            \u003c/div\u003e\n            \u003cdiv id=\"collapseA\" class=\"panel-collapse collapse in\"\u003e\n                \u003cdiv class=\"container-fluid\"\u003e\n\n                    \u003cdiv id=\"content panel-group\" id=\"accordion\"\u003e\n                        \u003cdiv style=\"padding: 10px;\"\u003e\n                            \u003cdiv class=\"panel panel-default\"\u003e\n                                \u003cdiv id='bod' class=\"panel-body\"\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-md-9\"\u003e\n                                            {{#if controller.showShareList}}\n                                            \u003cdiv id=\"sharelist\" class=\"row-fluid\"\u003e\n                                                {{partial \"sharelist\"}}\n                                            \u003c/div\u003e\n                                            {{/if}}\n                                            {{#unless controller.showShareList}}\n                                            \u003cdiv id=\"folderlist\" class=\"row-fluid\"\u003e\n                                                {{partial \"_folderlist\"}}\n                                            \u003c/div\u003e\n                                            {{/unless}}\n                                        \u003c/div\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv align=\"center\" style={{unless controller.isLoading \"display:none;\"}}\u003e\n                        \u003cimg src=\"/assets/images/throbber.gif\"/\u003e\n                    \u003c/div\u003e\n                    {{#unless controller.isFileListEmpty}}\n                    \u003cdiv id=\"content panel-group\" id=\"accordion\"\u003e\n                        \u003cdiv style=\"padding: 10px;\"\u003e\n                            \u003cdiv class=\"panel panel-default\"\u003e\n                                \u003cdiv class=\"panel-heading\"\u003e\n                                    \u003ch3 class=\"panel-title\"\u003eAttached Files\u003c/h3\u003e\n                                \u003c/div\u003e\n                                \u003cdiv id='bod' class=\"panel-body\"\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-md-3\"\u003e\u003clabel\u003eFile Label\u003c/label\u003e\u003c/div\u003e\n                                        \u003cdiv class=\"col-md-3\"\u003e\u003clabel\u003eFile Name\u003c/label\u003e\u003c/div\u003e\n                                        \u003cdiv class=\"col-md-3\"\u003e\u003clabel\u003eLink\u003c/label\u003e\u003c/div\u003e\n                                    \u003c/div\u003e\n                                    {{#each file in controller.filelist}}\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-md-3\"\u003e{{input type=\"text\" class=\"form-control\"\n                                            value=file.label}}\n                                        \u003c/div\u003e\n                                        \u003cdiv class=\"col-md-3\"\u003e\u003cp class=\"form-control-static\"\u003e{{file.name}}\u003c/p\u003e\u003c/div\u003e\n                                        \u003cdiv class=\"col-md-3\"\u003e\u003cp class=\"form-control-static\"\u003e{{file.link}}\u003c/p\u003e\u003c/div\u003e\n                                        \u003cbutton class=\"btn btn-danger btn-sm\" {{action\n                                        \"removeFile\" file}}\u003eRemove\u0026nbsp;\u003cspan\n                                            class=\"glyphicon glyphicon-trash\"\u003e\u003c/span\u003e\u003c/button\u003e\n                                        {{input type=\"hidden\" value=file.link name=file.name}}\n                                    \u003c/div\u003e\n                                    {{/each}}\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    {{/unless}}\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_sharelist\"\u003e\n        \u003ctable class=\"table table-bordered table-striped table-condensed col-md-10\"\u003e\n            \u003cthead\u003e\n            \u003ctr\u003e\n                \u003cth\u003eName\u003c/th\u003e\n                \u003cth\u003eSite Type\u003c/th\u003e\n            \u003c/tr\u003e\n            \u003c/thead\u003e\n            \u003ctbody\u003e\n            {{#each share in controller.shares}}\n            \u003ctr\u003e\n                \u003ctd\u003e\u003ca {{action \"openShare\" share.share.name share.share.type share.share.id share.share.path share.share.containerid}}\u003e{{share.share.name}}\u003c/a\u003e\u003c/td\u003e\n                \u003ctd\u003e{{share.type}}\u003c/td\u003e\n            \u003c/tr\u003e\n            {{/each}}\n            \u003c/tbody\u003e\n        \u003c/table\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_createFolder\"\u003e\n        \u003cdiv class=\"modal fade\" id=\"button-modal-create\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\"\u003e\n            \u003cdiv class=\"modal-dialog\"\u003e\n                \u003cdiv class=\"modal-content\"\u003e\n                    \u003cform id=\"createfolderform\" class=\"form-horizontal\" enctype=\"application/x-www-form-urlencoded\" method=\"post\"\u003e\n                        \u003cdiv class=\"modal-header\"\u003e\n                            \u003cbutton type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"\u003e\n                                \u003cspan aria-hidden=\"true\"\u003e\u0026times;\u003c/span\u003e\n                            \u003c/button\u003e\n                            \u003ch4 class=\"modal-title\" id=\"myModalLabel\"\u003eNew Folder\u003c/h4\u003e\n                        \u003c/div\u003e\n                        \u003cdiv class=\"modal-body\"\u003e\n                            \u003cdiv class=\"form-group\"\u003e\n                                {{input id=\"createfolder\" name=\"foldername\" class=\"form-control\" type=\"text\" value=controller.newFolderName}}\n                                \u003cbutton class=\"btn btn-default\" type=\"submit\" {{action \"createFolderClick\" folderlist.shareid containerid path \"button-modal-create\"}}\u003eCreate\u003c/button\u003e\n                            \u003c/div\u003e\n                            \u003cdiv align=\"center\" style={{unless controller.isLoading \"display:none;\"}}\u003e\n                                \u003cimg src=\"/assets/images/throbber.gif\"/\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/form\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_uploadFile\"\u003e\n        \u003cdiv class=\"modal fade\" id=\"button-modal-upload\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\"\u003e\n            \u003cdiv class=\"modal-dialog\"\u003e\n                \u003cdiv class=\"modal-content\"\u003e\n                    \u003cform id=\"fileuploadform\" class=\"form-horizontal\" enctype=\"multipart/form-data\" method=\"post\"\u003e\n                        \u003cdiv class=\"modal-header\"\u003e\n                            \u003cbutton type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"\u003e\n                                \u003cspan aria-hidden=\"true\"\u003e\u0026times;\u003c/span\u003e\n                            \u003c/button\u003e\n                            \u003ch4 class=\"modal-title\" id=\"myModalLabel\"\u003eFile Upload\u003c/h4\u003e\n                        \u003c/div\u003e\n                        \u003cdiv class=\"modal-body\"\u003e\n                            \u003cdiv class=\"form-group\"\u003e\n                                {{file-upload class=\"form-control\" url=controller.uploadURL\n                                params=controller.folderlist.queryParams\n                                headers=controller.headers action='modalFinished'\n                                actionParams=\"button-modal-upload\" startAction='setLoading'}}\n                            \u003c/div\u003e\n                            \u003cdiv align=\"center\" style={{unless controller.isLoading \"display:none;\"}}\u003e\n                                \u003cimg src=\"/assets/images/throbber.gif\"/\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/form\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_folderlist\"\u003e\n        \u003cdiv id=\"browseOnly\"\u003e\n            {{controller.folderlist.sharename}}\n            \u003ca data-insertid=\"1\" class=\"btn btn-default\" data-toggle=\"modal\" data-target=\"#button-modal-upload\"\u003eUpload Files\u003c/a\u003e\n            \u003ca data-insertid=\"1\" class=\"btn btn-default\" data-toggle=\"modal\" data-target=\"#button-modal-create\"\u003eCreate Folder\u003c/a\u003e\n            \u003cbutton type=\"button\" class=\"btn btn-default\" {{action\n            \"returnToSites\"}}\u003e\n            \u003cspan class=\"glyphicon glyphicon-folder-open\"\u003e\u003c/span\u003e \u0026nbsp;Back to Root\n            \u003c/button\u003e\n            \u003cbutton type=\"button\" class=\"btn btn-default\" {{action \"navigateToParent\" controller.folderlist.shareid}}\u003e\n            \u003cspan class=\"glyphicon glyphicon-level-up\"\u003e\u003c/span\u003e \u0026nbsp;Back to Parent\n            \u003c/button\u003e\n            {{partial 'uploadFile'}}\n            {{partial 'createFolder'}}\n        \u003c/div\u003e\n        \u003ctable class=\"table table-bordered table-striped col-md-12\"\u003e\n            \u003cthead\u003e\n            \u003ctr\u003e\n                \u003cth\u003e/{{controller.folderlist.queryParams.path}}\u003c/th\u003e\n                \u003cth\u003e\u003c/th\u003e\n            \u003c/tr\u003e\n            \u003c/thead\u003e\n            \u003ctbody\u003e\n            {{#each controller.folderlist.shares as |share|}}\n            \u003ctr\u003e\n                \u003ctd\u003e\n                    {{#if share.isDir}}\n                    \u003ca {{action \"openShare\" controller.folderlist.sharename controller.folderlist.sharetype share.shareid share.path share.containerid}}\u003e\n                    \u003cspan class=\"glyphicon glyphicon-folder-open\"\u003e\u003c/span\u003e \u0026nbsp;\n                    {{share.name}}\n                    \u003c/a\u003e\n                    {{/if}}\n                    {{#unless share.isDir}}\n                    \u003ca href=\"{{share.downloadURL}}\"\u003e\n                        \u003cspan class=\"glyphicon glyphicon-file\" style=\"color: silver;\"\u003e\u003c/span\u003e \u0026nbsp;\n                        {{share.name}}\n                    \u003c/a\u003e\n                    {{/unless}}\n                \u003c/td\u003e\n                \u003ctd\u003e\n                    {{#unless share.isDir}}\n                    \u003ca class=\"btn btn-default\" href=\"{{share.downloadURL}}\"\u003e\n                        \u003cspan class=\"glyphicon glyphicon-download\"\u003e\u003c/span\u003e \u0026nbsp; Download\n                    \u003c/a\u003e\n                    \u003cbutton class=\"btn btn-default\" {{action\n                    \"addFile\" share}}\u003e\n                    \u003cspan class=\"glyphicon glyphicon-paperclip\"\u003e\u003c/span\u003e \u0026nbsp; Attach File\n                    \u003c/button\u003e\n                    {{/unless}}\n                \u003c/td\u003e\n            \u003c/tr\u003e\n            {{/each}}\n            \u003c/tbody\u003e\n        \u003c/table\u003e\n    \u003c/script\u003e"},"desc":"Recently Converted Form Record","id":"5623d75dfd0afd6cb2e3ef5b","name":"DocuSign Default Fact View","origin":{"checksum":"5DB9E01924635070D31E0762D628EBA0E44C0A880462CF8AE69562F8847D546DL23305","createDate":1.445189469703e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"5622f3fefd0afd68c6dcd23d","name":"DocuSign Default Fact View"},"owner":{},"recType":"app","tstamp":1.445189469703e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623dcc3fd0afd1106e3f015"},"checksum":"C12F215E942EBCD293A9C01FD2FC5B8B0434982FCDD29F495229C70B39E2D2E2L12806","createDate":{"$date":"2015-10-18T17:54:11.852Z"},"creatorId":"tpanagos@point.io","data":{"form":"\u003cscript\u003e\n    window.App.IndexController.reopen({\n        core_form: '#emberForm',\n        isSubmitting : false,\n        isAcceptable: true,\n        hasAdvice: function() {\n            var comment = this.get(\"facts.wf_Comments\");\n            var status = this.get(\"facts.wf_optionsOutcome\");\n//            console.log(\"advice?: \" + comment + \"logic: \" + ((typeof comment != \"undefined\") \u0026\u0026 (comment != \"\")));\n            return (\n                    ((typeof comment != \"undefined\") \u0026\u0026 (comment != \"\")) ||\n                    ((typeof status != \"undefined\") \u0026\u0026 ((status == \"rejectedwithchanges\") || (status == \"rejected\")))\n            );\n        }.property(),\n        isModified: function() {\n            var status = this.get(\"facts.wf_optionsOutcome\");\n//            console.log(\"status?: \" + status + \"logic: \" + ((typeof status != \"undefined\") \u0026\u0026 (status == \"rejectedwithchanges\")));\n            return ((typeof status != \"undefined\") \u0026\u0026 (status == \"rejectedwithchanges\"));\n        }.property(),\n        actions: {\n            acceptableAction: function (state) {\n                this.set(\"isAcceptable\", state);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('approve');\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n                return true;\n            },\n            requestChangeAction: function () {\n                $('[name=wf_optionsOutcome]').val('reject');\n                this.set(\"isSubmitting\", true );\n                if (this.get(\"isModified\"))\n                    var updatedSections = facts.SectionsDelta;\n                else\n                    var updatedSections = facts.Sections;\n                var myJsonObj = {\"REQUEST\": {\"INPUT\" : {\"COMMENT\" : \"Proposed Changes Recorded\", \"FIELDS\" : [],\"FACTS\": {\"Sections\":updatedSections}}}};\n                /*modify fact*/\n                $.ajax({\n                    url: \"/messages/injectListJSON/\"+jsonTask.DETAILS.ID+\"?Authorization=\"+sessionKey,\n                    type: \"PUT\",\n                    data: JSON.stringify(myJsonObj),\n                    contentType: \"application/json\",\n                    success: function(data){\n                        console.log(\"ajax update successful\");\n                        // here you could perform your actions like persisting to the server or so\n                        $('#emberForm').submit();\n                    },\n                    failure: function(data){\n                        console.log(\"ajax update failed\");\n                    }\n                });\n            },\n            goAction: function () {\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n            },\n            saveQAction: function(taskId) {\n                var currQ = this.get(\"currentQuestionLoop\");\n                var myfacts = this.get('facts.thisQuestionnaire');\n                var mystagename = this.get('currentStageName');\n                var mystage = myfacts[mystagename];\n                var myQuestionnaire = this.get('facts.thisQuestionnaire');\n            }\n        }\n    });\n\n    App.RadioButtonComponent = Ember.Component.extend({\n\n        tagName: 'input',\n        type: 'radio',\n        attributeBindings: [ 'checked', 'name', 'type', 'value' ],\n\n        checked: function () {\n            if (this.get('value') === this.get('groupValue')) {\n                Ember.run.once(this, 'takeAction');\n                return true;\n            } else { return false; }\n        },\n\n        takeAction: function() {\n            this.sendAction('selectedAction', this.get('value'));\n        },\n\n        change: function () {\n            this.set('groupValue', this.get('value'));\n            Ember.run.once(this, 'checked'); //manual observer\n        }\n\n    });\n\u003c/script\u003e\n\n\u003cstyle\u003e\n    html {\n        display: block !important;\n    }\n    table {\n        border-collapse: collapse;\n        border-spacing: 1; }\n\n    /* line 28, ../../../../../../vendor/bundle/ruby/1.9.1/gems/compass-0.12.2/frameworks/compass/stylesheets/compass/reset/_utilities.scss */\n    caption, th, td {\n        text-align: center;\n        font-weight: normal;\n        vertical-align: top; }\n\u003c/style\u003e\n\n\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"index\"\u003e\n    \u003cdiv class=\"container\" class=\"form-horizontal\" class=\" js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths\" data-ember-extension=\"1\" style=\"display: block;\"\u003e\n        \u003cdiv id=\"collapseA\" class=\"panel-collapse collapse in\"\u003e\n            \u003cdiv class=\"container-fluid\"\u003e\n                {{#if controller.hasAdvice}}\n                    \u003cdiv class=\"row\"\u003e\n                        \u003cdiv class=\"alert alert-danger\"\u003eYour change proposal status is: {{facts.wf_optionsOutcome}} because {{facts.wf_Comments}}\u003c/div\u003e\n                    \u003c/div\u003e\n                {{/if}}\n                \u003cdiv class=\"row\"\u003e\n                    \u003cdiv role=\"tabpanel\"\u003e\n                        \u003c!-- Nav tabs --\u003e\n                        \u003cul class=\"nav nav-tabs nav-justified\" role=\"tablist\"\u003e\n                            \u003cli role=\"presentation\" class=\"{{unless controller.isModified 'active'}}\"\u003e\u003ca href=\"#static\" aria-controls=\"static\" role=\"tab\" data-toggle=\"tab\"\u003eContract Acceptable\u003c/a\u003e\u003c/li\u003e\n                            \u003cli role=\"presentation\" class=\"{{if controller.isModified 'active'}}\"\u003e\u003ca href=\"#objstore\" aria-controls=\"objstore\" role=\"tab\" data-toggle=\"tab\"\u003eContract Not Acceptable\u003c/a\u003e\u003c/li\u003e\n                        \u003c/ul\u003e\n\n                        \u003c!-- Tab panes --\u003e\n                        \u003cdiv class=\"tab-content\"\u003e\n                            \u003cdiv role=\"tabpanel\" class=\"{{unless controller.isModified 'tab-pane active' 'tab-pane'}}\" id=\"static\"\u003e\n                                \u003cdiv class=\"panel-heading\"\u003e\n                                    \u003ch3 class=\"panel-title\"\u003eSign NDA Contract As-Is\u003c/h3\u003e\n                                \u003c/div\u003e\n                                \u003cdiv id='bod' class=\"panel-body\" style=\"padding:10px;\"\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003cdiv class=\"col-md-9\"\u003e\n                                            Please, use View and Sign buttons above to sign contract As-Is.\n                                        \u003c/div\u003e\n                                    \u003c/div\u003e\n                                    \u003cdiv class=\"row text-center\" style=\"padding:10px;\"\u003e\n                                        \u003cbutton type=\"button\" class=\"btn btn-success\" data-dismiss=\"modal\" {{action \"submitAction\"}}\u003eAPPROVE\u003c/button\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                            \u003cdiv role=\"tabpanel\" class=\"{{if controller.isModified 'tab-pane active' 'tab-pane'}}\" id=\"objstore\"\u003e\n                                \u003cdiv class=\"panel-heading\"\u003e\n                                    {{#unless controller.isModified}}\n                                    \u003ch3 class=\"panel-title\"\u003eSelect and Edit Sections\u003c/h3\u003e\n                                    {{/unless}}\n                                    {{#if controller.isModified}}\n                                    \u003ch3 class=\"panel-title\"\u003eCompare and Edit Sections\u003c/h3\u003e\n                                    {{/if}}\n                                \u003c/div\u003e\n                                \u003cdiv id='bod' class=\"panel-body\" style=\"padding:10px;\"\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        {{#unless controller.isModified}}\n                                        \u003cdiv class=\"col-md-12\"\u003e\n                                            \u003cdiv class=\"heading\"\u003e\n                                                \u003ch3\u003ePropose Revisions\u003c/h3\u003e\n                                            \u003c/div\u003e\n                                            {{render \"sections\" facts.Sections}}\n                                        \u003c/div\u003e\n                                        {{/unless}}\n                                        {{#if controller.isModified}}\n                                        \u003cdiv class=\"col-md-6\"\u003e\n                                            \u003cdiv class=\"heading\"\u003e\n                                                \u003ch3\u003eYour Proposed Revisions\u003c/h3\u003e\n                                            \u003c/div\u003e\n                                            {{render \"sectionsReadOnly\" facts.Sections}}\n                                        \u003c/div\u003e\n                                        \u003cdiv class=\"col-md-6\"\u003e\n                                            \u003cdiv class=\"heading\"\u003e\n                                                \u003ch3\u003eLegal Proposed Revisions\u003c/h3\u003e (Edit)\n                                            \u003c/div\u003e\n                                            {{render \"sections\" facts.SectionsDelta}}\n                                        \u003c/div\u003e\n                                        {{/if}}\n                                    \u003c/div\u003e\n                                    \u003cdiv class=\"row\"\u003e\n                                        \u003chr/\u003e\n                                    \u003c/div\u003e\n                                    \u003cdiv class=\"row text-center\" style=\"padding:10px;\"\u003e\n                                        {{#if controller.isModified}}\n                                        \u003cbutton type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\" {{action \"submitAction\"}}\u003eACCEPT REVISIONS\u003c/button\u003e\n                                        {{/if}}\n                                        \u003cbutton type=\"button\" class=\"btn btn-warning\" data-dismiss=\"modal\" {{action \"requestChangeAction\"}}\u003eSUBMIT REVISIONS\u003c/button\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n        {{input type=\"hidden\" name=\"wf_optionsOutcome\" valueBinding=\"wf_optionsOutcome\"}}\n    \u003c/div\u003e\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"sections\"\u003e\n    {{#each model as |section index|}}\n    \u003cdiv class=\"row\" style=\"padding-bottom:2px;padding-left:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-5\" style=\"\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n    {{/each}}\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"sectionsReadOnly\"\u003e\n    {{#each model as |section index|}}\n    \u003cdiv class=\"row\" style=\"padding-bottom:2px;padding-left:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected disabled=\"disabled\"}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-5\" style=\"\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\" readonly=\"true\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n    {{/each}}\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"_inserts\"\u003e\n    \u003cdiv class=\"row\" style=\"padding:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-6\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n\u003c/script\u003e"},"desc":"Recently Converted Form Record","id":"5623dcc3fd0afd1106e3f015","name":"Vendor - Contract Approval Sign or Suggest Changes 3","origin":{"checksum":"C12F215E942EBCD293A9C01FD2FC5B8B0434982FCDD29F495229C70B39E2D2E2L12806","createDate":1.445190851851e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"56229a73fd0afd4d9d70ee23","name":"Vendor - Contract Approval Sign or Suggest Changes 3"},"owner":{},"recType":"app","tstamp":1.445190851852e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623dcc4fd0afde60be3f017"},"checksum":"59E8581D1637A1C0CAA422501DC2B619B4E56D05872722BAB42F2D94AEC9FA92L8141","createDate":{"$date":"2015-10-18T17:54:12.183Z"},"creatorId":"tpanagos@point.io","data":{"form":"\u003cscript\u003e\n    window.App.IndexController.reopen({\n        core_form: '#emberForm',\n        isSubmitting : false,\n        isAcceptable: true,\n        actions: {\n            acceptableAction: function (state) {\n                this.set(\"isAcceptable\", state);\n            },\n            submitAction: function () {\n                $('[name=wf_optionsOutcome]').val('approve');\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n                return true;\n            },\n            rejectChangeAction: function () {\n                $('[name=wf_optionsOutcome]').val('rejected');\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n                return true;\n            },\n            rejectProposeAction: function () {\n                $('[name=wf_optionsOutcome]').val('rejectedwithchanges');\n                this.set(\"isSubmitting\", true );\n                var myJsonObj = {\"REQUEST\": {\"INPUT\" : {\"COMMENT\" : \"Revised Changes Recorded\", \"FIELDS\" : [],\"FACTS\": {\"SectionsDelta\":facts.Sections}}}};\n                /*modify fact*/\n                $.ajax({\n                    url: \"/messages/injectListJSON/\"+jsonTask.DETAILS.ID+\"?Authorization=\"+sessionKey,\n                    type: \"PUT\",\n                    data: JSON.stringify(myJsonObj),\n                    contentType: \"application/json\",\n                    success: function(data){\n                        console.log(\"ajax update successful\");\n                        // here you could perform your actions like persisting to the server or so\n                        $('#emberForm').submit();\n                    },\n                    failure: function(data){\n                        console.log(\"ajax update failed\");\n                    }\n                });\n            },\n            goAction: function () {\n                this.set(\"isSubmitting\", true );\n                // here you could perform your actions like persisting to the server or so\n                $('#emberForm').submit();\n            },\n            saveQAction: function(taskId) {\n                var currQ = this.get(\"currentQuestionLoop\");\n                var myfacts = this.get('facts.thisQuestionnaire');\n                var mystagename = this.get('currentStageName');\n                var mystage = myfacts[mystagename];\n                var myQuestionnaire = this.get('facts.thisQuestionnaire');\n            }\n        }\n    });\n\n    App.RadioButtonComponent = Ember.Component.extend({\n\n        tagName: 'input',\n        type: 'radio',\n        attributeBindings: [ 'checked', 'name', 'type', 'value' ],\n\n        checked: function () {\n            if (this.get('value') === this.get('groupValue')) {\n                Ember.run.once(this, 'takeAction');\n                return true;\n            } else { return false; }\n        },\n\n        takeAction: function() {\n            this.sendAction('selectedAction', this.get('value'));\n        },\n\n        change: function () {\n            this.set('groupValue', this.get('value'));\n            Ember.run.once(this, 'checked'); //manual observer\n        }\n\n    });\n\u003c/script\u003e\n\n\u003cstyle\u003e\n    html {\n        display: block !important;\n    }\n    table {\n        border-collapse: collapse;\n        border-spacing: 1; }\n\n    /* line 28, ../../../../../../vendor/bundle/ruby/1.9.1/gems/compass-0.12.2/frameworks/compass/stylesheets/compass/reset/_utilities.scss */\n    caption, th, td {\n        text-align: center;\n        font-weight: normal;\n        vertical-align: top; }\n\u003c/style\u003e\n\n\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"index\"\u003e\n    \u003cdiv class=\"container\" class=\"form-horizontal\" class=\" js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths\" data-ember-extension=\"1\" style=\"display: block;\"\u003e\n        \u003cdiv id=\"collapseA\" class=\"panel-collapse collapse in\"\u003e\n            \u003cdiv class=\"container-fluid\"\u003e\n\n                \u003cdiv class=\"row\"\u003e\n\n                    \u003cdiv role=\"tabpanel\"\u003e\n                        \u003c!-- Nav tabs --\u003e\n\n                        \u003c!-- Tab panes --\u003e\n                        \u003cdiv role=\"tabpanel\" class=\"tab-pane\" id=\"objstore\"\u003e\n                            \u003cdiv class=\"panel-heading\"\u003e\n                                \u003ch3 class=\"panel-title\"\u003eReview Proposed Changes Against Standard\u003c/h3\u003e\n                            \u003c/div\u003e\n                            \u003cdiv id='bod' class=\"panel-body\" style=\"padding:10px;\"\u003e\n                                \u003cdiv class=\"row\"\u003e\n                                    \u003cdiv class=\"col-md-12\"\u003e\n                                        \u003cdiv class=\"heading\"\u003e\n                                            Proposed Sections for Change\n                                        \u003c/div\u003e\n                                        {{partial \"sections\"}}\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\"row text-center\" style=\"padding:10px;\"\u003e\n                                    \u003cdiv class=\"heading\"\u003e\n                                        Comments\n                                    \u003c/div\u003e\n                                    {{textarea id='modify_Comments' name='modify_Comments' rows=\"5\" cols=\"80\" name=\"wf_Comments\" }}\n                                \u003c/div\u003e\n                                \u003cdiv class=\"row text-center\" style=\"padding:10px;\"\u003e\n                                    \u003cbutton type=\"button\" class=\"btn btn-success\" data-dismiss=\"modal\" {{action \"submitAction\"}}\u003eAPPROVE CHANGES\u003c/button\u003e\n                                    \u003cbutton type=\"button\" class=\"btn btn-danger\" data-dismiss=\"modal\" {{action \"rejectProposeAction\"}}\u003ePROPOSE CHANGES\u003c/button\u003e\n                                    \u003cbutton type=\"button\" class=\"btn btn-danger\" data-dismiss=\"modal\" {{action \"rejectChangeAction\"}}\u003eREJECT CHANGES\u003c/button\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n        {{input type=\"hidden\" name=\"wf_optionsOutcome\" valueBinding=\"wf_optionsOutcome\"}}\n    \u003c/div\u003e\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"_sections\"\u003e\n\n    {{#each facts.Sections as |section index|}}\n    \u003cdiv class=\"row\" style=\"padding-bottom:2px;padding-left:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-5\" style=\"\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n\n    {{/each}}\n\u003c/script\u003e\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"_inserts\"\u003e\n    \u003cdiv class=\"row\" style=\"padding:2px;\"\u003e\n        \u003cdiv class=\"col-md-1\"\u003e\n            {{input type=\"checkbox\" name=\"Selected{{index}}\" checked=section.isSelected}}\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-2\"\u003e\n            {{section.Label}}\n        \u003c/div\u003e\n        {{#if section.isSelected}}\n        \u003cdiv class=\"col-md-6\"\u003e\n            {{textarea type=\"text\" value=section.Text rows=\"10\" cols=\"50\"}}\n        \u003c/div\u003e\n        {{/if}}\n    \u003c/div\u003e\n\u003c/script\u003e"},"desc":"Recently Converted Form Record","id":"5623dcc4fd0afde60be3f017","name":"Contract Approval Review Proposed Changes 3","origin":{"checksum":"59E8581D1637A1C0CAA422501DC2B619B4E56D05872722BAB42F2D94AEC9FA92L8141","createDate":1.445190852183e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"56229a73fd0afd1a9f70ee25","name":"Contract Approval Review Proposed Changes 3"},"owner":{},"recType":"app","tstamp":1.445190852183e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623dcc4fd0afde80be3f019"},"checksum":"3B8C14663CE9416754A04685297E64EA62D2DA9154CBB13B9F4A586CBFF9B3F7L18919","createDate":{"$date":"2015-10-18T17:54:12.495Z"},"creatorId":"tpanagos@point.io","data":{"form":"\n\u003cscript type=\"text/javascript\"\u003e\n    var baseURL = window.location.protocol+'//'+window.location.hostname+(window.location.port ? ':'+window.location.port: '');\n\n    App.FileController = Ember.Controller.extend({\n        init: function(){\n            console.log(\"fileinit\");\n        },\n        queryParams: ['containerid','path'],\n        containerid: null,\n        path: null,\n        showShareList: true,\n        bPopUp: null,\n        isFileListEmpty: true,\n        dataArray: function() {\n            var dA = Ember.A();\n            var raw = this.get(\"model\");\n            for (var i in raw) {\n                dA.pushObject(raw[i]);\n            }\n            return dA\n        }.property(\"model\"),\n        filelist:  Ember.A(),\n        folderlist:  Ember.A(),\n        folderstack:  Ember.A(),\n        shares: function() {\n            return this.get(\"dataArray\");\n        }.property(\"dataArray\"),\n        actions: {\n            submitAction: function() {\n                var self = this;\n                // We really want to inject RELATEDS\n                var injectableFiles = [];\n                this.get(\"filelist\").forEach(function (file) {\n                    injectableFiles.pushObject({\n                        \"ID\": file.link,\n                        \"LABEL\": file.name,\n                        \"TOOLTIP\": \"file.label\",\n                        \"TYPE\": \"PIO\",\n                        \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=\" + file.link\n                    });\n                });\n                var injectableFacts = {\n                    'REQUEST': {\n                        'INPUT': {\n                            'RELATEDS': injectableFiles,\n                            'FIELDS': [],\n                            'FACTS': []\n                        }\n                    }\n                };\n                Ember.$.ajax({\n                    type: \"PUT\",\n                    async: true,\n                    url: baseURL + '/messages/injectListJSON/' + taskid + '?Authorization=' + sessionKey,\n                    data: JSON.stringify(injectableFacts),\n                    dataType: 'json',\n                    contentType: 'application/json',\n                    success: function (data) {\n                        console.log(\"JSON injected successfully.\");\n                        //$('#emberForm').submit();\n                    }\n                });\n                return true; //this bubbles the action up\n            },\n            addFile: function (share) {\n                //create a link\n                var linkURL = \"\";\n                //v3\n                var servercall = baseURL + \"/apidoc/links/create/\" + share.shareid + \"?Authorization=\" + sessionKey;\n                $.ajax({\n                    type: \"POST\",\n                    async: false,\n                    data: {'containerid' : share.containerid  ,  'path' : share.path  ,  'fileid' : share.fileid , 'filename': share.name},\n                    url: servercall,\n                    success: function(data){\n                        console.log(data);\n                        linkURL = data.RESPONSE.linkid;\n                    }\n                });\n                //add it to the list\n                var fileArray = this.get(\"filelist\");\n                fileArray.pushObject({name: share.name, link: linkURL, label: share.name});\n                this.set(\"isFileListEmpty\", false);\n            },\n            removeFile: function(id){\n                var fileList = this.get('filelist');\n                fileList.removeObject(id);\n                if (fileList.length == 0)\n                    this.set(\"isFileListEmpty\", true);\n            },\n            createFolderPop: function(modalName, shareid){\n                var fileList = this.get('model');\n                this.set(\"bPopUp\", $('#popup').bPopup({\n                    modalClose: false,\n                    opacity: 0.6,\n                    positionStyle: 'fixed' //'fixed' or 'absolute'\n                }));\n                return this.get(\"route\").render(modalName, {\n                    into: 'file',\n                    outlet: 'modal'\n                });\n            },\n            uploadFilePop: function(modalName, shareid){\n                var fileList = this.get('model');\n                this.set(\"bPopUp\", $('#popup').bPopup({\n                    modalClose: false,\n                    opacity: 0.6,\n                    positionStyle: 'fixed' //'fixed' or 'absolute'\n                }));\n                return this.render(modalName, {\n                    into: 'file',\n                    outlet: 'modal'\n                });\n            },\n            createFolderClick: function(modalName, shareid){\n                // TODO Should do the folder create ajax here and then refresh\n                this.get(\"bPopUp\").close();\n                return this.disconnectOutlet({\n                    outlet: 'modal',\n                    parentView: 'file'\n                });\n            },\n            uploadFileClick: function(modalName, shareid){\n                // TODO Should do the file upload ajax here and then refresh\n                this.get(\"bPopUp\").close();\n                return this.disconnectOutlet({\n                    outlet: 'modal',\n                    parentView: 'file'\n                });\n            },\n            returnToSites: function (shareid, share2, path, containerid) {\n                this.set('showShareList', true);\n            },\n            navigateToParent: function () {\n                if (this.get('folderstack').length == 0) {\n                    //console.log(\"returning\");\n                    this.set('showShareList', true);\n                }\n                else {\n                    var current = this.get('folderstack').pop();\n                    //console.log(current.queryParams.containerid + \" Pop \u0026 length is now: \" + this.get('folderstack').length);\n                    this.set('folderlist', current);\n                }\n            },\n            openShare: function (shareid, share2, path, containerid) {\n                console.log(\"made it to openShare\");\n                var self = this;\n                var queryParams = {path: path, containerid: containerid};\n                Ember.$.ajax({\n                    async: false,\n                    url: baseURL + '/apidoc/folders/list/' + shareid,\n                    data: queryParams,\n                    headers: {\n                        Authorization: sessionKey\n                    },\n                    success: function (data) {\n                        var sharesList = Ember.A();\n                        (data.RESPONSE.RESULT.forEach(function (share) {\n                            share.isDir = (share.type === 'DIR');\n\n                            var params = [];\n                            if (share.path) {\n                                params.push('path=' + encodeURIComponent(share.path))\n                            }\n                            if (share.containerid) {\n                                params.push('containerid=' + encodeURIComponent(share.containerid))\n                            }\n                            if (share.fileid) {\n                                params.push('fileid=' + encodeURIComponent(share.fileid))\n                            }\n                            if (share.name) {\n                                params.push('filename=' + encodeURIComponent(share.name))\n                            }\n                            params.push('asBinary=true');\n\n                            share.downloadURL = baseURL + '/apidoc/files/download/' + share.shareid + '?Authorization=' + sessionKey + '\u0026' + params.join(\"\u0026\")\n\n                            sharesList.pushObject(share);\n                        }));\n                        if ((self.get('folderlist.shareid') \u0026\u0026 (containerid))) {\n                            // Push the previous folder if there IS a previous folder \u0026 if this is NOT the top folder\n                            self.get('folderstack').push({\n                                shares: self.get('folderlist.shares'),\n                                shareid: self.get('folderlist.shareid'),\n                                queryParams: self.get('folderlist.queryParams')\n                            });\n                            //console.log(containerid + \" Push \u0026 length is now: \" + self.get('folderstack').length);\n                        }\n                        // Set the current folder\n                        self.set('folderlist.shares', sharesList);\n                        self.set('folderlist.shareid', shareid);\n                        self.set('folderlist.queryParams', queryParams);\n                    }\n                });\n                this.set('showShareList', false);\n            }\n        }\n    });\n\n    App.CreateFolderRoute = Ember.Route.extend({\n        model: function(params, options){\n            var model = {};\n            model.shareid = params.shareid\n            model.containerid = options.queryParams.containerid\n            model.path = options.queryParams.path\n            model.sessionKey = sessionKey\n            model.url = document.URL\n            model.baseURL = baseURL\n            return model;\n        }\n    })\n\n    App.UploadFileRoute = Ember.Route.extend({\n        model: function(params, options){\n            var model = {};\n            model.shareid = params.shareid\n            model.containerid = options.queryParams.containerid\n            model.path = options.queryParams.path\n            model.sessionKey = sessionKey\n            model.url = document.URL\n            model.baseURL = baseURL\n            return model;\n        }\n    })\n\n\u003c/script\u003e\n\n\u003cscript type=\"text/javascript\" src=\"http://dinbror.dk/bpopup/assets/jquery.bpopup-0.9.4.min.js\"\u003e\u003c/script\u003e\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"file\"\u003e\n\n    \u003cdiv class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\"\u003e\n        \u003cdiv class=\"panel-heading\"\u003e\n            \u003ch4 class=\"panel-title\"\u003e\n                \u003ca data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseA\"\u003eRelated Files\u003c/a\u003e\n            \u003c/h4\u003e\n        \u003c/div\u003e\n        \u003cdiv id=\"collapseA\" class=\"panel-collapse collapse in\"\u003e\n            \u003cdiv class=\"container-fluid\"\u003e\n\n                \u003cdiv id=\"content panel-group\" id=\"accordion\"\u003e\n                    \u003cdiv style=\"padding: 10px;\"\u003e\n                        \u003cdiv class=\"panel panel-default\"\u003e\n                            \u003cdiv class=\"panel-heading\"\u003e\n                                \u003ch3 class=\"panel-title\"\u003eNavigate and Attach Files\u003c/h3\u003e\n                            \u003c/div\u003e\n                            \u003cdiv id='bod' class=\"panel-body\"\u003e\n                                \u003cdiv class=\"row\"\u003e\n                                    \u003cdiv class=\"col-md-9\"\u003e\n                                        {{#if controller.showShareList}}\n                                        \u003cdiv id=\"sharelist\" class=\"row-fluid\"\u003e\n                                            {{partial \"sharelist\"}}\n                                        \u003c/div\u003e\n                                        {{/if}}\n                                        {{#unless controller.showShareList}}\n                                        \u003cdiv id=\"folderlist\" class=\"row-fluid\"\u003e\n                                            {{partial \"_folderlist\"}}\n                                        \u003c/div\u003e\n                                        {{/unless}}\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n                \u003c!-- content --\u003e\n                {{#unless controller.isFileListEmpty}}\n                \u003cdiv id=\"content panel-group\" id=\"accordion\"\u003e\n                    \u003cdiv style=\"padding: 10px;\"\u003e\n                        \u003cdiv class=\"panel panel-default\"\u003e\n                            \u003cdiv class=\"panel-heading\"\u003e\n                                \u003ch3 class=\"panel-title\"\u003eAttached Files\u003c/h3\u003e\n                            \u003c/div\u003e\n                            \u003cdiv id='bod' class=\"panel-body\"\u003e\n                                \u003cdiv class=\"row\"\u003e\n                                    \u003cdiv class=\"col-md-3\"\u003e\u003clabel\u003eFile Label\u003c/label\u003e\u003c/div\u003e\n                                    \u003cdiv class=\"col-md-3\"\u003e\u003clabel\u003eFile Name\u003c/label\u003e\u003c/div\u003e\n                                    \u003cdiv class=\"col-md-3\"\u003e\u003clabel\u003eLink\u003c/label\u003e\u003c/div\u003e\n                                \u003c/div\u003e\n                                {{#each file in controller.filelist}}\n                                \u003cdiv class=\"row\"\u003e\n                                    \u003cdiv class=\"col-md-3\"\u003e{{input type=\"text\" class=\"form-control\" value=file.label}}\n                                    \u003c/div\u003e\n                                    \u003cdiv class=\"col-md-3\"\u003e\u003cp class=\"form-control-static\"\u003e{{file.name}}\u003c/p\u003e\u003c/div\u003e\n                                    \u003cdiv class=\"col-md-3\"\u003e\u003cp class=\"form-control-static\"\u003e{{file.link}}\u003c/p\u003e\u003c/div\u003e\n                                    \u003cbutton class=\"btn btn-danger btn-sm\" {{action\n                                    \"removeFile\" file}}\u003eRemove\u0026nbsp;\u003cspan\n                                        class=\"glyphicon glyphicon-trash\"\u003e\u003c/span\u003e\u003c/button\u003e\n                                    {{input type=\"hidden\" value=file.link name=file.name}}\n                                \u003c/div\u003e\n                                {{/each}}\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n                {{/unless}}\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/div\u003e\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"_sharelist\"\u003e\n    \u003ctable class=\"table table-bordered table-striped table-condensed col-md-10\"\u003e\n        \u003cthead\u003e\n        \u003ctr\u003e\n            \u003cth\u003eName\u003c/th\u003e\n            \u003cth\u003eSite\u003c/th\u003e\n            \u003cth\u003eType\u003c/th\u003e\n        \u003c/tr\u003e\n        \u003c/thead\u003e\n        \u003ctbody\u003e\n        {{#each share in controller.shares}}\n        \u003ctr\u003e\n            \u003ctd\u003e\u003ca {{action \"openShare\" share.share.id share share.share.path share.share.containerid}}\u003e{{share.share.name}}\u003c/a\u003e\u003c/td\u003e\n            \u003ctd\u003e{{share.site.name}}\u003c/td\u003e\n            \u003ctd\u003e{{share.siteType.name}}\u003c/td\u003e\n        \u003c/tr\u003e\n        {{/each}}\n        \u003c/tbody\u003e\n    \u003c/table\u003e\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"createFolder\"\u003e\n    \u003cform class=\"form-horizontal\"\u003e\n        \u003cdiv class=\"form-group\"\u003e\n            \u003clabel class=\"col-sm-2 control-label\"\u003eName\u003c/label\u003e\n            \u003cdiv class=\"col-sm-10\"\u003e\n                {{input type=\"text\" name=\"foldername\" class=\"form-control\" value=model.foldername}}\n            \u003c/div\u003e\n        \u003c/div\u003e\n        \u003cdiv class=\"form-group\"\u003e\n            \u003clabel class=\"col-sm-2 control-label\"\u003e\u003c/label\u003e\n            \u003cdiv class=\"col-sm-10\"\u003e\n                \u003cinput class=\"btn btn-default\" {{action \"createFolderClick\"}} value=\"Create Folder\"/\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/form\u003e\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"uploadFile\"\u003e\n    \u003cform class=\"form-horizontal\" method=\"POST\" enctype=\"multipart/form-data\" action=\"{{unbound model.baseURL}}/apidoc/files/upload/{{unbound shareid}}?Authorization={{unbound sessionKey}}\"\u003e\n        \u003cdiv class=\"form-group\"\u003e\n            \u003clabel class=\"col-sm-2 control-label\"\u003eFile\u003c/label\u003e\n            \u003cdiv class=\"col-sm-10\"\u003e\n                \u003cinput type=\"file\" name=\"uploadfile\" class=\"form-control\"/\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n        \u003cdiv class=\"form-group\"\u003e\n            \u003clabel class=\"col-sm-2 control-label\"\u003e\u003c/label\u003e\n            \u003cdiv class=\"col-sm-10\"\u003e\n                \u003cinput class=\"btn btn-default\" {{action \"uploadFileClick\"}} value=\"Upload\"/\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/form\u003e\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"_folderlist\"\u003e\n    \u003cdiv id=\"browseOnly\"\u003e\n\n        \u003cbutton type=\"button\" class=\"btn btn-default\" {{action \"createFolderPop\" 'createFolder' controller.folderlist.shareid}}\u003e\n        \u003cspan class=\"glyphicon glyphicon-plus-sign\"\u003e\u003c/span\u003e \u0026nbsp;Create Folder\n        \u003c/button\u003e\n\n        \u003cbutton type=\"button\" class=\"btn btn-default\" {{action \"uploadFilePop\" 'uploadFile' controller.folderlist.shareid}}\u003e\n        \u003cspan class=\"glyphicon glyphicon-upload\"\u003e\u003c/span\u003e \u0026nbsp;Upload File\n        \u003c/button\u003e\n\n        \u003cbutton type=\"button\" class=\"btn btn-default\" {{action \"returnToSites\"}}\u003e\n        \u003cspan class=\"glyphicon glyphicon-folder-open\"\u003e\u003c/span\u003e \u0026nbsp;Back to Root\n        \u003c/button\u003e\n\n        \u003cbutton type=\"button\" class=\"btn btn-default\" {{action \"navigateToParent\" controller.folderlist.shareid}}\u003e\n        \u003cspan class=\"glyphicon glyphicon-level-up\"\u003e\u003c/span\u003e \u0026nbsp;Back to Parent\n        \u003c/button\u003e\n        \u003cdiv id=\"popup\"\u003e\n            \u003cspan class=\"button b-close\"\u003e\u003cspan\u003eX\u003c/span\u003e\u003c/span\u003e\n            {{outlet 'modal'}}\n        \u003c/div\u003e\n    \u003c/div\u003e\n    \u003ctable class=\"table table-bordered table-striped col-md-12\"\u003e\n        \u003cthead\u003e\n        \u003ctr\u003e\n            \u003cth\u003eName\u003c/th\u003e\n            \u003c!--\u003cth\u003eModified\u003c/th\u003e--\u003e\n            \u003c!--\u003cth\u003eSize\u003c/th\u003e--\u003e\n            \u003cth\u003e\u003c/th\u003e\n        \u003c/tr\u003e\n        \u003c/thead\u003e\n        \u003ctbody\u003e\n        {{#each controller.folderlist.shares as |share|}}\n        \u003ctr\u003e\n            \u003ctd\u003e\n                {{#if share.isDir}}\n                \u003ca {{action \"openShare\" share.shareid share share.path share.containerid}}\u003e\n                \u003cspan class=\"glyphicon glyphicon-folder-open\"\u003e\u003c/span\u003e \u0026nbsp;\n                {{share.name}}\n                \u003c/a\u003e\n                {{/if}}\n                {{#unless share.isDir}}\n                \u003ca href=\"{{share.downloadURL}}\"\u003e\n                    \u003cspan class=\"glyphicon glyphicon-file\" style=\"color: silver;\"\u003e\u003c/span\u003e \u0026nbsp;\n                    {{share.name}}\n                \u003c/a\u003e\n                {{/unless}}\n            \u003c/td\u003e\n            \u003ctd\u003e\n                {{#unless share.isDir}}\n                \u003ca class=\"btn btn-default\" href=\"{{share.downloadURL}}\"\u003e\n                    \u003cspan class=\"glyphicon glyphicon-download\"\u003e\u003c/span\u003e \u0026nbsp; Download\n                \u003c/a\u003e\n                \u003cbutton class=\"btn btn-default\" {{action \"addFile\" share}}\u003e\n                \u003cspan class=\"glyphicon glyphicon-paperclip\"\u003e\u003c/span\u003e \u0026nbsp; Attach File\n                \u003c/button\u003e\n                {{/unless}}\n            \u003c/td\u003e\n        \u003c/tr\u003e\n        {{/each}}\n        \u003c/tbody\u003e\n    \u003c/table\u003e\n\u003c/script\u003e\n"},"desc":"Recently Converted Form Record","id":"5623dcc4fd0afde80be3f019","name":"apidoc select \u0026 preview","origin":{"checksum":"3B8C14663CE9416754A04685297E64EA62D2DA9154CBB13B9F4A586CBFF9B3F7L18919","createDate":1.445190852495e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"56229a73fd0afd3d9d70ee27","name":"apidoc select \u0026 preview"},"owner":{},"recType":"app","tstamp":1.445190852495e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623dcc4fd0afde80be3f01b"},"checksum":"F83560DAAFA8AD9C4A18C80917E7CF8862EF6BACDEBB9AC85B9BC3DF1E3B9832L10743","createDate":{"$date":"2015-10-18T17:54:12.827Z"},"creatorId":"tpanagos@point.io","data":{"form":"    \u003cscript type='text/javascript'\u003e\n\n        var serverUrl = \"http://api.point.io/api/v2/\";\n\n        App.Related = Ember.Object.extend({\n            \"id\": \"1f813e0c-e523-4d13-a255-793e3b20786a\",\n            \"label\": \"Joint_Venture_Agreement.pdf\",\n            \"tooltip\": \"Download allowed\",\n            \"type\": \"PIO\",\n            \"url\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=02E67D51-9395-42FB-B22FB8CE50DE674D\",\n            \"shareid\": \"\",\n            \"containerid\": \"\",\n            \"remotepath\": \"\",\n            \"fileid\": \"\",\n            \"filename\": \"\",\n            \"ak\": \"\",\n            \"totalPages\": 0,\n            \"imageURL\": \"\",\n            \"pageNum\": 0,\n            \"nextPage\": 0,\n            \"prevPage\": 0,\n            \"isLoaded\": false,\n            \"isDisplayed\": false\n        });\n\n        App.Related.reopenClass({\n            createRelatedfromRELATED: function(data) {\n                return App.Related.create({id: data.ID, label: data.LABEL, tooltip: data.TOOLTIP, type: data.TYPE, url: URL});\n            }\n        });\n\n        App.PreviewView = Ember.View.create({\n            didInsertElement: function () {\n                Ember.run.scheduleOnce('afterRender', this, 'afterRenderEvent');\n            },\n            afterRenderEvent: function () {\n                this.get('controller').send('loadpage', 1);\n            }\n        });\n\n        App.PreviewController = Ember.Controller.extend({\n            facts: jsonTask.FACTS,\n//        rawRelateds: [\n//            {\n//                \"ID\": \"5feb9cde-1ae6-4f2f-ac3b-87ac193daa4e\",\n//                \"LABEL\": \"Breakeven_Analysis_Chart.xls\",\n//                \"TOOLTIP\": \"Download allowed\",\n//                \"TYPE\": \"PIO\",\n//                \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=02E67D51-9395-42FB-B22FB8CE50DE674D\"\n//            },\n//            {\n//                \"ID\": \"fa13fb5c-2753-4a33-8460-a7470ca8d1ce\",\n//                \"LABEL\": \"Opp by Type.xlsx\",\n//                \"TOOLTIP\": \"Download prevented\",\n//                \"TYPE\": \"PIO\",\n//                \"URL\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=56272D8E-A30E-454F-85BA39BD8DB39093\"\n//            }\n//        ],\n            rawRelateds: jsonTask.RELATEDS, \n            relateds: function() {\n                var relatedObjs = Ember.A();\n                var self = this;\n                this.get(\"rawRelateds\").forEach( function(related) {\n                    relatedObjs.pushObject(App.Related.createRelatedfromRELATED(related));\n                });\n                return relatedObjs;\n            }.property(\"rawRelateds\"),\n            linkid: \"065ee71e-aa6f-45c0-a4a2-de86df05111d\",\n//            linkid: facts.linkid,\n            totalPages: 0,\n            pageNum: 1,\n            nextPage: 0,\n            prevPage: 0,\n            fileLinks: function () {\n\n            },\n            linkObject: function (linkObject) {\n//                var linkid = this.get(\"linkid\");\n                console.log(linkObject.id);\n//                var linkObject = {};\n                var servercall = serverUrl + \"links/\" + linkObject.id + \"/details?\"\n                        + \"ViewerAPIKey=5c3fe650-661d-4551-aff4-0f9d5ea8cb7d\"\n                        + \"\u0026ipaddress=127.0.0.1\";\n                $.ajax({\n                    type: \"GET\",\n                    async: false,\n                    url: servercall,\n                    success: function (data) {\n                        linkObject.shareid = data.RESULT.DATA[0][2];\n                        linkObject.containerid = data.RESULT.DATA[0][10];\n                        linkObject.remotepath = data.RESULT.DATA[0][9];\n                        linkObject.fileid = data.RESULT.DATA[0][7];\n                        linkObject.filename = data.RESULT.DATA[0][8];\n                        linkObject.ak = data.ACCESSKEY;\n                    }\n                });\n                return linkObject;\n            },\n            actions: {\n                loadpage: function (pageNum, id, tObject) {\n//                    console.log(\"loadpage \" + pageNum + \" Label \" + tObject.label);\n                    if (!tObject.isLoaded) {\n                        this.linkObject(tObject);\n                    }\n                    if (pageNum != tObject.pageNum) {\n//                        console.log(\"tObj \" + tObject.containerid + \" Label \" + tObject.label);\n                        var servercall = serverUrl + \"folders/files/preview.json?\"\n                                + \"containerid=\" + tObject.containerid\n                                + \"\u0026remotepath=\" + tObject.remotepath\n                                + \"\u0026fileid=\" + tObject.fileid\n                                + \"\u0026filename=\" + tObject.filename\n                                + \"\u0026folderid=\" + tObject.shareid\n                                + \"\u0026pagenum=\" + pageNum;\n                        var totalPages = 0;\n                        var imageUrl = \"\";\n                        $.ajax({\n                            type: \"GET\",\n                            async: false,\n                            headers: {\n                                \"Authorization\": tObject.ak\n                            },\n                            url: servercall,\n                            success: function (data) {\n                                console.log(data);\n                                tObject.set(\"totalPages\", data.NUMPAGES);\n                                tObject.set(\"imageUrl\", data.RESULT);\n                            }\n                        });\n                        tObject.set(\"isLoaded\", true);\n\n                        if ((pageNum + 1) \u003c= tObject.totalPages) {\n                            tObject.set('nextPage', pageNum + 1);\n                        } else {\n                            tObject.set('nextPage', 0);\n                        }\n\n                        if ((pageNum - 1) \u003e 0) {\n                            tObject.set('prevPage', pageNum - 1);\n                        } else {\n                            tObject.set('prevPage', 0);\n                        }\n                        tObject.set('pageNum', pageNum);\n                        document.getElementById(id).src = tObject.imageUrl;\n                    }\n                    tObject.set(\"isDisplayed\", true);\n                    $('#'+ id).show();\n//                    console.log(\"Displayed: \" + tObject.get(\"isDisplayed\") + \"isLoaded: \" + tObject.get(\"isLoaded\"));\n                },\n                closepage: function(id, tObject) {\n                    $('#'+ id).hide();\n                    tObject.set(\"isDisplayed\", false);\n                }\n            }\n        });\n\n        // This is here to trigger the rendering of the View to the end of the body tag\n        App.PreviewView.append();\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"preview\"\u003e\n        \u003cdiv class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\"\u003e\n            \u003cdiv class=\"panel-heading\"\u003e\n                \u003ch4 class=\"panel-title\"\u003e\n                    \u003ca data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseB\"\u003eRelated Files\u003c/a\u003e\n                \u003c/h4\u003e\n            \u003c/div\u003e\n            \u003cdiv id=\"collapseB\" class=\"panel-collapse collapse in\"\u003e\n                \u003cdiv class=\"container-fluid\"\u003e\n                    \u003cdiv class=\"panel panel-default\"\u003e\n                        \u003cdiv class=\"panel-body\"\u003e\n                            \u003ctable class=\"table table-striped table-bordered\"\u003e\n                                \u003cthead\u003e\n                                \u003ctr\u003e\n                                    \u003cth\u003e\u0026nbsp;\u003c/th\u003e\n                                    \u003cth\u003eLABEL\u003c/th\u003e\n                                    \u003cth\u003e\u0026nbsp;\u003c/th\u003e\n                                \u003c/tr\u003e\n                                \u003c/thead\u003e\n                                \u003ctbody\u003e\n                                    {{#each related in controller.relateds}}\n                                    {{partial \"file\"}}\n                                    {{/each}}\n                                \u003c/tbody\u003e\n                            \u003c/table\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/script\u003e\n\n    \u003cscript type=\"text/x-handlebars\" data-template-name=\"_file\"\u003e\n            \u003ctr\u003e\n                \u003ctd align=\"right\" width=\"25\"\u003e\n                    {{#unless related.isDisplayed}}\n                    \u003cbutton class=\"btn btn-success\" {{action \"loadpage\" 1 related.id related}}\u003ePreview\u003c/button\u003e\n                    {{/unless}}\n                    {{#if related.isDisplayed}}\n                    \u003cbutton class=\"btn btn-success\" {{action \"closepage\" related.id related}}\u003eClose\u003c/button\u003e\n                    {{/if}}\n                \u003c/td\u003e\n                \u003ctd\u003e{{related.label}}\u003c/td\u003e\n                \u003ctd\u003e\n                {{#if related.isDisplayed}}\n                    \u003cp class=\"form-control-static\"\u003e\u003clabel\u003eShow Page\u003c/label\u003e {{related.pageNum}} of {{related.totalPages}}\u003c/p\u003e\n                    \u003cp\u003e{{#if related.prevPage}}\n                        \u003ca {{action \"loadpage\" related.prevPage related.id related}}\u003ePrevious\u003c/a\u003e\n                    {{/if}}\n                    {{#if related.prevPage}}\n                        {{#if related.nextPage}}\n                            \u0026nbsp;|\u0026nbsp;\n                        {{/if}}\n                    {{/if}}\n                    {{#if related.nextPage}}\n                        \u003ca {{action \"loadpage\" related.nextPage related.id related}}\u003eNext\u003c/a\u003e\n                    {{/if}}\u003c/p\u003e\n                {{/if}}\n                    \u003cp\u003e\u003cimg id={{related.id}} style=\"border:1px solid #021a40;\" hidden=true\u003e\u003c/p\u003e\n                {{#if related.isDisplayed}}\n                    \u003cp\u003e{{#if related.prevPage}}\n                        \u003ca {{action \"loadpage\" related.prevPage related.id related}}\u003ePrevious\u003c/a\u003e\n                    {{/if}}\n                    {{#if related.prevPage}}\n                        {{#if related.nextPage}}\n                            \u0026nbsp;|\u0026nbsp;\n                        {{/if}}\n                    {{/if}}\n                    {{#if related.nextPage}}\n                        \u003ca {{action \"loadpage\" related.nextPage related.id related}}\u003eNext\u003c/a\u003e\n                    {{/if}}\u003c/p\u003e\n                {{/if}}\n            \u003c/td\u003e\n            \u003c/tr\u003e\n\n    \u003c/script\u003e\n"},"desc":"Recently Converted Form Record","id":"5623dcc4fd0afde80be3f01b","name":"apidoc preview","origin":{"checksum":"F83560DAAFA8AD9C4A18C80917E7CF8862EF6BACDEBB9AC85B9BC3DF1E3B9832L10743","createDate":1.445190852827e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"56229a73fd0afd3d9d70ee29","name":"apidoc preview"},"owner":{},"recType":"app","tstamp":1.445190852827e+12,"updaterId":"tpanagos@point.io"}
{"_id":{"$oid":"5623dcc5fd0afde60be3f01d"},"checksum":"518340DAD6ACD9C8823779D00D7C93AA773AF2E424F6E6545601F329F01EC39EL14735","createDate":{"$date":"2015-10-18T17:54:13.128Z"},"creatorId":"tpanagos@point.io","data":{"form":"\u003cscript type='text/javascript'\u003e\n\n    var serverUrl = \"http://api.point.io/api/v2/\";\n\n    App.Related = Ember.Object.extend({\n        \"id\": \"1f813e0c-e523-4d13-a255-793e3b20786a\",\n        \"label\": \"Joint_Venture_Agreement.pdf\",\n        \"tooltip\": \"Download allowed\",\n        \"type\": \"PIO\",\n        \"url\": \"http://api.point.io/ui-html5/LinkViewer/app.html?id=02E67D51-9395-42FB-B22FB8CE50DE674D\",\n        \"shareid\": \"\",\n        \"containerid\": \"\",\n        \"remotepath\": \"\",\n        \"fileid\": \"\",\n        \"filename\": \"\",\n        \"ak\": \"\",\n        \"totalPages\": 0,\n        \"imageURL\": \"\",\n        \"pageNum\": 0,\n        \"nextPage\": 0,\n        \"prevPage\": 0,\n        \"isLoaded\": false,\n        \"isDisplayedView\": false,\n        \"isDisplayedSign\": false,\n        \"frameName\": \"SigningFrame\",\n        isVisible: function () {\n            console.log(\"isvis\");\n            return this.get(\"isLoaded\") \u0026\u0026 this.get(\"isDisplayedView\");\n        }.property(\"isLoaded\",\"isDisplayedView\"),\n        isLoading: function () {\n            console.log(\"isloading = \" + (((!this.get(\"isLoaded\") \u0026\u0026 this.get(\"isDisplayedView\")) || this.get(\"isDisplayedSign\"))));\n            return ((!this.get(\"isLoaded\") \u0026\u0026 this.get(\"isDisplayedView\")) || this.get(\"isDisplayedSign\"));\n        }.property(\"isLoaded\",\"isDisplayedView\", \"isDisplayedSign\")\n    });\n\n    App.Related.reopenClass({\n        createRelatedfromRELATED: function(data) {\n            return App.Related.create({id: data.ID, label: data.LABEL, tooltip: data.TOOLTIP, type: data.TYPE, url: data[\"URL\"], frameName: \"SigningFrame\" + data.ID});\n        }\n    });\n\n    App.PreviewView = Ember.View.create({\n        didInsertElement: function () {\n            Ember.run.scheduleOnce('afterRender', this, 'afterRenderEvent');\n        },\n        afterRenderEvent: function () {\n            this.get('controller').send('loadpage', 1);\n        }\n    });\n\n    App.PreviewController = Ember.Controller.extend({\n        isFileListEmpty: true,\n        isOpen: false,\n        facts: jsonTask.FACTS,\n        rawRelateds: jsonTask.RELATEDS,\n        relateds: function() {\n            var relatedObjs = Ember.A();\n            var self = this;\n            this.get(\"rawRelateds\").forEach( function(related) {\n                relatedObjs.pushObject(App.Related.createRelatedfromRELATED(related));\n            });\n            return relatedObjs;\n        }.property(\"rawRelateds\"),\n        linkid: \"065ee71e-aa6f-45c0-a4a2-de86df05111d\",\n//            linkid: facts.linkid,\n        totalPages: 0,\n        pageNum: 1,\n        nextPage: 0,\n        prevPage: 0,\n        linkObject: function (linkObject) {\n            var servercall = serverUrl + \"links/\" + linkObject.id + \"/details?\"\n                    + \"ViewerAPIKey=5c3fe650-661d-4551-aff4-0f9d5ea8cb7d\"\n                    + \"\u0026ipaddress=127.0.0.1\";\n            $.ajax({\n                type: \"GET\",\n                async: false,\n                url: servercall,\n                success: function (data) {\n                    linkObject.shareid = data.RESULT.DATA[0][2];\n                    linkObject.containerid = data.RESULT.DATA[0][10];\n                    linkObject.remotepath = data.RESULT.DATA[0][9];\n                    linkObject.fileid = data.RESULT.DATA[0][7];\n                    linkObject.filename = data.RESULT.DATA[0][8];\n                    linkObject.ak = data.ACCESSKEY;\n                }\n            });\n            return linkObject;\n        },\n        actions: {\n            docusignAction: function (pageNum, id, tObject, frameName) {\n                this.send('closepage', id, tObject);\n                var self = this;\n                this.set('isOpen', true);\n                $.ajax(\"/docusign/\" + encodeURIComponent(tObject.url) + \"?q=demo.docusign.netXXAMPXX/restapi/v2/login_information\" +\n                        \"\u0026linkid=\" + tObject.id + \"\u0026taskid=\" + taskid +\n                        \"\u0026Authorization=\" + sessionKey, {\n                    type: \"GET\",\n                    success: function (data, state, header) {\n                        var iframeLink = data.RESPONSE.PASSTHRU;\n                        window.location.replace(iframeLink);\n                    }\n                });\n                tObject.set(\"isDisplayedSign\", true);\n            },\n            loadpage: function (pageNum, id, tObject) {\n//                    console.log(\"loadpage \" + pageNum + \" Label \" + tObject.label);\n                if (!tObject.isLoaded) {\n                    this.linkObject(tObject);\n                }\n                if (pageNum != tObject.pageNum) {\n//                        console.log(\"tObj \" + tObject.containerid + \" Label \" + tObject.label);\n                    var servercall = serverUrl + \"folders/files/preview.json?\"\n                            + \"containerid=\" + tObject.containerid\n                            + \"\u0026remotepath=\" + tObject.remotepath\n                            + \"\u0026fileid=\" + tObject.fileid\n                            + \"\u0026filename=\" + tObject.filename\n                            + \"\u0026folderid=\" + tObject.shareid\n                            + \"\u0026pagenum=\" + pageNum;\n                    var totalPages = 0;\n                    var imageUrl = \"\";\n                    $.ajax({\n                        type: \"GET\",\n                        async: true,\n                        headers: {\n                            \"Authorization\": tObject.ak\n                        },\n                        url: servercall,\n                        success: function (data) {\n                            console.log(data);\n                            tObject.set(\"totalPages\", data.NUMPAGES);\n                            tObject.set(\"imageUrl\", data.RESULT);\n                            tObject.set(\"isLoaded\", true);\n                            document.getElementById(id).src = tObject.imageUrl;\n                            $('#'+ id).show();\n                        }\n                    });\n//                    tObject.set(\"isLoaded\", true);\n\n                    if ((pageNum + 1) \u003c= tObject.totalPages) {\n                        tObject.set('nextPage', pageNum + 1);\n                    } else {\n                        tObject.set('nextPage', 0);\n                    }\n\n                    if ((pageNum - 1) \u003e 0) {\n                        tObject.set('prevPage', pageNum - 1);\n                    } else {\n                        tObject.set('prevPage', 0);\n                    }\n                    tObject.set('pageNum', pageNum);\n                }\n                tObject.set(\"isDisplayedView\", true);\n                console.log(\"DisplayedView: \" + tObject.get(\"isDisplayedView\") + \"isLoaded: \" + tObject.get(\"isLoaded\"));\n            },\n            closepage: function(id, tObject) {\n                $('#'+ id).hide();\n                tObject.set(\"isDisplayedView\", false);\n            },\n            addFile: function (share) {\n                //create a link\n                var linkURL = \"\";\n                //v3\n                var servercall = baseURL + \"/apidoc/links/create/\" + share.shareid + \"?Authorization=\" + sessionKey;\n                $.ajax({\n                    type: \"POST\",\n                    async: false,\n                    data: {'containerid' : share.containerid  ,  'path' : share.path  ,  'fileid' : share.fileid , 'filename': share.name},\n                    url: servercall,\n                    success: function(data){\n                        console.log(data);\n                        linkURL = data.RESPONSE.linkid;\n                    }\n                });\n                //add it to the list\n                var fileArray = this.get(\"filelist\");\n                fileArray.pushObject({name: share.name, link: linkURL, label: share.name});\n                this.set(\"isFileListEmpty\", false);\n            },\n            removeFile: function(id){\n                var fileList = this.get('filelist');\n                fileList.removeObject(id);\n                if (fileList.length == 0)\n                    this.set(\"isFileListEmpty\", true);\n            }\n        }\n    });\n\n    // This is here to trigger the rendering of the View to the end of the body tag\n    App.PreviewView.append();\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"preview\"\u003e\n    \u003cdiv class=\"panel panel-info\" style=\"margin-top:15px;margin-bottom:15px;\"\u003e\n        \u003cdiv class=\"panel-heading\"\u003e\n            \u003ch4 class=\"panel-title\"\u003e\n                \u003ca data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseB\"\u003eSign Related Files\u003c/a\u003e\n            \u003c/h4\u003e\n        \u003c/div\u003e\n        \u003cdiv id=\"collapseB\" class=\"panel-collapse collapse in\"\u003e\n            \u003cdiv class=\"container-fluid\"\u003e\n                \u003cdiv class=\"panel panel-default\"\u003e\n                    \u003cdiv class=\"panel-body\"\u003e\n                        \u003ctable class=\"table table-striped table-bordered table-responsive\"\u003e\n                            \u003cthead\u003e\n                            \u003ctr\u003e\n                                \u003cth\u003e\u0026nbsp;\u003c/th\u003e\n                                \u003cth\u003eLABEL\u003c/th\u003e\n                            \u003c/tr\u003e\n                            \u003c/thead\u003e\n                            \u003ctbody\u003e\n                            {{#each related in controller.relateds}}\n                            {{partial \"file\"}}\n                            {{/each}}\n                            \u003c/tbody\u003e\n                        \u003c/table\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n                \u003c!-- content --\u003e\n                {{#unless controller.isFileListEmpty}}\n                \u003cdiv id=\"content panel-group\" id=\"accordion\"\u003e\n                    \u003cdiv style=\"padding: 10px;\"\u003e\n                        \u003cdiv class=\"panel panel-default\"\u003e\n                            \u003cdiv class=\"panel-heading\"\u003e\n                                \u003ch3 class=\"panel-title\"\u003eAttached Files\u003c/h3\u003e\n                            \u003c/div\u003e\n                            \u003cdiv id='bod' class=\"panel-body\"\u003e\n                                \u003cdiv class=\"row\"\u003e\n                                    \u003cdiv class=\"col-md-3\"\u003e\u003clabel\u003eFile Label\u003c/label\u003e\u003c/div\u003e\n                                    \u003cdiv class=\"col-md-3\"\u003e\u003clabel\u003eFile Name\u003c/label\u003e\u003c/div\u003e\n                                    \u003cdiv class=\"col-md-3\"\u003e\u003clabel\u003eLink\u003c/label\u003e\u003c/div\u003e\n                                \u003c/div\u003e\n                                {{#each file in controller.filelist}}\n                                \u003cdiv class=\"row\"\u003e\n                                    \u003cdiv class=\"col-md-3\"\u003e{{input type=\"text\" class=\"form-control\" value=file.label}}\n                                    \u003c/div\u003e\n                                    \u003cdiv class=\"col-md-3\"\u003e\u003cp class=\"form-control-static\"\u003e{{file.name}}\u003c/p\u003e\u003c/div\u003e\n                                    \u003cdiv class=\"col-md-3\"\u003e\u003cp class=\"form-control-static\"\u003e{{file.link}}\u003c/p\u003e\u003c/div\u003e\n                                    \u003cbutton class=\"btn btn-danger btn-sm\" {{action\n                                    \"removeFile\" file}}\u003eRemove\u0026nbsp;\u003cspan\n                                        class=\"glyphicon glyphicon-trash\"\u003e\u003c/span\u003e\u003c/button\u003e\n                                    {{input type=\"hidden\" value=file.link name=file.name}}\n                                \u003c/div\u003e\n                                {{/each}}\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n                {{/unless}}\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/div\u003e\n\u003c/script\u003e\n\n\u003cscript type=\"text/x-handlebars\" data-template-name=\"_file\"\u003e\n    \u003ctr\u003e\n        \u003ctd align=\"right\" width=\"25\"\u003e\n            {{#unless related.isDisplayedView}}\n            \u003cbutton class=\"btn btn-success\" {{action \"docusignAction\" 1 related.id related related.frameName}}\u003e\n                \u003cspan class=\"glyphicon glyphicon-pencil\"\u003e\u003c/span\u003e\u0026nbsp;Sign\n            \u003c/button\u003e\n            \u003cbr\u003e\n            \u003cbutton class=\"btn btn-success\" {{action \"loadpage\" 1 related.id related}}\u003e\n                \u003cspan class=\"glyphicon glyphicon-eye-open\"\u003e\u003c/span\u003e\u0026nbsp;View\n            \u003c/button\u003e\n            {{/unless}}\n            {{#if related.isDisplayedView}}\n            \u003cbutton class=\"btn btn-success\" {{action \"docusignAction\" 1 related.id related related.frameName}}\u003e\n                \u003cspan class=\"glyphicon glyphicon-pencil\"\u003e\u003c/span\u003e\u0026nbsp;Sign\n            \u003c/button\u003e\n            \u003cbr\u003e\n            \u003cbutton class=\"btn btn-success\" {{action \"closepage\" related.id related}}\u003e\n                \u003cspan class=\"glyphicon glyphicon-eye-close\"\u003e\u003c/span\u003e\u0026nbsp;Hide\n            \u003c/button\u003e\n            {{/if}}\n        \u003c/td\u003e\n        \u003ctd\u003e{{related.label}}\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr style={{unless related.isVisible \"display:none;\"}}\u003e\n        \u003ctd colspan=\"2\"\u003e\n            {{#if related.isVisible}}\n            \u003cp class=\"form-control-static\"\u003e\u003clabel\u003eShow Page\u003c/label\u003e {{related.pageNum}} of {{related.totalPages}}\u003c/p\u003e\n            \u003cp\u003e{{#if related.prevPage}}\n                \u003ca {{action \"loadpage\" related.prevPage related.id related}}\u003ePrevious\u003c/a\u003e\n                {{/if}}\n                {{#if related.prevPage}}\n                {{#if related.nextPage}}\n                \u0026nbsp;|\u0026nbsp;\n                {{/if}}\n                {{/if}}\n                {{#if related.nextPage}}\n                \u003ca {{action \"loadpage\" related.nextPage related.id related}}\u003eNext\u003c/a\u003e\n                {{/if}}\u003c/p\u003e\n            {{/if}}\n            \u003cp\u003e\u003cimg id={{related.id}} style=\"border:1px solid #021a40;\" hidden=true\u003e\u003c/p\u003e\n            {{#if related.isVisible}}\n            \u003cp\u003e{{#if related.prevPage}}\n                \u003ca {{action \"loadpage\" related.prevPage related.id related}}\u003ePrevious\u003c/a\u003e\n                {{/if}}\n                {{#if related.prevPage}}\n                {{#if related.nextPage}}\n                \u0026nbsp;|\u0026nbsp;\n                {{/if}}\n                {{/if}}\n                {{#if related.nextPage}}\n                \u003ca {{action \"loadpage\" related.nextPage related.id related}}\u003eNext\u003c/a\u003e\n                {{/if}}\u003c/p\u003e\n            {{/if}}\n        \u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr style={{unless related.isLoading \"display:none;\"}}\u003e\n        \u003ctd colspan=\"2\" align=\"center\"\u003e\n            \u003cimg src=\"/assets/images/throbber.gif\"/\u003e\n        \u003c/td\u003e\n    \u003c/tr\u003e\n\u003c/script\u003e\n\n\u003cscript src=\"/assets/javascripts/iframeResizer.min.js\" type=\"text/javascript\"\u003e\u003c/script\u003e"},"desc":"Recently Converted Form Record","id":"5623dcc5fd0afde60be3f01d","name":"DocuSign Default Fact View","origin":{"checksum":"518340DAD6ACD9C8823779D00D7C93AA773AF2E424F6E6545601F329F01EC39EL14735","createDate":1.445190853128e+12,"creatorId":"tpanagos@point.io","desc":"Recently Converted Form Record","id":"56229a73fd0afd1a9f70ee2b","name":"DocuSign Default Fact View"},"owner":{},"recType":"app","tstamp":1.445190853128e+12,"updaterId":"tpanagos@point.io"}
